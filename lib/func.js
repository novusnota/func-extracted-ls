"use strict";var ic=Object.create;var Ns=Object.defineProperty;var oc=Object.getOwnPropertyDescriptor;var sc=Object.getOwnPropertyNames;var ac=Object.getPrototypeOf,uc=Object.prototype.hasOwnProperty;var U=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var cc=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of sc(e))!uc.call(t,i)&&i!==n&&Ns(t,i,{get:()=>e[i],enumerable:!(r=oc(e,i))||r.enumerable});return t};var Se=(t,e,n)=>(n=t!=null?ic(ac(t)):{},cc(e||!t||!t.__esModule?Ns(n,"default",{value:t,enumerable:!0}):n,t));var Yn=U(Te=>{"use strict";Object.defineProperty(Te,"__esModule",{value:!0});Te.thenable=Te.typedArray=Te.stringArray=Te.array=Te.func=Te.error=Te.number=Te.string=Te.boolean=void 0;function lc(t){return t===!0||t===!1}Te.boolean=lc;function Is(t){return typeof t=="string"||t instanceof String}Te.string=Is;function dc(t){return typeof t=="number"||t instanceof Number}Te.number=dc;function _c(t){return t instanceof Error}Te.error=_c;function ks(t){return typeof t=="function"}Te.func=ks;function Fs(t){return Array.isArray(t)}Te.array=Fs;function fc(t){return Fs(t)&&t.every(e=>Is(e))}Te.stringArray=fc;function mc(t,e){return Array.isArray(t)&&t.every(e)}Te.typedArray=mc;function hc(t){return t&&ks(t.then)}Te.thenable=hc});var Et=U(ki=>{"use strict";Object.defineProperty(ki,"__esModule",{value:!0});var Ni;function Ii(){if(Ni===void 0)throw new Error("No runtime abstraction layer installed");return Ni}(function(t){function e(n){if(n===void 0)throw new Error("No runtime abstraction layer provided");Ni=n}t.install=e})(Ii||(Ii={}));ki.default=Ii});var Fi=U(Tn=>{"use strict";Object.defineProperty(Tn,"__esModule",{value:!0});Tn.Disposable=void 0;var pc;(function(t){function e(n){return{dispose:n}}t.create=e})(pc=Tn.Disposable||(Tn.Disposable={}))});var qs=U(Qn=>{"use strict";Object.defineProperty(Qn,"__esModule",{value:!0});Qn.AbstractMessageBuffer=void 0;var gc=13,yc=10,bc=`\r
`,qi=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let n=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(n),this._totalLength+=n.byteLength}tryReadHeaders(){if(this._chunks.length===0)return;let e=0,n=0,r=0,i=0;e:for(;n<this._chunks.length;){let d=this._chunks[n];for(r=0;r<d.length;){switch(d[r]){case gc:switch(e){case 0:e=1;break;case 2:e=3;break;default:e=0}break;case yc:switch(e){case 1:e=2;break;case 3:e=4,r++;break e;default:e=0}break;default:e=0}r++}i+=d.byteLength,n++}if(e!==4)return;let o=this._read(i+r),u=new Map,l=this.toString(o,"ascii").split(bc);if(l.length<2)return u;for(let d=0;d<l.length-2;d++){let f=l[d],p=f.indexOf(":");if(p===-1)throw new Error("Message header must separate key and value using :");let v=f.substr(0,p),w=f.substr(p+1).trim();u.set(v,w)}return u}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let o=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(o)}if(this._chunks[0].byteLength>e){let o=this._chunks[0],u=this.asNative(o,e);return this._chunks[0]=o.slice(e),this._totalLength-=e,u}let n=this.allocNative(e),r=0,i=0;for(;e>0;){let o=this._chunks[i];if(o.byteLength>e){let u=o.slice(0,e);n.set(u,r),r+=e,this._chunks[i]=o.slice(e),this._totalLength-=e,e-=e}else n.set(o,r),r+=o.byteLength,this._chunks.shift(),this._totalLength-=o.byteLength,e-=o.byteLength}return n}};Qn.AbstractMessageBuffer=qi});var As=U(Li=>{"use strict";Object.defineProperty(Li,"__esModule",{value:!0});var vc=Et(),xs=require("util"),Ut=Fi(),wc=qs(),Xn=class t extends wc.AbstractMessageBuffer{constructor(e="utf-8"){super(e)}emptyBuffer(){return t.emptyBuffer}fromString(e,n){return Buffer.from(e,n)}toString(e,n){return e instanceof Buffer?e.toString(n):new xs.TextDecoder(n).decode(e)}asNative(e,n){return n===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,n):Buffer.from(e,0,n)}allocNative(e){return Buffer.allocUnsafe(e)}};Xn.emptyBuffer=Buffer.allocUnsafe(0);var xi=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),Ut.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),Ut.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),Ut.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),Ut.Disposable.create(()=>this.stream.off("data",e))}},Oi=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),Ut.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),Ut.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),Ut.Disposable.create(()=>this.stream.off("end",e))}write(e,n){return new Promise((r,i)=>{let o=u=>{u==null?r():i(u)};typeof e=="string"?this.stream.write(e,n,o):this.stream.write(e,o)})}end(){this.stream.end()}},Os=Object.freeze({messageBuffer:Object.freeze({create:t=>new Xn(t)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(t,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(t,void 0,0),e.charset))}catch(n){return Promise.reject(n)}}}),decoder:Object.freeze({name:"application/json",decode:(t,e)=>{try{return t instanceof Buffer?Promise.resolve(JSON.parse(t.toString(e.charset))):Promise.resolve(JSON.parse(new xs.TextDecoder(e.charset).decode(t)))}catch(n){return Promise.reject(n)}}})}),stream:Object.freeze({asReadableStream:t=>new xi(t),asWritableStream:t=>new Oi(t)}),console,timer:Object.freeze({setTimeout(t,e,...n){let r=setTimeout(t,e,...n);return{dispose:()=>clearTimeout(r)}},setImmediate(t,...e){let n=setImmediate(t,...e);return{dispose:()=>clearImmediate(n)}},setInterval(t,e,...n){let r=setInterval(t,e,...n);return{dispose:()=>clearInterval(r)}}})});function Ai(){return Os}(function(t){function e(){vc.default.install(Os)}t.install=e})(Ai||(Ai={}));Li.default=Ai});var tn=U(Oe=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0});Oe.stringArray=Oe.array=Oe.func=Oe.error=Oe.number=Oe.string=Oe.boolean=void 0;function Tc(t){return t===!0||t===!1}Oe.boolean=Tc;function Ls(t){return typeof t=="string"||t instanceof String}Oe.string=Ls;function Rc(t){return typeof t=="number"||t instanceof Number}Oe.number=Rc;function Ec(t){return t instanceof Error}Oe.error=Ec;function Dc(t){return typeof t=="function"}Oe.func=Dc;function js(t){return Array.isArray(t)}Oe.array=js;function Sc(t){return js(t)&&t.every(e=>Ls(e))}Oe.stringArray=Sc});var uo=U(B=>{"use strict";Object.defineProperty(B,"__esModule",{value:!0});B.Message=B.NotificationType9=B.NotificationType8=B.NotificationType7=B.NotificationType6=B.NotificationType5=B.NotificationType4=B.NotificationType3=B.NotificationType2=B.NotificationType1=B.NotificationType0=B.NotificationType=B.RequestType9=B.RequestType8=B.RequestType7=B.RequestType6=B.RequestType5=B.RequestType4=B.RequestType3=B.RequestType2=B.RequestType1=B.RequestType=B.RequestType0=B.AbstractMessageSignature=B.ParameterStructures=B.ResponseError=B.ErrorCodes=void 0;var Wt=tn(),Us;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.jsonrpcReservedErrorRangeStart=-32099,t.serverErrorStart=-32099,t.MessageWriteError=-32099,t.MessageReadError=-32098,t.PendingResponseRejected=-32097,t.ConnectionInactive=-32096,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.jsonrpcReservedErrorRangeEnd=-32e3,t.serverErrorEnd=-32e3})(Us=B.ErrorCodes||(B.ErrorCodes={}));var ji=class t extends Error{constructor(e,n,r){super(n),this.code=Wt.number(e)?e:Us.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,t.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};B.ResponseError=ji;var Ve=class t{constructor(e){this.kind=e}static is(e){return e===t.auto||e===t.byName||e===t.byPosition}toString(){return this.kind}};B.ParameterStructures=Ve;Ve.auto=new Ve("auto");Ve.byPosition=new Ve("byPosition");Ve.byName=new Ve("byName");var fe=class{constructor(e,n){this.method=e,this.numberOfParams=n}get parameterStructures(){return Ve.auto}};B.AbstractMessageSignature=fe;var Ui=class extends fe{constructor(e){super(e,0)}};B.RequestType0=Ui;var Wi=class extends fe{constructor(e,n=Ve.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};B.RequestType=Wi;var Hi=class extends fe{constructor(e,n=Ve.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};B.RequestType1=Hi;var Bi=class extends fe{constructor(e){super(e,2)}};B.RequestType2=Bi;var Vi=class extends fe{constructor(e){super(e,3)}};B.RequestType3=Vi;var zi=class extends fe{constructor(e){super(e,4)}};B.RequestType4=zi;var $i=class extends fe{constructor(e){super(e,5)}};B.RequestType5=$i;var Zi=class extends fe{constructor(e){super(e,6)}};B.RequestType6=Zi;var Gi=class extends fe{constructor(e){super(e,7)}};B.RequestType7=Gi;var Ki=class extends fe{constructor(e){super(e,8)}};B.RequestType8=Ki;var Ji=class extends fe{constructor(e){super(e,9)}};B.RequestType9=Ji;var Yi=class extends fe{constructor(e,n=Ve.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};B.NotificationType=Yi;var Qi=class extends fe{constructor(e){super(e,0)}};B.NotificationType0=Qi;var Xi=class extends fe{constructor(e,n=Ve.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};B.NotificationType1=Xi;var eo=class extends fe{constructor(e){super(e,2)}};B.NotificationType2=eo;var to=class extends fe{constructor(e){super(e,3)}};B.NotificationType3=to;var no=class extends fe{constructor(e){super(e,4)}};B.NotificationType4=no;var ro=class extends fe{constructor(e){super(e,5)}};B.NotificationType5=ro;var io=class extends fe{constructor(e){super(e,6)}};B.NotificationType6=io;var oo=class extends fe{constructor(e){super(e,7)}};B.NotificationType7=oo;var so=class extends fe{constructor(e){super(e,8)}};B.NotificationType8=so;var ao=class extends fe{constructor(e){super(e,9)}};B.NotificationType9=ao;var Pc;(function(t){function e(i){let o=i;return o&&Wt.string(o.method)&&(Wt.string(o.id)||Wt.number(o.id))}t.isRequest=e;function n(i){let o=i;return o&&Wt.string(o.method)&&i.id===void 0}t.isNotification=n;function r(i){let o=i;return o&&(o.result!==void 0||!!o.error)&&(Wt.string(o.id)||Wt.number(o.id)||o.id===null)}t.isResponse=r})(Pc=B.Message||(B.Message={}))});var lo=U(Dt=>{"use strict";var Ws;Object.defineProperty(Dt,"__esModule",{value:!0});Dt.LRUCache=Dt.LinkedMap=Dt.Touch=void 0;var je;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(je=Dt.Touch||(Dt.Touch={}));var er=class{constructor(){this[Ws]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)==null?void 0:e.value}get last(){var e;return(e=this._tail)==null?void 0:e.value}has(e){return this._map.has(e)}get(e,n=je.None){let r=this._map.get(e);if(r)return n!==je.None&&this.touch(r,n),r.value}set(e,n,r=je.None){let i=this._map.get(e);if(i)i.value=n,r!==je.None&&this.touch(i,r);else{switch(i={key:e,value:n,next:void 0,previous:void 0},r){case je.None:this.addItemLast(i);break;case je.First:this.addItemFirst(i);break;case je.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let n=this._map.get(e);if(n)return this._map.delete(e),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,n){let r=this._state,i=this._head;for(;i;){if(n?e.bind(n)(i.value,i.key,this):e(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.key,done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}values(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.value,done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}entries(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:[n.key,n.value],done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}[(Ws=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let n=this._head,r=this.size;for(;n&&r>e;)this._map.delete(n.key),n=n.next,r--;this._head=n,this._size=r,n&&(n.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let n=e.next,r=e.previous;if(!n||!r)throw new Error("Invalid list");n.previous=r,r.next=n}e.next=void 0,e.previous=void 0,this._state++}touch(e,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==je.First&&n!==je.Last)){if(n===je.First){if(e===this._head)return;let r=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(n===je.Last){if(e===this._tail)return;let r=e.next,i=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((n,r)=>{e.push([r,n])}),e}fromJSON(e){this.clear();for(let[n,r]of e)this.set(n,r)}};Dt.LinkedMap=er;var co=class extends er{constructor(e,n=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,n=je.AsNew){return super.get(e,n)}peek(e){return super.get(e,je.None)}set(e,n){return super.set(e,n,je.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};Dt.LRUCache=co});var nn=U(Ht=>{"use strict";Object.defineProperty(Ht,"__esModule",{value:!0});Ht.Emitter=Ht.Event=void 0;var Mc=Et(),Cc;(function(t){let e={dispose(){}};t.None=function(){return e}})(Cc=Ht.Event||(Ht.Event={}));var _o=class{add(e,n=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(n),Array.isArray(r)&&r.push({dispose:()=>this.remove(e,n)})}remove(e,n=null){if(!this._callbacks)return;let r=!1;for(let i=0,o=this._callbacks.length;i<o;i++)if(this._callbacks[i]===e)if(this._contexts[i]===n){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else r=!0;if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let n=[],r=this._callbacks.slice(0),i=this._contexts.slice(0);for(let o=0,u=r.length;o<u;o++)try{n.push(r[o].apply(i[o],e))}catch(l){(0,Mc.default)().console.error(l)}return n}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},tr=class t{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,n,r)=>{this._callbacks||(this._callbacks=new _o),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,n);let i={dispose:()=>{this._callbacks&&(this._callbacks.remove(e,n),i.dispose=t._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(r)&&r.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};Ht.Emitter=tr;tr._noop=function(){}});var po=U(Bt=>{"use strict";Object.defineProperty(Bt,"__esModule",{value:!0});Bt.CancellationTokenSource=Bt.CancellationToken=void 0;var Nc=Et(),Ic=tn(),fo=nn(),mo;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:fo.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:fo.Event.None});function e(n){let r=n;return r&&(r===t.None||r===t.Cancelled||Ic.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}t.is=e})(mo=Bt.CancellationToken||(Bt.CancellationToken={}));var kc=Object.freeze(function(t,e){let n=(0,Nc.default)().timer.setTimeout(t.bind(e),0);return{dispose(){n.dispose()}}}),nr=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?kc:(this._emitter||(this._emitter=new fo.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},ho=class{get token(){return this._token||(this._token=new nr),this._token}cancel(){this._token?this._token.cancel():this._token=mo.Cancelled}dispose(){this._token?this._token instanceof nr&&this._token.dispose():this._token=mo.None}};Bt.CancellationTokenSource=ho});var Hs=U(St=>{"use strict";Object.defineProperty(St,"__esModule",{value:!0});St.ReadableStreamMessageReader=St.AbstractMessageReader=St.MessageReader=void 0;var yo=Et(),rn=tn(),go=nn(),Fc;(function(t){function e(n){let r=n;return r&&rn.func(r.listen)&&rn.func(r.dispose)&&rn.func(r.onError)&&rn.func(r.onClose)&&rn.func(r.onPartialMessage)}t.is=e})(Fc=St.MessageReader||(St.MessageReader={}));var rr=class{constructor(){this.errorEmitter=new go.Emitter,this.closeEmitter=new go.Emitter,this.partialMessageEmitter=new go.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${rn.string(e.message)?e.message:"unknown"}`)}};St.AbstractMessageReader=rr;var bo;(function(t){function e(n){let r,i,o,u=new Map,l,d=new Map;if(n===void 0||typeof n=="string")r=n??"utf-8";else{if(r=n.charset??"utf-8",n.contentDecoder!==void 0&&(o=n.contentDecoder,u.set(o.name,o)),n.contentDecoders!==void 0)for(let f of n.contentDecoders)u.set(f.name,f);if(n.contentTypeDecoder!==void 0&&(l=n.contentTypeDecoder,d.set(l.name,l)),n.contentTypeDecoders!==void 0)for(let f of n.contentTypeDecoders)d.set(f.name,f)}return l===void 0&&(l=(0,yo.default)().applicationJson.decoder,d.set(l.name,l)),{charset:r,contentDecoder:o,contentDecoders:u,contentTypeDecoder:l,contentTypeDecoders:d}}t.fromOptions=e})(bo||(bo={}));var vo=class extends rr{constructor(e,n){super(),this.readable=e,this.options=bo.fromOptions(n),this.buffer=(0,yo.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let n=this.readable.onData(r=>{this.onData(r)});return this.readable.onError(r=>this.fireError(r)),this.readable.onClose(()=>this.fireClose()),n}onData(e){for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let i=this.buffer.tryReadHeaders();if(!i)return;let o=i.get("Content-Length");if(!o)throw new Error("Header must provide a Content-Length property.");let u=parseInt(o);if(isNaN(u))throw new Error("Content-Length value must be a number.");this.nextMessageLength=u}let n=this.buffer.tryReadBody(this.nextMessageLength);if(n===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1;let r;this.options.contentDecoder!==void 0?r=this.options.contentDecoder.decode(n):r=Promise.resolve(n),r.then(i=>{this.options.contentTypeDecoder.decode(i,this.options).then(o=>{this.callback(o)},o=>{this.fireError(o)})},i=>{this.fireError(i)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,yo.default)().timer.setTimeout((e,n)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:n}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};St.ReadableStreamMessageReader=vo});var Bs=U(ir=>{"use strict";Object.defineProperty(ir,"__esModule",{value:!0});ir.Semaphore=void 0;var qc=Et(),wo=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((n,r)=>{this._waiting.push({thunk:e,resolve:n,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,qc.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let n=e.thunk();n instanceof Promise?n.then(r=>{this._active--,e.resolve(r),this.runNext()},r=>{this._active--,e.reject(r),this.runNext()}):(this._active--,e.resolve(n),this.runNext())}catch(n){this._active--,e.reject(n),this.runNext()}}};ir.Semaphore=wo});var Zs=U(Pt=>{"use strict";Object.defineProperty(Pt,"__esModule",{value:!0});Pt.WriteableStreamMessageWriter=Pt.AbstractMessageWriter=Pt.MessageWriter=void 0;var Vs=Et(),Rn=tn(),xc=Bs(),zs=nn(),Oc="Content-Length: ",$s=`\r
`,Ac;(function(t){function e(n){let r=n;return r&&Rn.func(r.dispose)&&Rn.func(r.onClose)&&Rn.func(r.onError)&&Rn.func(r.write)}t.is=e})(Ac=Pt.MessageWriter||(Pt.MessageWriter={}));var or=class{constructor(){this.errorEmitter=new zs.Emitter,this.closeEmitter=new zs.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,n,r){this.errorEmitter.fire([this.asError(e),n,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${Rn.string(e.message)?e.message:"unknown"}`)}};Pt.AbstractMessageWriter=or;var To;(function(t){function e(n){return n===void 0||typeof n=="string"?{charset:n??"utf-8",contentTypeEncoder:(0,Vs.default)().applicationJson.encoder}:{charset:n.charset??"utf-8",contentEncoder:n.contentEncoder,contentTypeEncoder:n.contentTypeEncoder??(0,Vs.default)().applicationJson.encoder}}t.fromOptions=e})(To||(To={}));var Ro=class extends or{constructor(e,n){super(),this.writable=e,this.options=To.fromOptions(n),this.errorCount=0,this.writeSemaphore=new xc.Semaphore(1),this.writable.onError(r=>this.fireError(r)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(r=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(r):r).then(r=>{let i=[];return i.push(Oc,r.byteLength.toString(),$s),i.push($s),this.doWrite(e,i,r)},r=>{throw this.fireError(r),r}))}async doWrite(e,n,r){try{return await this.writable.write(n.join(""),"ascii"),this.writable.write(r)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){this.writable.end()}};Pt.WriteableStreamMessageWriter=Ro});var Xs=U(z=>{"use strict";Object.defineProperty(z,"__esModule",{value:!0});z.createMessageConnection=z.ConnectionOptions=z.CancellationStrategy=z.CancellationSenderStrategy=z.CancellationReceiverStrategy=z.ConnectionStrategy=z.ConnectionError=z.ConnectionErrors=z.LogTraceNotification=z.SetTraceNotification=z.TraceFormat=z.TraceValues=z.Trace=z.NullLogger=z.ProgressType=z.ProgressToken=void 0;var Gs=Et(),Pe=tn(),$=uo(),Ks=lo(),En=nn(),Eo=po(),Sn;(function(t){t.type=new $.NotificationType("$/cancelRequest")})(Sn||(Sn={}));var Js;(function(t){function e(n){return typeof n=="string"||typeof n=="number"}t.is=e})(Js=z.ProgressToken||(z.ProgressToken={}));var Dn;(function(t){t.type=new $.NotificationType("$/progress")})(Dn||(Dn={}));var Do=class{constructor(){}};z.ProgressType=Do;var So;(function(t){function e(n){return Pe.func(n)}t.is=e})(So||(So={}));z.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var se;(function(t){t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Compact=2]="Compact",t[t.Verbose=3]="Verbose"})(se=z.Trace||(z.Trace={}));var Lc;(function(t){t.Off="off",t.Messages="messages",t.Compact="compact",t.Verbose="verbose"})(Lc=z.TraceValues||(z.TraceValues={}));(function(t){function e(r){if(!Pe.string(r))return t.Off;switch(r=r.toLowerCase(),r){case"off":return t.Off;case"messages":return t.Messages;case"compact":return t.Compact;case"verbose":return t.Verbose;default:return t.Off}}t.fromString=e;function n(r){switch(r){case t.Off:return"off";case t.Messages:return"messages";case t.Compact:return"compact";case t.Verbose:return"verbose";default:return"off"}}t.toString=n})(se=z.Trace||(z.Trace={}));var ut;(function(t){t.Text="text",t.JSON="json"})(ut=z.TraceFormat||(z.TraceFormat={}));(function(t){function e(n){return Pe.string(n)?(n=n.toLowerCase(),n==="json"?t.JSON:t.Text):t.Text}t.fromString=e})(ut=z.TraceFormat||(z.TraceFormat={}));var Ys;(function(t){t.type=new $.NotificationType("$/setTrace")})(Ys=z.SetTraceNotification||(z.SetTraceNotification={}));var Po;(function(t){t.type=new $.NotificationType("$/logTrace")})(Po=z.LogTraceNotification||(z.LogTraceNotification={}));var sr;(function(t){t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening"})(sr=z.ConnectionErrors||(z.ConnectionErrors={}));var on=class t extends Error{constructor(e,n){super(n),this.code=e,Object.setPrototypeOf(this,t.prototype)}};z.ConnectionError=on;var Qs;(function(t){function e(n){let r=n;return r&&Pe.func(r.cancelUndispatched)}t.is=e})(Qs=z.ConnectionStrategy||(z.ConnectionStrategy={}));var Mo;(function(t){t.Message=Object.freeze({createCancellationTokenSource(n){return new Eo.CancellationTokenSource}});function e(n){let r=n;return r&&Pe.func(r.createCancellationTokenSource)}t.is=e})(Mo=z.CancellationReceiverStrategy||(z.CancellationReceiverStrategy={}));var Co;(function(t){t.Message=Object.freeze({sendCancellation(n,r){return n.sendNotification(Sn.type,{id:r})},cleanup(n){}});function e(n){let r=n;return r&&Pe.func(r.sendCancellation)&&Pe.func(r.cleanup)}t.is=e})(Co=z.CancellationSenderStrategy||(z.CancellationSenderStrategy={}));var No;(function(t){t.Message=Object.freeze({receiver:Mo.Message,sender:Co.Message});function e(n){let r=n;return r&&Mo.is(r.receiver)&&Co.is(r.sender)}t.is=e})(No=z.CancellationStrategy||(z.CancellationStrategy={}));var jc;(function(t){function e(n){let r=n;return r&&(No.is(r.cancellationStrategy)||Qs.is(r.connectionStrategy))}t.is=e})(jc=z.ConnectionOptions||(z.ConnectionOptions={}));var ct;(function(t){t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed"})(ct||(ct={}));function Uc(t,e,n,r){let i=n!==void 0?n:z.NullLogger,o=0,u=0,l=0,d="2.0",f,p=new Map,v,w=new Map,D=new Map,S,T=new Ks.LinkedMap,q=new Map,k=new Set,m=new Map,b=se.Off,I=ut.Text,V,re=ct.New,oe=new En.Emitter,ve=new En.Emitter,Je=new En.Emitter,Ye=new En.Emitter,Be=new En.Emitter,me=r&&r.cancellationStrategy?r.cancellationStrategy:No.Message;function x(h){if(h===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+h.toString()}function F(h){return h===null?"res-unknown-"+(++l).toString():"res-"+h.toString()}function A(){return"not-"+(++u).toString()}function W(h,N){$.Message.isRequest(N)?h.set(x(N.id),N):$.Message.isResponse(N)?h.set(F(N.id),N):h.set(A(),N)}function J(h){}function X(){return re===ct.Listening}function Z(){return re===ct.Closed}function De(){return re===ct.Disposed}function Ce(){(re===ct.New||re===ct.Listening)&&(re=ct.Closed,ve.fire(void 0))}function qe(h){oe.fire([h,void 0,void 0])}function Ct(h){oe.fire(h)}t.onClose(Ce),t.onError(qe),e.onClose(Ce),e.onError(Ct);function ot(){S||T.size===0||(S=(0,Gs.default)().timer.setImmediate(()=>{S=void 0,yi()}))}function yi(){if(T.size===0)return;let h=T.shift();try{$.Message.isRequest(h)?vi(h):$.Message.isNotification(h)?Ti(h):$.Message.isResponse(h)?wi(h):Ri(h)}finally{ot()}}let bi=h=>{try{if($.Message.isNotification(h)&&h.method===Sn.type.method){let N=h.params.id,L=x(N),H=T.get(L);if($.Message.isRequest(H)){let ce=r==null?void 0:r.connectionStrategy,ae=ce&&ce.cancelUndispatched?ce.cancelUndispatched(H,J):void 0;if(ae&&(ae.error!==void 0||ae.result!==void 0)){T.delete(L),m.delete(N),ae.id=H.id,Qt(ae,h.method,Date.now()),e.write(ae).catch(()=>i.error("Sending response for canceled message failed."));return}}let ue=m.get(N);if(ue!==void 0){ue.cancel(),vn(h);return}else k.add(N)}W(T,h)}finally{ot()}};function vi(h){if(De())return;function N(Y,le,te){let be={jsonrpc:d,id:h.id};Y instanceof $.ResponseError?be.error=Y.toJson():be.result=Y===void 0?null:Y,Qt(be,le,te),e.write(be).catch(()=>i.error("Sending response failed."))}function L(Y,le,te){let be={jsonrpc:d,id:h.id,error:Y.toJson()};Qt(be,le,te),e.write(be).catch(()=>i.error("Sending response failed."))}function H(Y,le,te){Y===void 0&&(Y=null);let be={jsonrpc:d,id:h.id,result:Y};Qt(be,le,te),e.write(be).catch(()=>i.error("Sending response failed."))}Si(h);let ue=p.get(h.method),ce,ae;ue&&(ce=ue.type,ae=ue.handler);let we=Date.now();if(ae||f){let Y=h.id??String(Date.now()),le=me.receiver.createCancellationTokenSource(Y);h.id!==null&&k.has(h.id)&&le.cancel(),h.id!==null&&m.set(Y,le);try{let te;if(ae)if(h.params===void 0){if(ce!==void 0&&ce.numberOfParams!==0){L(new $.ResponseError($.ErrorCodes.InvalidParams,`Request ${h.method} defines ${ce.numberOfParams} params but received none.`),h.method,we);return}te=ae(le.token)}else if(Array.isArray(h.params)){if(ce!==void 0&&ce.parameterStructures===$.ParameterStructures.byName){L(new $.ResponseError($.ErrorCodes.InvalidParams,`Request ${h.method} defines parameters by name but received parameters by position`),h.method,we);return}te=ae(...h.params,le.token)}else{if(ce!==void 0&&ce.parameterStructures===$.ParameterStructures.byPosition){L(new $.ResponseError($.ErrorCodes.InvalidParams,`Request ${h.method} defines parameters by position but received parameters by name`),h.method,we);return}te=ae(h.params,le.token)}else f&&(te=f(h.method,h.params,le.token));let be=te;te?be.then?be.then(xe=>{m.delete(Y),N(xe,h.method,we)},xe=>{m.delete(Y),xe instanceof $.ResponseError?L(xe,h.method,we):xe&&Pe.string(xe.message)?L(new $.ResponseError($.ErrorCodes.InternalError,`Request ${h.method} failed with message: ${xe.message}`),h.method,we):L(new $.ResponseError($.ErrorCodes.InternalError,`Request ${h.method} failed unexpectedly without providing any details.`),h.method,we)}):(m.delete(Y),N(te,h.method,we)):(m.delete(Y),H(te,h.method,we))}catch(te){m.delete(Y),te instanceof $.ResponseError?N(te,h.method,we):te&&Pe.string(te.message)?L(new $.ResponseError($.ErrorCodes.InternalError,`Request ${h.method} failed with message: ${te.message}`),h.method,we):L(new $.ResponseError($.ErrorCodes.InternalError,`Request ${h.method} failed unexpectedly without providing any details.`),h.method,we)}}else L(new $.ResponseError($.ErrorCodes.MethodNotFound,`Unhandled method ${h.method}`),h.method,we)}function wi(h){if(!De())if(h.id===null)h.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(h.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let N=h.id,L=q.get(N);if(Pi(h,L),L!==void 0){q.delete(N);try{if(h.error){let H=h.error;L.reject(new $.ResponseError(H.code,H.message,H.data))}else if(h.result!==void 0)L.resolve(h.result);else throw new Error("Should never happen.")}catch(H){H.message?i.error(`Response handler '${L.method}' failed with message: ${H.message}`):i.error(`Response handler '${L.method}' failed unexpectedly.`)}}}}function Ti(h){if(De())return;let N,L;if(h.method===Sn.type.method){let H=h.params.id;k.delete(H),vn(h);return}else{let H=w.get(h.method);H&&(L=H.handler,N=H.type)}if(L||v)try{if(vn(h),L)if(h.params===void 0)N!==void 0&&N.numberOfParams!==0&&N.parameterStructures!==$.ParameterStructures.byName&&i.error(`Notification ${h.method} defines ${N.numberOfParams} params but received none.`),L();else if(Array.isArray(h.params)){let H=h.params;h.method===Dn.type.method&&H.length===2&&Js.is(H[0])?L({token:H[0],value:H[1]}):(N!==void 0&&(N.parameterStructures===$.ParameterStructures.byName&&i.error(`Notification ${h.method} defines parameters by name but received parameters by position`),N.numberOfParams!==h.params.length&&i.error(`Notification ${h.method} defines ${N.numberOfParams} params but received ${H.length} arguments`)),L(...H))}else N!==void 0&&N.parameterStructures===$.ParameterStructures.byPosition&&i.error(`Notification ${h.method} defines parameters by position but received parameters by name`),L(h.params);else v&&v(h.method,h.params)}catch(H){H.message?i.error(`Notification handler '${h.method}' failed with message: ${H.message}`):i.error(`Notification handler '${h.method}' failed unexpectedly.`)}else Je.fire(h)}function Ri(h){if(!h){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(h,null,4)}`);let N=h;if(Pe.string(N.id)||Pe.number(N.id)){let L=N.id,H=q.get(L);H&&H.reject(new Error("The received response has neither a result nor an error property."))}}function Qe(h){if(h!=null)switch(b){case se.Verbose:return JSON.stringify(h,null,4);case se.Compact:return JSON.stringify(h);default:return}}function Ei(h){if(!(b===se.Off||!V))if(I===ut.Text){let N;(b===se.Verbose||b===se.Compact)&&h.params&&(N=`Params: ${Qe(h.params)}

`),V.log(`Sending request '${h.method} - (${h.id})'.`,N)}else Nt("send-request",h)}function Di(h){if(!(b===se.Off||!V))if(I===ut.Text){let N;(b===se.Verbose||b===se.Compact)&&(h.params?N=`Params: ${Qe(h.params)}

`:N=`No parameters provided.

`),V.log(`Sending notification '${h.method}'.`,N)}else Nt("send-notification",h)}function Qt(h,N,L){if(!(b===se.Off||!V))if(I===ut.Text){let H;(b===se.Verbose||b===se.Compact)&&(h.error&&h.error.data?H=`Error data: ${Qe(h.error.data)}

`:h.result?H=`Result: ${Qe(h.result)}

`:h.error===void 0&&(H=`No result returned.

`)),V.log(`Sending response '${N} - (${h.id})'. Processing request took ${Date.now()-L}ms`,H)}else Nt("send-response",h)}function Si(h){if(!(b===se.Off||!V))if(I===ut.Text){let N;(b===se.Verbose||b===se.Compact)&&h.params&&(N=`Params: ${Qe(h.params)}

`),V.log(`Received request '${h.method} - (${h.id})'.`,N)}else Nt("receive-request",h)}function vn(h){if(!(b===se.Off||!V||h.method===Po.type.method))if(I===ut.Text){let N;(b===se.Verbose||b===se.Compact)&&(h.params?N=`Params: ${Qe(h.params)}

`:N=`No parameters provided.

`),V.log(`Received notification '${h.method}'.`,N)}else Nt("receive-notification",h)}function Pi(h,N){if(!(b===se.Off||!V))if(I===ut.Text){let L;if((b===se.Verbose||b===se.Compact)&&(h.error&&h.error.data?L=`Error data: ${Qe(h.error.data)}

`:h.result?L=`Result: ${Qe(h.result)}

`:h.error===void 0&&(L=`No result returned.

`)),N){let H=h.error?` Request failed: ${h.error.message} (${h.error.code}).`:"";V.log(`Received response '${N.method} - (${h.id})' in ${Date.now()-N.timerStart}ms.${H}`,L)}else V.log(`Received response ${h.id} without active response promise.`,L)}else Nt("receive-response",h)}function Nt(h,N){if(!V||b===se.Off)return;let L={isLSPMessage:!0,type:h,message:N,timestamp:Date.now()};V.log(L)}function Lt(){if(Z())throw new on(sr.Closed,"Connection is closed.");if(De())throw new on(sr.Disposed,"Connection is disposed.")}function Mi(){if(X())throw new on(sr.AlreadyListening,"Connection is already listening")}function Ci(){if(!X())throw new Error("Call listen() first.")}function jt(h){return h===void 0?null:h}function Xt(h){if(h!==null)return h}function Gn(h){return h!=null&&!Array.isArray(h)&&typeof h=="object"}function wn(h,N){switch(h){case $.ParameterStructures.auto:return Gn(N)?Xt(N):[jt(N)];case $.ParameterStructures.byName:if(!Gn(N))throw new Error("Received parameters by name but param is not an object literal.");return Xt(N);case $.ParameterStructures.byPosition:return[jt(N)];default:throw new Error(`Unknown parameter structure ${h.toString()}`)}}function Kn(h,N){let L,H=h.numberOfParams;switch(H){case 0:L=void 0;break;case 1:L=wn(h.parameterStructures,N[0]);break;default:L=[];for(let ue=0;ue<N.length&&ue<H;ue++)L.push(jt(N[ue]));if(N.length<H)for(let ue=N.length;ue<H;ue++)L.push(null);break}return L}let It={sendNotification:(h,...N)=>{Lt();let L,H;if(Pe.string(h)){L=h;let ce=N[0],ae=0,we=$.ParameterStructures.auto;$.ParameterStructures.is(ce)&&(ae=1,we=ce);let Y=N.length,le=Y-ae;switch(le){case 0:H=void 0;break;case 1:H=wn(we,N[ae]);break;default:if(we===$.ParameterStructures.byName)throw new Error(`Received ${le} parameters for 'by Name' notification parameter structure.`);H=N.slice(ae,Y).map(te=>jt(te));break}}else{let ce=N;L=h.method,H=Kn(h,ce)}let ue={jsonrpc:d,method:L,params:H};return Di(ue),e.write(ue).catch(()=>i.error("Sending notification failed."))},onNotification:(h,N)=>{Lt();let L;return Pe.func(h)?v=h:N&&(Pe.string(h)?(L=h,w.set(h,{type:void 0,handler:N})):(L=h.method,w.set(h.method,{type:h,handler:N}))),{dispose:()=>{L!==void 0?w.delete(L):v=void 0}}},onProgress:(h,N,L)=>{if(D.has(N))throw new Error(`Progress handler for token ${N} already registered`);return D.set(N,L),{dispose:()=>{D.delete(N)}}},sendProgress:(h,N,L)=>It.sendNotification(Dn.type,{token:N,value:L}),onUnhandledProgress:Ye.event,sendRequest:(h,...N)=>{Lt(),Ci();let L,H,ue;if(Pe.string(h)){L=h;let Y=N[0],le=N[N.length-1],te=0,be=$.ParameterStructures.auto;$.ParameterStructures.is(Y)&&(te=1,be=Y);let xe=N.length;Eo.CancellationToken.is(le)&&(xe=xe-1,ue=le);let Tt=xe-te;switch(Tt){case 0:H=void 0;break;case 1:H=wn(be,N[te]);break;default:if(be===$.ParameterStructures.byName)throw new Error(`Received ${Tt} parameters for 'by Name' request parameter structure.`);H=N.slice(te,xe).map(gt=>jt(gt));break}}else{let Y=N;L=h.method,H=Kn(h,Y);let le=h.numberOfParams;ue=Eo.CancellationToken.is(Y[le])?Y[le]:void 0}let ce=o++,ae;return ue&&(ae=ue.onCancellationRequested(()=>{let Y=me.sender.sendCancellation(It,ce);return Y===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${ce}`),Promise.resolve()):Y.catch(()=>{i.log(`Sending cancellation messages for id ${ce} failed`)})})),new Promise((Y,le)=>{let te={jsonrpc:d,id:ce,method:L,params:H},be=gt=>{Y(gt),me.sender.cleanup(ce),ae==null||ae.dispose()},xe=gt=>{le(gt),me.sender.cleanup(ce),ae==null||ae.dispose()},Tt={method:L,timerStart:Date.now(),resolve:be,reject:xe};Ei(te);try{e.write(te).catch(()=>i.error("Sending request failed."))}catch(gt){Tt.reject(new $.ResponseError($.ErrorCodes.MessageWriteError,gt.message?gt.message:"Unknown reason")),Tt=null}Tt&&q.set(ce,Tt)})},onRequest:(h,N)=>{Lt();let L=null;return So.is(h)?(L=void 0,f=h):Pe.string(h)?(L=null,N!==void 0&&(L=h,p.set(h,{handler:N,type:void 0}))):N!==void 0&&(L=h.method,p.set(h.method,{type:h,handler:N})),{dispose:()=>{L!==null&&(L!==void 0?p.delete(L):f=void 0)}}},hasPendingResponse:()=>q.size>0,trace:async(h,N,L)=>{let H=!1,ue=ut.Text;L!==void 0&&(Pe.boolean(L)?H=L:(H=L.sendNotification||!1,ue=L.traceFormat||ut.Text)),b=h,I=ue,b===se.Off?V=void 0:V=N,H&&!Z()&&!De()&&await It.sendNotification(Ys.type,{value:se.toString(h)})},onError:oe.event,onClose:ve.event,onUnhandledNotification:Je.event,onDispose:Be.event,end:()=>{e.end()},dispose:()=>{if(De())return;re=ct.Disposed,Be.fire(void 0);let h=new $.ResponseError($.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let N of q.values())N.reject(h);q=new Map,m=new Map,k=new Set,T=new Ks.LinkedMap,Pe.func(e.dispose)&&e.dispose(),Pe.func(t.dispose)&&t.dispose()},listen:()=>{Lt(),Mi(),re=ct.Listening,t.listen(bi)},inspect:()=>{(0,Gs.default)().console.log("inspect")}};return It.onNotification(Po.type,h=>{if(b===se.Off||!V)return;let N=b===se.Verbose||b===se.Compact;V.log(h.message,N?h.verbose:void 0)}),It.onNotification(Dn.type,h=>{let N=D.get(h.token);N?N(h.value):Ye.fire(h)}),It}z.createMessageConnection=Uc});var qo=U(P=>{"use strict";Object.defineProperty(P,"__esModule",{value:!0});P.TraceFormat=P.TraceValues=P.Trace=P.ProgressType=P.ProgressToken=P.createMessageConnection=P.NullLogger=P.ConnectionOptions=P.ConnectionStrategy=P.WriteableStreamMessageWriter=P.AbstractMessageWriter=P.MessageWriter=P.ReadableStreamMessageReader=P.AbstractMessageReader=P.MessageReader=P.CancellationToken=P.CancellationTokenSource=P.Emitter=P.Event=P.Disposable=P.LRUCache=P.Touch=P.LinkedMap=P.ParameterStructures=P.NotificationType9=P.NotificationType8=P.NotificationType7=P.NotificationType6=P.NotificationType5=P.NotificationType4=P.NotificationType3=P.NotificationType2=P.NotificationType1=P.NotificationType0=P.NotificationType=P.ErrorCodes=P.ResponseError=P.RequestType9=P.RequestType8=P.RequestType7=P.RequestType6=P.RequestType5=P.RequestType4=P.RequestType3=P.RequestType2=P.RequestType1=P.RequestType0=P.RequestType=P.Message=P.RAL=void 0;P.CancellationStrategy=P.CancellationSenderStrategy=P.CancellationReceiverStrategy=P.ConnectionError=P.ConnectionErrors=P.LogTraceNotification=P.SetTraceNotification=void 0;var _e=uo();Object.defineProperty(P,"Message",{enumerable:!0,get:function(){return _e.Message}});Object.defineProperty(P,"RequestType",{enumerable:!0,get:function(){return _e.RequestType}});Object.defineProperty(P,"RequestType0",{enumerable:!0,get:function(){return _e.RequestType0}});Object.defineProperty(P,"RequestType1",{enumerable:!0,get:function(){return _e.RequestType1}});Object.defineProperty(P,"RequestType2",{enumerable:!0,get:function(){return _e.RequestType2}});Object.defineProperty(P,"RequestType3",{enumerable:!0,get:function(){return _e.RequestType3}});Object.defineProperty(P,"RequestType4",{enumerable:!0,get:function(){return _e.RequestType4}});Object.defineProperty(P,"RequestType5",{enumerable:!0,get:function(){return _e.RequestType5}});Object.defineProperty(P,"RequestType6",{enumerable:!0,get:function(){return _e.RequestType6}});Object.defineProperty(P,"RequestType7",{enumerable:!0,get:function(){return _e.RequestType7}});Object.defineProperty(P,"RequestType8",{enumerable:!0,get:function(){return _e.RequestType8}});Object.defineProperty(P,"RequestType9",{enumerable:!0,get:function(){return _e.RequestType9}});Object.defineProperty(P,"ResponseError",{enumerable:!0,get:function(){return _e.ResponseError}});Object.defineProperty(P,"ErrorCodes",{enumerable:!0,get:function(){return _e.ErrorCodes}});Object.defineProperty(P,"NotificationType",{enumerable:!0,get:function(){return _e.NotificationType}});Object.defineProperty(P,"NotificationType0",{enumerable:!0,get:function(){return _e.NotificationType0}});Object.defineProperty(P,"NotificationType1",{enumerable:!0,get:function(){return _e.NotificationType1}});Object.defineProperty(P,"NotificationType2",{enumerable:!0,get:function(){return _e.NotificationType2}});Object.defineProperty(P,"NotificationType3",{enumerable:!0,get:function(){return _e.NotificationType3}});Object.defineProperty(P,"NotificationType4",{enumerable:!0,get:function(){return _e.NotificationType4}});Object.defineProperty(P,"NotificationType5",{enumerable:!0,get:function(){return _e.NotificationType5}});Object.defineProperty(P,"NotificationType6",{enumerable:!0,get:function(){return _e.NotificationType6}});Object.defineProperty(P,"NotificationType7",{enumerable:!0,get:function(){return _e.NotificationType7}});Object.defineProperty(P,"NotificationType8",{enumerable:!0,get:function(){return _e.NotificationType8}});Object.defineProperty(P,"NotificationType9",{enumerable:!0,get:function(){return _e.NotificationType9}});Object.defineProperty(P,"ParameterStructures",{enumerable:!0,get:function(){return _e.ParameterStructures}});var Io=lo();Object.defineProperty(P,"LinkedMap",{enumerable:!0,get:function(){return Io.LinkedMap}});Object.defineProperty(P,"LRUCache",{enumerable:!0,get:function(){return Io.LRUCache}});Object.defineProperty(P,"Touch",{enumerable:!0,get:function(){return Io.Touch}});var Wc=Fi();Object.defineProperty(P,"Disposable",{enumerable:!0,get:function(){return Wc.Disposable}});var ea=nn();Object.defineProperty(P,"Event",{enumerable:!0,get:function(){return ea.Event}});Object.defineProperty(P,"Emitter",{enumerable:!0,get:function(){return ea.Emitter}});var ta=po();Object.defineProperty(P,"CancellationTokenSource",{enumerable:!0,get:function(){return ta.CancellationTokenSource}});Object.defineProperty(P,"CancellationToken",{enumerable:!0,get:function(){return ta.CancellationToken}});var ko=Hs();Object.defineProperty(P,"MessageReader",{enumerable:!0,get:function(){return ko.MessageReader}});Object.defineProperty(P,"AbstractMessageReader",{enumerable:!0,get:function(){return ko.AbstractMessageReader}});Object.defineProperty(P,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return ko.ReadableStreamMessageReader}});var Fo=Zs();Object.defineProperty(P,"MessageWriter",{enumerable:!0,get:function(){return Fo.MessageWriter}});Object.defineProperty(P,"AbstractMessageWriter",{enumerable:!0,get:function(){return Fo.AbstractMessageWriter}});Object.defineProperty(P,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return Fo.WriteableStreamMessageWriter}});var Ae=Xs();Object.defineProperty(P,"ConnectionStrategy",{enumerable:!0,get:function(){return Ae.ConnectionStrategy}});Object.defineProperty(P,"ConnectionOptions",{enumerable:!0,get:function(){return Ae.ConnectionOptions}});Object.defineProperty(P,"NullLogger",{enumerable:!0,get:function(){return Ae.NullLogger}});Object.defineProperty(P,"createMessageConnection",{enumerable:!0,get:function(){return Ae.createMessageConnection}});Object.defineProperty(P,"ProgressToken",{enumerable:!0,get:function(){return Ae.ProgressToken}});Object.defineProperty(P,"ProgressType",{enumerable:!0,get:function(){return Ae.ProgressType}});Object.defineProperty(P,"Trace",{enumerable:!0,get:function(){return Ae.Trace}});Object.defineProperty(P,"TraceValues",{enumerable:!0,get:function(){return Ae.TraceValues}});Object.defineProperty(P,"TraceFormat",{enumerable:!0,get:function(){return Ae.TraceFormat}});Object.defineProperty(P,"SetTraceNotification",{enumerable:!0,get:function(){return Ae.SetTraceNotification}});Object.defineProperty(P,"LogTraceNotification",{enumerable:!0,get:function(){return Ae.LogTraceNotification}});Object.defineProperty(P,"ConnectionErrors",{enumerable:!0,get:function(){return Ae.ConnectionErrors}});Object.defineProperty(P,"ConnectionError",{enumerable:!0,get:function(){return Ae.ConnectionError}});Object.defineProperty(P,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return Ae.CancellationReceiverStrategy}});Object.defineProperty(P,"CancellationSenderStrategy",{enumerable:!0,get:function(){return Ae.CancellationSenderStrategy}});Object.defineProperty(P,"CancellationStrategy",{enumerable:!0,get:function(){return Ae.CancellationStrategy}});var Hc=Et();P.RAL=Hc.default});var $t=U(ie=>{"use strict";var Bc=ie&&ie.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Vc=ie&&ie.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Bc(e,t,n)};Object.defineProperty(ie,"__esModule",{value:!0});ie.createMessageConnection=ie.createServerSocketTransport=ie.createClientSocketTransport=ie.createServerPipeTransport=ie.createClientPipeTransport=ie.generateRandomPipeName=ie.StreamMessageWriter=ie.StreamMessageReader=ie.SocketMessageWriter=ie.SocketMessageReader=ie.IPCMessageWriter=ie.IPCMessageReader=void 0;var sn=As();sn.default.install();var yt=qo(),na=require("path"),zc=require("os"),$c=require("crypto"),cr=require("net");Vc(qo(),ie);var xo=class extends yt.AbstractMessageReader{constructor(e){super(),this.process=e;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),yt.Disposable.create(()=>this.process.off("message",e))}};ie.IPCMessageReader=xo;var Oo=class extends yt.AbstractMessageWriter{constructor(e){super(),this.process=e,this.errorCount=0;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,n=>{n?(this.errorCount++,this.handleError(n,e)):this.errorCount=0}),Promise.resolve()}catch(n){return this.handleError(n,e),Promise.reject(n)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){}};ie.IPCMessageWriter=Oo;var Vt=class extends yt.ReadableStreamMessageReader{constructor(e,n="utf-8"){super((0,sn.default)().stream.asReadableStream(e),n)}};ie.SocketMessageReader=Vt;var zt=class extends yt.WriteableStreamMessageWriter{constructor(e,n){super((0,sn.default)().stream.asWritableStream(e),n),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};ie.SocketMessageWriter=zt;var ar=class extends yt.ReadableStreamMessageReader{constructor(e,n){super((0,sn.default)().stream.asReadableStream(e),n)}};ie.StreamMessageReader=ar;var ur=class extends yt.WriteableStreamMessageWriter{constructor(e,n){super((0,sn.default)().stream.asWritableStream(e),n)}};ie.StreamMessageWriter=ur;var ra=process.env.XDG_RUNTIME_DIR,Zc=new Map([["linux",107],["darwin",103]]);function Gc(){let t=(0,$c.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`;let e;ra?e=na.join(ra,`vscode-ipc-${t}.sock`):e=na.join(zc.tmpdir(),`vscode-${t}.sock`);let n=Zc.get(process.platform);return n!==void 0&&e.length>=n&&(0,sn.default)().console.warn(`WARNING: IPC handle "${e}" is longer than ${n} characters.`),e}ie.generateRandomPipeName=Gc;function Kc(t,e="utf-8"){let n,r=new Promise((i,o)=>{n=i});return new Promise((i,o)=>{let u=(0,cr.createServer)(l=>{u.close(),n([new Vt(l,e),new zt(l,e)])});u.on("error",o),u.listen(t,()=>{u.removeListener("error",o),i({onConnected:()=>r})})})}ie.createClientPipeTransport=Kc;function Jc(t,e="utf-8"){let n=(0,cr.createConnection)(t);return[new Vt(n,e),new zt(n,e)]}ie.createServerPipeTransport=Jc;function Yc(t,e="utf-8"){let n,r=new Promise((i,o)=>{n=i});return new Promise((i,o)=>{let u=(0,cr.createServer)(l=>{u.close(),n([new Vt(l,e),new zt(l,e)])});u.on("error",o),u.listen(t,"127.0.0.1",()=>{u.removeListener("error",o),i({onConnected:()=>r})})})}ie.createClientSocketTransport=Yc;function Qc(t,e="utf-8"){let n=(0,cr.createConnection)(t,"127.0.0.1");return[new Vt(n,e),new zt(n,e)]}ie.createServerSocketTransport=Qc;function Xc(t){let e=t;return e.read!==void 0&&e.addListener!==void 0}function el(t){let e=t;return e.write!==void 0&&e.addListener!==void 0}function tl(t,e,n,r){n||(n=yt.NullLogger);let i=Xc(t)?new ar(t):t,o=el(e)?new ur(e):e;return yt.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,yt.createMessageConnection)(i,o,n,r)}ie.createMessageConnection=tl});var Ao=U((sm,ia)=>{"use strict";ia.exports=$t()});var dr=U((oa,lr)=>{(function(t){if(typeof lr=="object"&&typeof lr.exports=="object"){var e=t(require,oa);e!==void 0&&(lr.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=e.EOL=e.WorkspaceFolder=e.InlayHint=e.InlayHintLabelPart=e.InlayHintKind=e.InlineValueContext=e.InlineValueEvaluatableExpression=e.InlineValueVariableLookup=e.InlineValueText=e.SemanticTokens=e.SemanticTokenModifiers=e.SemanticTokenTypes=e.SelectionRange=e.DocumentLink=e.FormattingOptions=e.CodeLens=e.CodeAction=e.CodeActionContext=e.CodeActionTriggerKind=e.CodeActionKind=e.DocumentSymbol=e.WorkspaceSymbol=e.SymbolInformation=e.SymbolTag=e.SymbolKind=e.DocumentHighlight=e.DocumentHighlightKind=e.SignatureInformation=e.ParameterInformation=e.Hover=e.MarkedString=e.CompletionList=e.CompletionItem=e.CompletionItemLabelDetails=e.InsertTextMode=e.InsertReplaceEdit=e.CompletionItemTag=e.InsertTextFormat=e.CompletionItemKind=e.MarkupContent=e.MarkupKind=e.TextDocumentItem=e.OptionalVersionedTextDocumentIdentifier=e.VersionedTextDocumentIdentifier=e.TextDocumentIdentifier=e.WorkspaceChange=e.WorkspaceEdit=e.DeleteFile=e.RenameFile=e.CreateFile=e.TextDocumentEdit=e.AnnotatedTextEdit=e.ChangeAnnotationIdentifier=e.ChangeAnnotation=e.TextEdit=e.Command=e.Diagnostic=e.CodeDescription=e.DiagnosticTag=e.DiagnosticSeverity=e.DiagnosticRelatedInformation=e.FoldingRange=e.FoldingRangeKind=e.ColorPresentation=e.ColorInformation=e.Color=e.LocationLink=e.Location=e.Range=e.Position=e.uinteger=e.integer=e.URI=e.DocumentUri=void 0;var n;(function(a){function g(y){return typeof y=="string"}a.is=g})(n=e.DocumentUri||(e.DocumentUri={}));var r;(function(a){function g(y){return typeof y=="string"}a.is=g})(r=e.URI||(e.URI={}));var i;(function(a){a.MIN_VALUE=-2147483648,a.MAX_VALUE=2147483647;function g(y){return typeof y=="number"&&a.MIN_VALUE<=y&&y<=a.MAX_VALUE}a.is=g})(i=e.integer||(e.integer={}));var o;(function(a){a.MIN_VALUE=0,a.MAX_VALUE=2147483647;function g(y){return typeof y=="number"&&a.MIN_VALUE<=y&&y<=a.MAX_VALUE}a.is=g})(o=e.uinteger||(e.uinteger={}));var u;(function(a){function g(_,s){return _===Number.MAX_VALUE&&(_=o.MAX_VALUE),s===Number.MAX_VALUE&&(s=o.MAX_VALUE),{line:_,character:s}}a.create=g;function y(_){var s=_;return R.objectLiteral(s)&&R.uinteger(s.line)&&R.uinteger(s.character)}a.is=y})(u=e.Position||(e.Position={}));var l;(function(a){function g(_,s,E,M){if(R.uinteger(_)&&R.uinteger(s)&&R.uinteger(E)&&R.uinteger(M))return{start:u.create(_,s),end:u.create(E,M)};if(u.is(_)&&u.is(s))return{start:_,end:s};throw new Error("Range#create called with invalid arguments[".concat(_,", ").concat(s,", ").concat(E,", ").concat(M,"]"))}a.create=g;function y(_){var s=_;return R.objectLiteral(s)&&u.is(s.start)&&u.is(s.end)}a.is=y})(l=e.Range||(e.Range={}));var d;(function(a){function g(_,s){return{uri:_,range:s}}a.create=g;function y(_){var s=_;return R.objectLiteral(s)&&l.is(s.range)&&(R.string(s.uri)||R.undefined(s.uri))}a.is=y})(d=e.Location||(e.Location={}));var f;(function(a){function g(_,s,E,M){return{targetUri:_,targetRange:s,targetSelectionRange:E,originSelectionRange:M}}a.create=g;function y(_){var s=_;return R.objectLiteral(s)&&l.is(s.targetRange)&&R.string(s.targetUri)&&l.is(s.targetSelectionRange)&&(l.is(s.originSelectionRange)||R.undefined(s.originSelectionRange))}a.is=y})(f=e.LocationLink||(e.LocationLink={}));var p;(function(a){function g(_,s,E,M){return{red:_,green:s,blue:E,alpha:M}}a.create=g;function y(_){var s=_;return R.objectLiteral(s)&&R.numberRange(s.red,0,1)&&R.numberRange(s.green,0,1)&&R.numberRange(s.blue,0,1)&&R.numberRange(s.alpha,0,1)}a.is=y})(p=e.Color||(e.Color={}));var v;(function(a){function g(_,s){return{range:_,color:s}}a.create=g;function y(_){var s=_;return R.objectLiteral(s)&&l.is(s.range)&&p.is(s.color)}a.is=y})(v=e.ColorInformation||(e.ColorInformation={}));var w;(function(a){function g(_,s,E){return{label:_,textEdit:s,additionalTextEdits:E}}a.create=g;function y(_){var s=_;return R.objectLiteral(s)&&R.string(s.label)&&(R.undefined(s.textEdit)||V.is(s))&&(R.undefined(s.additionalTextEdits)||R.typedArray(s.additionalTextEdits,V.is))}a.is=y})(w=e.ColorPresentation||(e.ColorPresentation={}));var D;(function(a){a.Comment="comment",a.Imports="imports",a.Region="region"})(D=e.FoldingRangeKind||(e.FoldingRangeKind={}));var S;(function(a){function g(_,s,E,M,K,ge){var de={startLine:_,endLine:s};return R.defined(E)&&(de.startCharacter=E),R.defined(M)&&(de.endCharacter=M),R.defined(K)&&(de.kind=K),R.defined(ge)&&(de.collapsedText=ge),de}a.create=g;function y(_){var s=_;return R.objectLiteral(s)&&R.uinteger(s.startLine)&&R.uinteger(s.startLine)&&(R.undefined(s.startCharacter)||R.uinteger(s.startCharacter))&&(R.undefined(s.endCharacter)||R.uinteger(s.endCharacter))&&(R.undefined(s.kind)||R.string(s.kind))}a.is=y})(S=e.FoldingRange||(e.FoldingRange={}));var T;(function(a){function g(_,s){return{location:_,message:s}}a.create=g;function y(_){var s=_;return R.defined(s)&&d.is(s.location)&&R.string(s.message)}a.is=y})(T=e.DiagnosticRelatedInformation||(e.DiagnosticRelatedInformation={}));var q;(function(a){a.Error=1,a.Warning=2,a.Information=3,a.Hint=4})(q=e.DiagnosticSeverity||(e.DiagnosticSeverity={}));var k;(function(a){a.Unnecessary=1,a.Deprecated=2})(k=e.DiagnosticTag||(e.DiagnosticTag={}));var m;(function(a){function g(y){var _=y;return R.objectLiteral(_)&&R.string(_.href)}a.is=g})(m=e.CodeDescription||(e.CodeDescription={}));var b;(function(a){function g(_,s,E,M,K,ge){var de={range:_,message:s};return R.defined(E)&&(de.severity=E),R.defined(M)&&(de.code=M),R.defined(K)&&(de.source=K),R.defined(ge)&&(de.relatedInformation=ge),de}a.create=g;function y(_){var s,E=_;return R.defined(E)&&l.is(E.range)&&R.string(E.message)&&(R.number(E.severity)||R.undefined(E.severity))&&(R.integer(E.code)||R.string(E.code)||R.undefined(E.code))&&(R.undefined(E.codeDescription)||R.string((s=E.codeDescription)===null||s===void 0?void 0:s.href))&&(R.string(E.source)||R.undefined(E.source))&&(R.undefined(E.relatedInformation)||R.typedArray(E.relatedInformation,T.is))}a.is=y})(b=e.Diagnostic||(e.Diagnostic={}));var I;(function(a){function g(_,s){for(var E=[],M=2;M<arguments.length;M++)E[M-2]=arguments[M];var K={title:_,command:s};return R.defined(E)&&E.length>0&&(K.arguments=E),K}a.create=g;function y(_){var s=_;return R.defined(s)&&R.string(s.title)&&R.string(s.command)}a.is=y})(I=e.Command||(e.Command={}));var V;(function(a){function g(E,M){return{range:E,newText:M}}a.replace=g;function y(E,M){return{range:{start:E,end:E},newText:M}}a.insert=y;function _(E){return{range:E,newText:""}}a.del=_;function s(E){var M=E;return R.objectLiteral(M)&&R.string(M.newText)&&l.is(M.range)}a.is=s})(V=e.TextEdit||(e.TextEdit={}));var re;(function(a){function g(_,s,E){var M={label:_};return s!==void 0&&(M.needsConfirmation=s),E!==void 0&&(M.description=E),M}a.create=g;function y(_){var s=_;return R.objectLiteral(s)&&R.string(s.label)&&(R.boolean(s.needsConfirmation)||s.needsConfirmation===void 0)&&(R.string(s.description)||s.description===void 0)}a.is=y})(re=e.ChangeAnnotation||(e.ChangeAnnotation={}));var oe;(function(a){function g(y){var _=y;return R.string(_)}a.is=g})(oe=e.ChangeAnnotationIdentifier||(e.ChangeAnnotationIdentifier={}));var ve;(function(a){function g(E,M,K){return{range:E,newText:M,annotationId:K}}a.replace=g;function y(E,M,K){return{range:{start:E,end:E},newText:M,annotationId:K}}a.insert=y;function _(E,M){return{range:E,newText:"",annotationId:M}}a.del=_;function s(E){var M=E;return V.is(M)&&(re.is(M.annotationId)||oe.is(M.annotationId))}a.is=s})(ve=e.AnnotatedTextEdit||(e.AnnotatedTextEdit={}));var Je;(function(a){function g(_,s){return{textDocument:_,edits:s}}a.create=g;function y(_){var s=_;return R.defined(s)&&Z.is(s.textDocument)&&Array.isArray(s.edits)}a.is=y})(Je=e.TextDocumentEdit||(e.TextDocumentEdit={}));var Ye;(function(a){function g(_,s,E){var M={kind:"create",uri:_};return s!==void 0&&(s.overwrite!==void 0||s.ignoreIfExists!==void 0)&&(M.options=s),E!==void 0&&(M.annotationId=E),M}a.create=g;function y(_){var s=_;return s&&s.kind==="create"&&R.string(s.uri)&&(s.options===void 0||(s.options.overwrite===void 0||R.boolean(s.options.overwrite))&&(s.options.ignoreIfExists===void 0||R.boolean(s.options.ignoreIfExists)))&&(s.annotationId===void 0||oe.is(s.annotationId))}a.is=y})(Ye=e.CreateFile||(e.CreateFile={}));var Be;(function(a){function g(_,s,E,M){var K={kind:"rename",oldUri:_,newUri:s};return E!==void 0&&(E.overwrite!==void 0||E.ignoreIfExists!==void 0)&&(K.options=E),M!==void 0&&(K.annotationId=M),K}a.create=g;function y(_){var s=_;return s&&s.kind==="rename"&&R.string(s.oldUri)&&R.string(s.newUri)&&(s.options===void 0||(s.options.overwrite===void 0||R.boolean(s.options.overwrite))&&(s.options.ignoreIfExists===void 0||R.boolean(s.options.ignoreIfExists)))&&(s.annotationId===void 0||oe.is(s.annotationId))}a.is=y})(Be=e.RenameFile||(e.RenameFile={}));var me;(function(a){function g(_,s,E){var M={kind:"delete",uri:_};return s!==void 0&&(s.recursive!==void 0||s.ignoreIfNotExists!==void 0)&&(M.options=s),E!==void 0&&(M.annotationId=E),M}a.create=g;function y(_){var s=_;return s&&s.kind==="delete"&&R.string(s.uri)&&(s.options===void 0||(s.options.recursive===void 0||R.boolean(s.options.recursive))&&(s.options.ignoreIfNotExists===void 0||R.boolean(s.options.ignoreIfNotExists)))&&(s.annotationId===void 0||oe.is(s.annotationId))}a.is=y})(me=e.DeleteFile||(e.DeleteFile={}));var x;(function(a){function g(y){var _=y;return _&&(_.changes!==void 0||_.documentChanges!==void 0)&&(_.documentChanges===void 0||_.documentChanges.every(function(s){return R.string(s.kind)?Ye.is(s)||Be.is(s)||me.is(s):Je.is(s)}))}a.is=g})(x=e.WorkspaceEdit||(e.WorkspaceEdit={}));var F=function(){function a(g,y){this.edits=g,this.changeAnnotations=y}return a.prototype.insert=function(g,y,_){var s,E;if(_===void 0?s=V.insert(g,y):oe.is(_)?(E=_,s=ve.insert(g,y,_)):(this.assertChangeAnnotations(this.changeAnnotations),E=this.changeAnnotations.manage(_),s=ve.insert(g,y,E)),this.edits.push(s),E!==void 0)return E},a.prototype.replace=function(g,y,_){var s,E;if(_===void 0?s=V.replace(g,y):oe.is(_)?(E=_,s=ve.replace(g,y,_)):(this.assertChangeAnnotations(this.changeAnnotations),E=this.changeAnnotations.manage(_),s=ve.replace(g,y,E)),this.edits.push(s),E!==void 0)return E},a.prototype.delete=function(g,y){var _,s;if(y===void 0?_=V.del(g):oe.is(y)?(s=y,_=ve.del(g,y)):(this.assertChangeAnnotations(this.changeAnnotations),s=this.changeAnnotations.manage(y),_=ve.del(g,s)),this.edits.push(_),s!==void 0)return s},a.prototype.add=function(g){this.edits.push(g)},a.prototype.all=function(){return this.edits},a.prototype.clear=function(){this.edits.splice(0,this.edits.length)},a.prototype.assertChangeAnnotations=function(g){if(g===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},a}(),A=function(){function a(g){this._annotations=g===void 0?Object.create(null):g,this._counter=0,this._size=0}return a.prototype.all=function(){return this._annotations},Object.defineProperty(a.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),a.prototype.manage=function(g,y){var _;if(oe.is(g)?_=g:(_=this.nextId(),y=g),this._annotations[_]!==void 0)throw new Error("Id ".concat(_," is already in use."));if(y===void 0)throw new Error("No annotation provided for id ".concat(_));return this._annotations[_]=y,this._size++,_},a.prototype.nextId=function(){return this._counter++,this._counter.toString()},a}(),W=function(){function a(g){var y=this;this._textEditChanges=Object.create(null),g!==void 0?(this._workspaceEdit=g,g.documentChanges?(this._changeAnnotations=new A(g.changeAnnotations),g.changeAnnotations=this._changeAnnotations.all(),g.documentChanges.forEach(function(_){if(Je.is(_)){var s=new F(_.edits,y._changeAnnotations);y._textEditChanges[_.textDocument.uri]=s}})):g.changes&&Object.keys(g.changes).forEach(function(_){var s=new F(g.changes[_]);y._textEditChanges[_]=s})):this._workspaceEdit={}}return Object.defineProperty(a.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),a.prototype.getTextEditChange=function(g){if(Z.is(g)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var y={uri:g.uri,version:g.version},_=this._textEditChanges[y.uri];if(!_){var s=[],E={textDocument:y,edits:s};this._workspaceEdit.documentChanges.push(E),_=new F(s,this._changeAnnotations),this._textEditChanges[y.uri]=_}return _}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var _=this._textEditChanges[g];if(!_){var s=[];this._workspaceEdit.changes[g]=s,_=new F(s),this._textEditChanges[g]=_}return _}},a.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new A,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},a.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},a.prototype.createFile=function(g,y,_){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var s;re.is(y)||oe.is(y)?s=y:_=y;var E,M;if(s===void 0?E=Ye.create(g,_):(M=oe.is(s)?s:this._changeAnnotations.manage(s),E=Ye.create(g,_,M)),this._workspaceEdit.documentChanges.push(E),M!==void 0)return M},a.prototype.renameFile=function(g,y,_,s){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var E;re.is(_)||oe.is(_)?E=_:s=_;var M,K;if(E===void 0?M=Be.create(g,y,s):(K=oe.is(E)?E:this._changeAnnotations.manage(E),M=Be.create(g,y,s,K)),this._workspaceEdit.documentChanges.push(M),K!==void 0)return K},a.prototype.deleteFile=function(g,y,_){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var s;re.is(y)||oe.is(y)?s=y:_=y;var E,M;if(s===void 0?E=me.create(g,_):(M=oe.is(s)?s:this._changeAnnotations.manage(s),E=me.create(g,_,M)),this._workspaceEdit.documentChanges.push(E),M!==void 0)return M},a}();e.WorkspaceChange=W;var J;(function(a){function g(_){return{uri:_}}a.create=g;function y(_){var s=_;return R.defined(s)&&R.string(s.uri)}a.is=y})(J=e.TextDocumentIdentifier||(e.TextDocumentIdentifier={}));var X;(function(a){function g(_,s){return{uri:_,version:s}}a.create=g;function y(_){var s=_;return R.defined(s)&&R.string(s.uri)&&R.integer(s.version)}a.is=y})(X=e.VersionedTextDocumentIdentifier||(e.VersionedTextDocumentIdentifier={}));var Z;(function(a){function g(_,s){return{uri:_,version:s}}a.create=g;function y(_){var s=_;return R.defined(s)&&R.string(s.uri)&&(s.version===null||R.integer(s.version))}a.is=y})(Z=e.OptionalVersionedTextDocumentIdentifier||(e.OptionalVersionedTextDocumentIdentifier={}));var De;(function(a){function g(_,s,E,M){return{uri:_,languageId:s,version:E,text:M}}a.create=g;function y(_){var s=_;return R.defined(s)&&R.string(s.uri)&&R.string(s.languageId)&&R.integer(s.version)&&R.string(s.text)}a.is=y})(De=e.TextDocumentItem||(e.TextDocumentItem={}));var Ce;(function(a){a.PlainText="plaintext",a.Markdown="markdown";function g(y){var _=y;return _===a.PlainText||_===a.Markdown}a.is=g})(Ce=e.MarkupKind||(e.MarkupKind={}));var qe;(function(a){function g(y){var _=y;return R.objectLiteral(y)&&Ce.is(_.kind)&&R.string(_.value)}a.is=g})(qe=e.MarkupContent||(e.MarkupContent={}));var Ct;(function(a){a.Text=1,a.Method=2,a.Function=3,a.Constructor=4,a.Field=5,a.Variable=6,a.Class=7,a.Interface=8,a.Module=9,a.Property=10,a.Unit=11,a.Value=12,a.Enum=13,a.Keyword=14,a.Snippet=15,a.Color=16,a.File=17,a.Reference=18,a.Folder=19,a.EnumMember=20,a.Constant=21,a.Struct=22,a.Event=23,a.Operator=24,a.TypeParameter=25})(Ct=e.CompletionItemKind||(e.CompletionItemKind={}));var ot;(function(a){a.PlainText=1,a.Snippet=2})(ot=e.InsertTextFormat||(e.InsertTextFormat={}));var yi;(function(a){a.Deprecated=1})(yi=e.CompletionItemTag||(e.CompletionItemTag={}));var bi;(function(a){function g(_,s,E){return{newText:_,insert:s,replace:E}}a.create=g;function y(_){var s=_;return s&&R.string(s.newText)&&l.is(s.insert)&&l.is(s.replace)}a.is=y})(bi=e.InsertReplaceEdit||(e.InsertReplaceEdit={}));var vi;(function(a){a.asIs=1,a.adjustIndentation=2})(vi=e.InsertTextMode||(e.InsertTextMode={}));var wi;(function(a){function g(y){var _=y;return _&&(R.string(_.detail)||_.detail===void 0)&&(R.string(_.description)||_.description===void 0)}a.is=g})(wi=e.CompletionItemLabelDetails||(e.CompletionItemLabelDetails={}));var Ti;(function(a){function g(y){return{label:y}}a.create=g})(Ti=e.CompletionItem||(e.CompletionItem={}));var Ri;(function(a){function g(y,_){return{items:y||[],isIncomplete:!!_}}a.create=g})(Ri=e.CompletionList||(e.CompletionList={}));var Qe;(function(a){function g(_){return _.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}a.fromPlainText=g;function y(_){var s=_;return R.string(s)||R.objectLiteral(s)&&R.string(s.language)&&R.string(s.value)}a.is=y})(Qe=e.MarkedString||(e.MarkedString={}));var Ei;(function(a){function g(y){var _=y;return!!_&&R.objectLiteral(_)&&(qe.is(_.contents)||Qe.is(_.contents)||R.typedArray(_.contents,Qe.is))&&(y.range===void 0||l.is(y.range))}a.is=g})(Ei=e.Hover||(e.Hover={}));var Di;(function(a){function g(y,_){return _?{label:y,documentation:_}:{label:y}}a.create=g})(Di=e.ParameterInformation||(e.ParameterInformation={}));var Qt;(function(a){function g(y,_){for(var s=[],E=2;E<arguments.length;E++)s[E-2]=arguments[E];var M={label:y};return R.defined(_)&&(M.documentation=_),R.defined(s)?M.parameters=s:M.parameters=[],M}a.create=g})(Qt=e.SignatureInformation||(e.SignatureInformation={}));var Si;(function(a){a.Text=1,a.Read=2,a.Write=3})(Si=e.DocumentHighlightKind||(e.DocumentHighlightKind={}));var vn;(function(a){function g(y,_){var s={range:y};return R.number(_)&&(s.kind=_),s}a.create=g})(vn=e.DocumentHighlight||(e.DocumentHighlight={}));var Pi;(function(a){a.File=1,a.Module=2,a.Namespace=3,a.Package=4,a.Class=5,a.Method=6,a.Property=7,a.Field=8,a.Constructor=9,a.Enum=10,a.Interface=11,a.Function=12,a.Variable=13,a.Constant=14,a.String=15,a.Number=16,a.Boolean=17,a.Array=18,a.Object=19,a.Key=20,a.Null=21,a.EnumMember=22,a.Struct=23,a.Event=24,a.Operator=25,a.TypeParameter=26})(Pi=e.SymbolKind||(e.SymbolKind={}));var Nt;(function(a){a.Deprecated=1})(Nt=e.SymbolTag||(e.SymbolTag={}));var Lt;(function(a){function g(y,_,s,E,M){var K={name:y,kind:_,location:{uri:E,range:s}};return M&&(K.containerName=M),K}a.create=g})(Lt=e.SymbolInformation||(e.SymbolInformation={}));var Mi;(function(a){function g(y,_,s,E){return E!==void 0?{name:y,kind:_,location:{uri:s,range:E}}:{name:y,kind:_,location:{uri:s}}}a.create=g})(Mi=e.WorkspaceSymbol||(e.WorkspaceSymbol={}));var Ci;(function(a){function g(_,s,E,M,K,ge){var de={name:_,detail:s,kind:E,range:M,selectionRange:K};return ge!==void 0&&(de.children=ge),de}a.create=g;function y(_){var s=_;return s&&R.string(s.name)&&R.number(s.kind)&&l.is(s.range)&&l.is(s.selectionRange)&&(s.detail===void 0||R.string(s.detail))&&(s.deprecated===void 0||R.boolean(s.deprecated))&&(s.children===void 0||Array.isArray(s.children))&&(s.tags===void 0||Array.isArray(s.tags))}a.is=y})(Ci=e.DocumentSymbol||(e.DocumentSymbol={}));var jt;(function(a){a.Empty="",a.QuickFix="quickfix",a.Refactor="refactor",a.RefactorExtract="refactor.extract",a.RefactorInline="refactor.inline",a.RefactorRewrite="refactor.rewrite",a.Source="source",a.SourceOrganizeImports="source.organizeImports",a.SourceFixAll="source.fixAll"})(jt=e.CodeActionKind||(e.CodeActionKind={}));var Xt;(function(a){a.Invoked=1,a.Automatic=2})(Xt=e.CodeActionTriggerKind||(e.CodeActionTriggerKind={}));var Gn;(function(a){function g(_,s,E){var M={diagnostics:_};return s!=null&&(M.only=s),E!=null&&(M.triggerKind=E),M}a.create=g;function y(_){var s=_;return R.defined(s)&&R.typedArray(s.diagnostics,b.is)&&(s.only===void 0||R.typedArray(s.only,R.string))&&(s.triggerKind===void 0||s.triggerKind===Xt.Invoked||s.triggerKind===Xt.Automatic)}a.is=y})(Gn=e.CodeActionContext||(e.CodeActionContext={}));var wn;(function(a){function g(_,s,E){var M={title:_},K=!0;return typeof s=="string"?(K=!1,M.kind=s):I.is(s)?M.command=s:M.edit=s,K&&E!==void 0&&(M.kind=E),M}a.create=g;function y(_){var s=_;return s&&R.string(s.title)&&(s.diagnostics===void 0||R.typedArray(s.diagnostics,b.is))&&(s.kind===void 0||R.string(s.kind))&&(s.edit!==void 0||s.command!==void 0)&&(s.command===void 0||I.is(s.command))&&(s.isPreferred===void 0||R.boolean(s.isPreferred))&&(s.edit===void 0||x.is(s.edit))}a.is=y})(wn=e.CodeAction||(e.CodeAction={}));var Kn;(function(a){function g(_,s){var E={range:_};return R.defined(s)&&(E.data=s),E}a.create=g;function y(_){var s=_;return R.defined(s)&&l.is(s.range)&&(R.undefined(s.command)||I.is(s.command))}a.is=y})(Kn=e.CodeLens||(e.CodeLens={}));var It;(function(a){function g(_,s){return{tabSize:_,insertSpaces:s}}a.create=g;function y(_){var s=_;return R.defined(s)&&R.uinteger(s.tabSize)&&R.boolean(s.insertSpaces)}a.is=y})(It=e.FormattingOptions||(e.FormattingOptions={}));var h;(function(a){function g(_,s,E){return{range:_,target:s,data:E}}a.create=g;function y(_){var s=_;return R.defined(s)&&l.is(s.range)&&(R.undefined(s.target)||R.string(s.target))}a.is=y})(h=e.DocumentLink||(e.DocumentLink={}));var N;(function(a){function g(_,s){return{range:_,parent:s}}a.create=g;function y(_){var s=_;return R.objectLiteral(s)&&l.is(s.range)&&(s.parent===void 0||a.is(s.parent))}a.is=y})(N=e.SelectionRange||(e.SelectionRange={}));var L;(function(a){a.namespace="namespace",a.type="type",a.class="class",a.enum="enum",a.interface="interface",a.struct="struct",a.typeParameter="typeParameter",a.parameter="parameter",a.variable="variable",a.property="property",a.enumMember="enumMember",a.event="event",a.function="function",a.method="method",a.macro="macro",a.keyword="keyword",a.modifier="modifier",a.comment="comment",a.string="string",a.number="number",a.regexp="regexp",a.operator="operator",a.decorator="decorator"})(L=e.SemanticTokenTypes||(e.SemanticTokenTypes={}));var H;(function(a){a.declaration="declaration",a.definition="definition",a.readonly="readonly",a.static="static",a.deprecated="deprecated",a.abstract="abstract",a.async="async",a.modification="modification",a.documentation="documentation",a.defaultLibrary="defaultLibrary"})(H=e.SemanticTokenModifiers||(e.SemanticTokenModifiers={}));var ue;(function(a){function g(y){var _=y;return R.objectLiteral(_)&&(_.resultId===void 0||typeof _.resultId=="string")&&Array.isArray(_.data)&&(_.data.length===0||typeof _.data[0]=="number")}a.is=g})(ue=e.SemanticTokens||(e.SemanticTokens={}));var ce;(function(a){function g(_,s){return{range:_,text:s}}a.create=g;function y(_){var s=_;return s!=null&&l.is(s.range)&&R.string(s.text)}a.is=y})(ce=e.InlineValueText||(e.InlineValueText={}));var ae;(function(a){function g(_,s,E){return{range:_,variableName:s,caseSensitiveLookup:E}}a.create=g;function y(_){var s=_;return s!=null&&l.is(s.range)&&R.boolean(s.caseSensitiveLookup)&&(R.string(s.variableName)||s.variableName===void 0)}a.is=y})(ae=e.InlineValueVariableLookup||(e.InlineValueVariableLookup={}));var we;(function(a){function g(_,s){return{range:_,expression:s}}a.create=g;function y(_){var s=_;return s!=null&&l.is(s.range)&&(R.string(s.expression)||s.expression===void 0)}a.is=y})(we=e.InlineValueEvaluatableExpression||(e.InlineValueEvaluatableExpression={}));var Y;(function(a){function g(_,s){return{frameId:_,stoppedLocation:s}}a.create=g;function y(_){var s=_;return R.defined(s)&&l.is(_.stoppedLocation)}a.is=y})(Y=e.InlineValueContext||(e.InlineValueContext={}));var le;(function(a){a.Type=1,a.Parameter=2;function g(y){return y===1||y===2}a.is=g})(le=e.InlayHintKind||(e.InlayHintKind={}));var te;(function(a){function g(_){return{value:_}}a.create=g;function y(_){var s=_;return R.objectLiteral(s)&&(s.tooltip===void 0||R.string(s.tooltip)||qe.is(s.tooltip))&&(s.location===void 0||d.is(s.location))&&(s.command===void 0||I.is(s.command))}a.is=y})(te=e.InlayHintLabelPart||(e.InlayHintLabelPart={}));var be;(function(a){function g(_,s,E){var M={position:_,label:s};return E!==void 0&&(M.kind=E),M}a.create=g;function y(_){var s=_;return R.objectLiteral(s)&&u.is(s.position)&&(R.string(s.label)||R.typedArray(s.label,te.is))&&(s.kind===void 0||le.is(s.kind))&&s.textEdits===void 0||R.typedArray(s.textEdits,V.is)&&(s.tooltip===void 0||R.string(s.tooltip)||qe.is(s.tooltip))&&(s.paddingLeft===void 0||R.boolean(s.paddingLeft))&&(s.paddingRight===void 0||R.boolean(s.paddingRight))}a.is=y})(be=e.InlayHint||(e.InlayHint={}));var xe;(function(a){function g(y){var _=y;return R.objectLiteral(_)&&r.is(_.uri)&&R.string(_.name)}a.is=g})(xe=e.WorkspaceFolder||(e.WorkspaceFolder={})),e.EOL=[`
`,`\r
`,"\r"];var Tt;(function(a){function g(E,M,K,ge){return new gt(E,M,K,ge)}a.create=g;function y(E){var M=E;return!!(R.defined(M)&&R.string(M.uri)&&(R.undefined(M.languageId)||R.string(M.languageId))&&R.uinteger(M.lineCount)&&R.func(M.getText)&&R.func(M.positionAt)&&R.func(M.offsetAt))}a.is=y;function _(E,M){for(var K=E.getText(),ge=s(M,function(en,Jn){var Cs=en.range.start.line-Jn.range.start.line;return Cs===0?en.range.start.character-Jn.range.start.character:Cs}),de=K.length,st=ge.length-1;st>=0;st--){var at=ge[st],Rt=E.offsetAt(at.range.start),Q=E.offsetAt(at.range.end);if(Q<=de)K=K.substring(0,Rt)+at.newText+K.substring(Q,K.length);else throw new Error("Overlapping edit");de=Rt}return K}a.applyEdits=_;function s(E,M){if(E.length<=1)return E;var K=E.length/2|0,ge=E.slice(0,K),de=E.slice(K);s(ge,M),s(de,M);for(var st=0,at=0,Rt=0;st<ge.length&&at<de.length;){var Q=M(ge[st],de[at]);Q<=0?E[Rt++]=ge[st++]:E[Rt++]=de[at++]}for(;st<ge.length;)E[Rt++]=ge[st++];for(;at<de.length;)E[Rt++]=de[at++];return E}})(Tt=e.TextDocument||(e.TextDocument={}));var gt=function(){function a(g,y,_,s){this._uri=g,this._languageId=y,this._version=_,this._content=s,this._lineOffsets=void 0}return Object.defineProperty(a.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),a.prototype.getText=function(g){if(g){var y=this.offsetAt(g.start),_=this.offsetAt(g.end);return this._content.substring(y,_)}return this._content},a.prototype.update=function(g,y){this._content=g.text,this._version=y,this._lineOffsets=void 0},a.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var g=[],y=this._content,_=!0,s=0;s<y.length;s++){_&&(g.push(s),_=!1);var E=y.charAt(s);_=E==="\r"||E===`
`,E==="\r"&&s+1<y.length&&y.charAt(s+1)===`
`&&s++}_&&y.length>0&&g.push(y.length),this._lineOffsets=g}return this._lineOffsets},a.prototype.positionAt=function(g){g=Math.max(Math.min(g,this._content.length),0);var y=this.getLineOffsets(),_=0,s=y.length;if(s===0)return u.create(0,g);for(;_<s;){var E=Math.floor((_+s)/2);y[E]>g?s=E:_=E+1}var M=_-1;return u.create(M,g-y[M])},a.prototype.offsetAt=function(g){var y=this.getLineOffsets();if(g.line>=y.length)return this._content.length;if(g.line<0)return 0;var _=y[g.line],s=g.line+1<y.length?y[g.line+1]:this._content.length;return Math.max(Math.min(_+g.character,s),_)},Object.defineProperty(a.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),a}(),R;(function(a){var g=Object.prototype.toString;function y(Q){return typeof Q<"u"}a.defined=y;function _(Q){return typeof Q>"u"}a.undefined=_;function s(Q){return Q===!0||Q===!1}a.boolean=s;function E(Q){return g.call(Q)==="[object String]"}a.string=E;function M(Q){return g.call(Q)==="[object Number]"}a.number=M;function K(Q,en,Jn){return g.call(Q)==="[object Number]"&&en<=Q&&Q<=Jn}a.numberRange=K;function ge(Q){return g.call(Q)==="[object Number]"&&-2147483648<=Q&&Q<=2147483647}a.integer=ge;function de(Q){return g.call(Q)==="[object Number]"&&0<=Q&&Q<=2147483647}a.uinteger=de;function st(Q){return g.call(Q)==="[object Function]"}a.func=st;function at(Q){return Q!==null&&typeof Q=="object"}a.objectLiteral=at;function Rt(Q,en){return Array.isArray(Q)&&Q.every(en)}a.typedArray=Rt})(R||(R={}))})});var he=U(Ue=>{"use strict";Object.defineProperty(Ue,"__esModule",{value:!0});Ue.ProtocolNotificationType=Ue.ProtocolNotificationType0=Ue.ProtocolRequestType=Ue.ProtocolRequestType0=Ue.RegistrationType=Ue.MessageDirection=void 0;var an=$t(),nl;(function(t){t.clientToServer="clientToServer",t.serverToClient="serverToClient",t.both="both"})(nl=Ue.MessageDirection||(Ue.MessageDirection={}));var Lo=class{constructor(e){this.method=e}};Ue.RegistrationType=Lo;var jo=class extends an.RequestType0{constructor(e){super(e)}};Ue.ProtocolRequestType0=jo;var Uo=class extends an.RequestType{constructor(e){super(e,an.ParameterStructures.byName)}};Ue.ProtocolRequestType=Uo;var Wo=class extends an.NotificationType0{constructor(e){super(e)}};Ue.ProtocolNotificationType0=Wo;var Ho=class extends an.NotificationType{constructor(e){super(e,an.ParameterStructures.byName)}};Ue.ProtocolNotificationType=Ho});var _r=U(Re=>{"use strict";Object.defineProperty(Re,"__esModule",{value:!0});Re.objectLiteral=Re.typedArray=Re.stringArray=Re.array=Re.func=Re.error=Re.number=Re.string=Re.boolean=void 0;function rl(t){return t===!0||t===!1}Re.boolean=rl;function sa(t){return typeof t=="string"||t instanceof String}Re.string=sa;function il(t){return typeof t=="number"||t instanceof Number}Re.number=il;function ol(t){return t instanceof Error}Re.error=ol;function sl(t){return typeof t=="function"}Re.func=sl;function aa(t){return Array.isArray(t)}Re.array=aa;function al(t){return aa(t)&&t.every(e=>sa(e))}Re.stringArray=al;function ul(t,e){return Array.isArray(t)&&t.every(e)}Re.typedArray=ul;function cl(t){return t!==null&&typeof t=="object"}Re.objectLiteral=cl});var ca=U(Pn=>{"use strict";Object.defineProperty(Pn,"__esModule",{value:!0});Pn.ImplementationRequest=void 0;var ua=he(),ll;(function(t){t.method="textDocument/implementation",t.messageDirection=ua.MessageDirection.clientToServer,t.type=new ua.ProtocolRequestType(t.method)})(ll=Pn.ImplementationRequest||(Pn.ImplementationRequest={}))});var da=U(Mn=>{"use strict";Object.defineProperty(Mn,"__esModule",{value:!0});Mn.TypeDefinitionRequest=void 0;var la=he(),dl;(function(t){t.method="textDocument/typeDefinition",t.messageDirection=la.MessageDirection.clientToServer,t.type=new la.ProtocolRequestType(t.method)})(dl=Mn.TypeDefinitionRequest||(Mn.TypeDefinitionRequest={}))});var _a=U(kt=>{"use strict";Object.defineProperty(kt,"__esModule",{value:!0});kt.DidChangeWorkspaceFoldersNotification=kt.WorkspaceFoldersRequest=void 0;var fr=he(),_l;(function(t){t.method="workspace/workspaceFolders",t.messageDirection=fr.MessageDirection.serverToClient,t.type=new fr.ProtocolRequestType0(t.method)})(_l=kt.WorkspaceFoldersRequest||(kt.WorkspaceFoldersRequest={}));var fl;(function(t){t.method="workspace/didChangeWorkspaceFolders",t.messageDirection=fr.MessageDirection.clientToServer,t.type=new fr.ProtocolNotificationType(t.method)})(fl=kt.DidChangeWorkspaceFoldersNotification||(kt.DidChangeWorkspaceFoldersNotification={}))});var ma=U(Cn=>{"use strict";Object.defineProperty(Cn,"__esModule",{value:!0});Cn.ConfigurationRequest=void 0;var fa=he(),ml;(function(t){t.method="workspace/configuration",t.messageDirection=fa.MessageDirection.serverToClient,t.type=new fa.ProtocolRequestType(t.method)})(ml=Cn.ConfigurationRequest||(Cn.ConfigurationRequest={}))});var ha=U(Ft=>{"use strict";Object.defineProperty(Ft,"__esModule",{value:!0});Ft.ColorPresentationRequest=Ft.DocumentColorRequest=void 0;var mr=he(),hl;(function(t){t.method="textDocument/documentColor",t.messageDirection=mr.MessageDirection.clientToServer,t.type=new mr.ProtocolRequestType(t.method)})(hl=Ft.DocumentColorRequest||(Ft.DocumentColorRequest={}));var pl;(function(t){t.method="textDocument/colorPresentation",t.messageDirection=mr.MessageDirection.clientToServer,t.type=new mr.ProtocolRequestType(t.method)})(pl=Ft.ColorPresentationRequest||(Ft.ColorPresentationRequest={}))});var ga=U(Nn=>{"use strict";Object.defineProperty(Nn,"__esModule",{value:!0});Nn.FoldingRangeRequest=void 0;var pa=he(),gl;(function(t){t.method="textDocument/foldingRange",t.messageDirection=pa.MessageDirection.clientToServer,t.type=new pa.ProtocolRequestType(t.method)})(gl=Nn.FoldingRangeRequest||(Nn.FoldingRangeRequest={}))});var ba=U(In=>{"use strict";Object.defineProperty(In,"__esModule",{value:!0});In.DeclarationRequest=void 0;var ya=he(),yl;(function(t){t.method="textDocument/declaration",t.messageDirection=ya.MessageDirection.clientToServer,t.type=new ya.ProtocolRequestType(t.method)})(yl=In.DeclarationRequest||(In.DeclarationRequest={}))});var wa=U(kn=>{"use strict";Object.defineProperty(kn,"__esModule",{value:!0});kn.SelectionRangeRequest=void 0;var va=he(),bl;(function(t){t.method="textDocument/selectionRange",t.messageDirection=va.MessageDirection.clientToServer,t.type=new va.ProtocolRequestType(t.method)})(bl=kn.SelectionRangeRequest||(kn.SelectionRangeRequest={}))});var Ta=U(lt=>{"use strict";Object.defineProperty(lt,"__esModule",{value:!0});lt.WorkDoneProgressCancelNotification=lt.WorkDoneProgressCreateRequest=lt.WorkDoneProgress=void 0;var vl=$t(),hr=he(),wl;(function(t){t.type=new vl.ProgressType;function e(n){return n===t.type}t.is=e})(wl=lt.WorkDoneProgress||(lt.WorkDoneProgress={}));var Tl;(function(t){t.method="window/workDoneProgress/create",t.messageDirection=hr.MessageDirection.serverToClient,t.type=new hr.ProtocolRequestType(t.method)})(Tl=lt.WorkDoneProgressCreateRequest||(lt.WorkDoneProgressCreateRequest={}));var Rl;(function(t){t.method="window/workDoneProgress/cancel",t.messageDirection=hr.MessageDirection.clientToServer,t.type=new hr.ProtocolNotificationType(t.method)})(Rl=lt.WorkDoneProgressCancelNotification||(lt.WorkDoneProgressCancelNotification={}))});var Ra=U(dt=>{"use strict";Object.defineProperty(dt,"__esModule",{value:!0});dt.CallHierarchyOutgoingCallsRequest=dt.CallHierarchyIncomingCallsRequest=dt.CallHierarchyPrepareRequest=void 0;var un=he(),El;(function(t){t.method="textDocument/prepareCallHierarchy",t.messageDirection=un.MessageDirection.clientToServer,t.type=new un.ProtocolRequestType(t.method)})(El=dt.CallHierarchyPrepareRequest||(dt.CallHierarchyPrepareRequest={}));var Dl;(function(t){t.method="callHierarchy/incomingCalls",t.messageDirection=un.MessageDirection.clientToServer,t.type=new un.ProtocolRequestType(t.method)})(Dl=dt.CallHierarchyIncomingCallsRequest||(dt.CallHierarchyIncomingCallsRequest={}));var Sl;(function(t){t.method="callHierarchy/outgoingCalls",t.messageDirection=un.MessageDirection.clientToServer,t.type=new un.ProtocolRequestType(t.method)})(Sl=dt.CallHierarchyOutgoingCallsRequest||(dt.CallHierarchyOutgoingCallsRequest={}))});var Ea=U(Ee=>{"use strict";Object.defineProperty(Ee,"__esModule",{value:!0});Ee.SemanticTokensRefreshRequest=Ee.SemanticTokensRangeRequest=Ee.SemanticTokensDeltaRequest=Ee.SemanticTokensRequest=Ee.SemanticTokensRegistrationType=Ee.TokenFormat=void 0;var Mt=he(),Pl;(function(t){t.Relative="relative"})(Pl=Ee.TokenFormat||(Ee.TokenFormat={}));var pr;(function(t){t.method="textDocument/semanticTokens",t.type=new Mt.RegistrationType(t.method)})(pr=Ee.SemanticTokensRegistrationType||(Ee.SemanticTokensRegistrationType={}));var Ml;(function(t){t.method="textDocument/semanticTokens/full",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method),t.registrationMethod=pr.method})(Ml=Ee.SemanticTokensRequest||(Ee.SemanticTokensRequest={}));var Cl;(function(t){t.method="textDocument/semanticTokens/full/delta",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method),t.registrationMethod=pr.method})(Cl=Ee.SemanticTokensDeltaRequest||(Ee.SemanticTokensDeltaRequest={}));var Nl;(function(t){t.method="textDocument/semanticTokens/range",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method),t.registrationMethod=pr.method})(Nl=Ee.SemanticTokensRangeRequest||(Ee.SemanticTokensRangeRequest={}));var Il;(function(t){t.method="workspace/semanticTokens/refresh",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType0(t.method)})(Il=Ee.SemanticTokensRefreshRequest||(Ee.SemanticTokensRefreshRequest={}))});var Sa=U(Fn=>{"use strict";Object.defineProperty(Fn,"__esModule",{value:!0});Fn.ShowDocumentRequest=void 0;var Da=he(),kl;(function(t){t.method="window/showDocument",t.messageDirection=Da.MessageDirection.serverToClient,t.type=new Da.ProtocolRequestType(t.method)})(kl=Fn.ShowDocumentRequest||(Fn.ShowDocumentRequest={}))});var Ma=U(qn=>{"use strict";Object.defineProperty(qn,"__esModule",{value:!0});qn.LinkedEditingRangeRequest=void 0;var Pa=he(),Fl;(function(t){t.method="textDocument/linkedEditingRange",t.messageDirection=Pa.MessageDirection.clientToServer,t.type=new Pa.ProtocolRequestType(t.method)})(Fl=qn.LinkedEditingRangeRequest||(qn.LinkedEditingRangeRequest={}))});var Ca=U(pe=>{"use strict";Object.defineProperty(pe,"__esModule",{value:!0});pe.WillDeleteFilesRequest=pe.DidDeleteFilesNotification=pe.DidRenameFilesNotification=pe.WillRenameFilesRequest=pe.DidCreateFilesNotification=pe.WillCreateFilesRequest=pe.FileOperationPatternKind=void 0;var Xe=he(),ql;(function(t){t.file="file",t.folder="folder"})(ql=pe.FileOperationPatternKind||(pe.FileOperationPatternKind={}));var xl;(function(t){t.method="workspace/willCreateFiles",t.messageDirection=Xe.MessageDirection.clientToServer,t.type=new Xe.ProtocolRequestType(t.method)})(xl=pe.WillCreateFilesRequest||(pe.WillCreateFilesRequest={}));var Ol;(function(t){t.method="workspace/didCreateFiles",t.messageDirection=Xe.MessageDirection.clientToServer,t.type=new Xe.ProtocolNotificationType(t.method)})(Ol=pe.DidCreateFilesNotification||(pe.DidCreateFilesNotification={}));var Al;(function(t){t.method="workspace/willRenameFiles",t.messageDirection=Xe.MessageDirection.clientToServer,t.type=new Xe.ProtocolRequestType(t.method)})(Al=pe.WillRenameFilesRequest||(pe.WillRenameFilesRequest={}));var Ll;(function(t){t.method="workspace/didRenameFiles",t.messageDirection=Xe.MessageDirection.clientToServer,t.type=new Xe.ProtocolNotificationType(t.method)})(Ll=pe.DidRenameFilesNotification||(pe.DidRenameFilesNotification={}));var jl;(function(t){t.method="workspace/didDeleteFiles",t.messageDirection=Xe.MessageDirection.clientToServer,t.type=new Xe.ProtocolNotificationType(t.method)})(jl=pe.DidDeleteFilesNotification||(pe.DidDeleteFilesNotification={}));var Ul;(function(t){t.method="workspace/willDeleteFiles",t.messageDirection=Xe.MessageDirection.clientToServer,t.type=new Xe.ProtocolRequestType(t.method)})(Ul=pe.WillDeleteFilesRequest||(pe.WillDeleteFilesRequest={}))});var Ia=U(_t=>{"use strict";Object.defineProperty(_t,"__esModule",{value:!0});_t.MonikerRequest=_t.MonikerKind=_t.UniquenessLevel=void 0;var Na=he(),Wl;(function(t){t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global"})(Wl=_t.UniquenessLevel||(_t.UniquenessLevel={}));var Hl;(function(t){t.$import="import",t.$export="export",t.local="local"})(Hl=_t.MonikerKind||(_t.MonikerKind={}));var Bl;(function(t){t.method="textDocument/moniker",t.messageDirection=Na.MessageDirection.clientToServer,t.type=new Na.ProtocolRequestType(t.method)})(Bl=_t.MonikerRequest||(_t.MonikerRequest={}))});var ka=U(ft=>{"use strict";Object.defineProperty(ft,"__esModule",{value:!0});ft.TypeHierarchySubtypesRequest=ft.TypeHierarchySupertypesRequest=ft.TypeHierarchyPrepareRequest=void 0;var cn=he(),Vl;(function(t){t.method="textDocument/prepareTypeHierarchy",t.messageDirection=cn.MessageDirection.clientToServer,t.type=new cn.ProtocolRequestType(t.method)})(Vl=ft.TypeHierarchyPrepareRequest||(ft.TypeHierarchyPrepareRequest={}));var zl;(function(t){t.method="typeHierarchy/supertypes",t.messageDirection=cn.MessageDirection.clientToServer,t.type=new cn.ProtocolRequestType(t.method)})(zl=ft.TypeHierarchySupertypesRequest||(ft.TypeHierarchySupertypesRequest={}));var $l;(function(t){t.method="typeHierarchy/subtypes",t.messageDirection=cn.MessageDirection.clientToServer,t.type=new cn.ProtocolRequestType(t.method)})($l=ft.TypeHierarchySubtypesRequest||(ft.TypeHierarchySubtypesRequest={}))});var Fa=U(qt=>{"use strict";Object.defineProperty(qt,"__esModule",{value:!0});qt.InlineValueRefreshRequest=qt.InlineValueRequest=void 0;var gr=he(),Zl;(function(t){t.method="textDocument/inlineValue",t.messageDirection=gr.MessageDirection.clientToServer,t.type=new gr.ProtocolRequestType(t.method)})(Zl=qt.InlineValueRequest||(qt.InlineValueRequest={}));var Gl;(function(t){t.method="workspace/inlineValue/refresh",t.messageDirection=gr.MessageDirection.clientToServer,t.type=new gr.ProtocolRequestType0(t.method)})(Gl=qt.InlineValueRefreshRequest||(qt.InlineValueRefreshRequest={}))});var qa=U(mt=>{"use strict";Object.defineProperty(mt,"__esModule",{value:!0});mt.InlayHintRefreshRequest=mt.InlayHintResolveRequest=mt.InlayHintRequest=void 0;var ln=he(),Kl;(function(t){t.method="textDocument/inlayHint",t.messageDirection=ln.MessageDirection.clientToServer,t.type=new ln.ProtocolRequestType(t.method)})(Kl=mt.InlayHintRequest||(mt.InlayHintRequest={}));var Jl;(function(t){t.method="inlayHint/resolve",t.messageDirection=ln.MessageDirection.clientToServer,t.type=new ln.ProtocolRequestType(t.method)})(Jl=mt.InlayHintResolveRequest||(mt.InlayHintResolveRequest={}));var Yl;(function(t){t.method="workspace/inlayHint/refresh",t.messageDirection=ln.MessageDirection.clientToServer,t.type=new ln.ProtocolRequestType0(t.method)})(Yl=mt.InlayHintRefreshRequest||(mt.InlayHintRefreshRequest={}))});var Oa=U(Ie=>{"use strict";Object.defineProperty(Ie,"__esModule",{value:!0});Ie.DiagnosticRefreshRequest=Ie.WorkspaceDiagnosticRequest=Ie.DocumentDiagnosticRequest=Ie.DocumentDiagnosticReportKind=Ie.DiagnosticServerCancellationData=void 0;var xa=$t(),Ql=_r(),dn=he(),Xl;(function(t){function e(n){let r=n;return r&&Ql.boolean(r.retriggerRequest)}t.is=e})(Xl=Ie.DiagnosticServerCancellationData||(Ie.DiagnosticServerCancellationData={}));var ed;(function(t){t.Full="full",t.Unchanged="unchanged"})(ed=Ie.DocumentDiagnosticReportKind||(Ie.DocumentDiagnosticReportKind={}));var td;(function(t){t.method="textDocument/diagnostic",t.messageDirection=dn.MessageDirection.clientToServer,t.type=new dn.ProtocolRequestType(t.method),t.partialResult=new xa.ProgressType})(td=Ie.DocumentDiagnosticRequest||(Ie.DocumentDiagnosticRequest={}));var nd;(function(t){t.method="workspace/diagnostic",t.messageDirection=dn.MessageDirection.clientToServer,t.type=new dn.ProtocolRequestType(t.method),t.partialResult=new xa.ProgressType})(nd=Ie.WorkspaceDiagnosticRequest||(Ie.WorkspaceDiagnosticRequest={}));var rd;(function(t){t.method="workspace/diagnostic/refresh",t.messageDirection=dn.MessageDirection.clientToServer,t.type=new dn.ProtocolRequestType0(t.method)})(rd=Ie.DiagnosticRefreshRequest||(Ie.DiagnosticRefreshRequest={}))});var ja=U(ne=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});ne.DidCloseNotebookDocumentNotification=ne.DidSaveNotebookDocumentNotification=ne.DidChangeNotebookDocumentNotification=ne.NotebookCellArrayChange=ne.DidOpenNotebookDocumentNotification=ne.NotebookDocumentSyncRegistrationType=ne.NotebookDocument=ne.NotebookCell=ne.ExecutionSummary=ne.NotebookCellKind=void 0;var xn=dr(),ht=_r(),bt=he(),Aa;(function(t){t.Markup=1,t.Code=2;function e(n){return n===1||n===2}t.is=e})(Aa=ne.NotebookCellKind||(ne.NotebookCellKind={}));var La;(function(t){function e(i,o){let u={executionOrder:i};return(o===!0||o===!1)&&(u.success=o),u}t.create=e;function n(i){let o=i;return ht.objectLiteral(o)&&xn.uinteger.is(o.executionOrder)&&(o.success===void 0||ht.boolean(o.success))}t.is=n;function r(i,o){return i===o?!0:i==null||o===null||o===void 0?!1:i.executionOrder===o.executionOrder&&i.success===o.success}t.equals=r})(La=ne.ExecutionSummary||(ne.ExecutionSummary={}));var Bo;(function(t){function e(o,u){return{kind:o,document:u}}t.create=e;function n(o){let u=o;return ht.objectLiteral(u)&&Aa.is(u.kind)&&xn.DocumentUri.is(u.document)&&(u.metadata===void 0||ht.objectLiteral(u.metadata))}t.is=n;function r(o,u){let l=new Set;return o.document!==u.document&&l.add("document"),o.kind!==u.kind&&l.add("kind"),o.executionSummary!==u.executionSummary&&l.add("executionSummary"),(o.metadata!==void 0||u.metadata!==void 0)&&!i(o.metadata,u.metadata)&&l.add("metadata"),(o.executionSummary!==void 0||u.executionSummary!==void 0)&&!La.equals(o.executionSummary,u.executionSummary)&&l.add("executionSummary"),l}t.diff=r;function i(o,u){if(o===u)return!0;if(o==null||u===null||u===void 0||typeof o!=typeof u||typeof o!="object")return!1;let l=Array.isArray(o),d=Array.isArray(u);if(l!==d)return!1;if(l&&d){if(o.length!==u.length)return!1;for(let f=0;f<o.length;f++)if(!i(o[f],u[f]))return!1}if(ht.objectLiteral(o)&&ht.objectLiteral(u)){let f=Object.keys(o),p=Object.keys(u);if(f.length!==p.length||(f.sort(),p.sort(),!i(f,p)))return!1;for(let v=0;v<f.length;v++){let w=f[v];if(!i(o[w],u[w]))return!1}}return!0}})(Bo=ne.NotebookCell||(ne.NotebookCell={}));var id;(function(t){function e(r,i,o,u){return{uri:r,notebookType:i,version:o,cells:u}}t.create=e;function n(r){let i=r;return ht.objectLiteral(i)&&ht.string(i.uri)&&xn.integer.is(i.version)&&ht.typedArray(i.cells,Bo.is)}t.is=n})(id=ne.NotebookDocument||(ne.NotebookDocument={}));var On;(function(t){t.method="notebookDocument/sync",t.messageDirection=bt.MessageDirection.clientToServer,t.type=new bt.RegistrationType(t.method)})(On=ne.NotebookDocumentSyncRegistrationType||(ne.NotebookDocumentSyncRegistrationType={}));var od;(function(t){t.method="notebookDocument/didOpen",t.messageDirection=bt.MessageDirection.clientToServer,t.type=new bt.ProtocolNotificationType(t.method),t.registrationMethod=On.method})(od=ne.DidOpenNotebookDocumentNotification||(ne.DidOpenNotebookDocumentNotification={}));var sd;(function(t){function e(r){let i=r;return ht.objectLiteral(i)&&xn.uinteger.is(i.start)&&xn.uinteger.is(i.deleteCount)&&(i.cells===void 0||ht.typedArray(i.cells,Bo.is))}t.is=e;function n(r,i,o){let u={start:r,deleteCount:i};return o!==void 0&&(u.cells=o),u}t.create=n})(sd=ne.NotebookCellArrayChange||(ne.NotebookCellArrayChange={}));var ad;(function(t){t.method="notebookDocument/didChange",t.messageDirection=bt.MessageDirection.clientToServer,t.type=new bt.ProtocolNotificationType(t.method),t.registrationMethod=On.method})(ad=ne.DidChangeNotebookDocumentNotification||(ne.DidChangeNotebookDocumentNotification={}));var ud;(function(t){t.method="notebookDocument/didSave",t.messageDirection=bt.MessageDirection.clientToServer,t.type=new bt.ProtocolNotificationType(t.method),t.registrationMethod=On.method})(ud=ne.DidSaveNotebookDocumentNotification||(ne.DidSaveNotebookDocumentNotification={}));var cd;(function(t){t.method="notebookDocument/didClose",t.messageDirection=bt.MessageDirection.clientToServer,t.type=new bt.ProtocolNotificationType(t.method),t.registrationMethod=On.method})(cd=ne.DidCloseNotebookDocumentNotification||(ne.DidCloseNotebookDocumentNotification={}))});var Ga=U(c=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});c.WorkspaceSymbolRequest=c.CodeActionResolveRequest=c.CodeActionRequest=c.DocumentSymbolRequest=c.DocumentHighlightRequest=c.ReferencesRequest=c.DefinitionRequest=c.SignatureHelpRequest=c.SignatureHelpTriggerKind=c.HoverRequest=c.CompletionResolveRequest=c.CompletionRequest=c.CompletionTriggerKind=c.PublishDiagnosticsNotification=c.WatchKind=c.RelativePattern=c.FileChangeType=c.DidChangeWatchedFilesNotification=c.WillSaveTextDocumentWaitUntilRequest=c.WillSaveTextDocumentNotification=c.TextDocumentSaveReason=c.DidSaveTextDocumentNotification=c.DidCloseTextDocumentNotification=c.DidChangeTextDocumentNotification=c.TextDocumentContentChangeEvent=c.DidOpenTextDocumentNotification=c.TextDocumentSyncKind=c.TelemetryEventNotification=c.LogMessageNotification=c.ShowMessageRequest=c.ShowMessageNotification=c.MessageType=c.DidChangeConfigurationNotification=c.ExitNotification=c.ShutdownRequest=c.InitializedNotification=c.InitializeErrorCodes=c.InitializeRequest=c.WorkDoneProgressOptions=c.TextDocumentRegistrationOptions=c.StaticRegistrationOptions=c.PositionEncodingKind=c.FailureHandlingKind=c.ResourceOperationKind=c.UnregistrationRequest=c.RegistrationRequest=c.DocumentSelector=c.NotebookCellTextDocumentFilter=c.NotebookDocumentFilter=c.TextDocumentFilter=void 0;c.TypeHierarchySubtypesRequest=c.TypeHierarchyPrepareRequest=c.MonikerRequest=c.MonikerKind=c.UniquenessLevel=c.WillDeleteFilesRequest=c.DidDeleteFilesNotification=c.WillRenameFilesRequest=c.DidRenameFilesNotification=c.WillCreateFilesRequest=c.DidCreateFilesNotification=c.FileOperationPatternKind=c.LinkedEditingRangeRequest=c.ShowDocumentRequest=c.SemanticTokensRegistrationType=c.SemanticTokensRefreshRequest=c.SemanticTokensRangeRequest=c.SemanticTokensDeltaRequest=c.SemanticTokensRequest=c.TokenFormat=c.CallHierarchyPrepareRequest=c.CallHierarchyOutgoingCallsRequest=c.CallHierarchyIncomingCallsRequest=c.WorkDoneProgressCancelNotification=c.WorkDoneProgressCreateRequest=c.WorkDoneProgress=c.SelectionRangeRequest=c.DeclarationRequest=c.FoldingRangeRequest=c.ColorPresentationRequest=c.DocumentColorRequest=c.ConfigurationRequest=c.DidChangeWorkspaceFoldersNotification=c.WorkspaceFoldersRequest=c.TypeDefinitionRequest=c.ImplementationRequest=c.ApplyWorkspaceEditRequest=c.ExecuteCommandRequest=c.PrepareRenameRequest=c.RenameRequest=c.PrepareSupportDefaultBehavior=c.DocumentOnTypeFormattingRequest=c.DocumentRangeFormattingRequest=c.DocumentFormattingRequest=c.DocumentLinkResolveRequest=c.DocumentLinkRequest=c.CodeLensRefreshRequest=c.CodeLensResolveRequest=c.CodeLensRequest=c.WorkspaceSymbolResolveRequest=void 0;c.DidCloseNotebookDocumentNotification=c.DidSaveNotebookDocumentNotification=c.DidChangeNotebookDocumentNotification=c.NotebookCellArrayChange=c.DidOpenNotebookDocumentNotification=c.NotebookDocumentSyncRegistrationType=c.NotebookDocument=c.NotebookCell=c.ExecutionSummary=c.NotebookCellKind=c.DiagnosticRefreshRequest=c.WorkspaceDiagnosticRequest=c.DocumentDiagnosticRequest=c.DocumentDiagnosticReportKind=c.DiagnosticServerCancellationData=c.InlayHintRefreshRequest=c.InlayHintResolveRequest=c.InlayHintRequest=c.InlineValueRefreshRequest=c.InlineValueRequest=c.TypeHierarchySupertypesRequest=void 0;var O=he(),Ua=dr(),ke=_r(),ld=ca();Object.defineProperty(c,"ImplementationRequest",{enumerable:!0,get:function(){return ld.ImplementationRequest}});var dd=da();Object.defineProperty(c,"TypeDefinitionRequest",{enumerable:!0,get:function(){return dd.TypeDefinitionRequest}});var Wa=_a();Object.defineProperty(c,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return Wa.WorkspaceFoldersRequest}});Object.defineProperty(c,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return Wa.DidChangeWorkspaceFoldersNotification}});var _d=ma();Object.defineProperty(c,"ConfigurationRequest",{enumerable:!0,get:function(){return _d.ConfigurationRequest}});var Ha=ha();Object.defineProperty(c,"DocumentColorRequest",{enumerable:!0,get:function(){return Ha.DocumentColorRequest}});Object.defineProperty(c,"ColorPresentationRequest",{enumerable:!0,get:function(){return Ha.ColorPresentationRequest}});var fd=ga();Object.defineProperty(c,"FoldingRangeRequest",{enumerable:!0,get:function(){return fd.FoldingRangeRequest}});var md=ba();Object.defineProperty(c,"DeclarationRequest",{enumerable:!0,get:function(){return md.DeclarationRequest}});var hd=wa();Object.defineProperty(c,"SelectionRangeRequest",{enumerable:!0,get:function(){return hd.SelectionRangeRequest}});var Vo=Ta();Object.defineProperty(c,"WorkDoneProgress",{enumerable:!0,get:function(){return Vo.WorkDoneProgress}});Object.defineProperty(c,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return Vo.WorkDoneProgressCreateRequest}});Object.defineProperty(c,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return Vo.WorkDoneProgressCancelNotification}});var zo=Ra();Object.defineProperty(c,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return zo.CallHierarchyIncomingCallsRequest}});Object.defineProperty(c,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return zo.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(c,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return zo.CallHierarchyPrepareRequest}});var _n=Ea();Object.defineProperty(c,"TokenFormat",{enumerable:!0,get:function(){return _n.TokenFormat}});Object.defineProperty(c,"SemanticTokensRequest",{enumerable:!0,get:function(){return _n.SemanticTokensRequest}});Object.defineProperty(c,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return _n.SemanticTokensDeltaRequest}});Object.defineProperty(c,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return _n.SemanticTokensRangeRequest}});Object.defineProperty(c,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return _n.SemanticTokensRefreshRequest}});Object.defineProperty(c,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return _n.SemanticTokensRegistrationType}});var pd=Sa();Object.defineProperty(c,"ShowDocumentRequest",{enumerable:!0,get:function(){return pd.ShowDocumentRequest}});var gd=Ma();Object.defineProperty(c,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return gd.LinkedEditingRangeRequest}});var Zt=Ca();Object.defineProperty(c,"FileOperationPatternKind",{enumerable:!0,get:function(){return Zt.FileOperationPatternKind}});Object.defineProperty(c,"DidCreateFilesNotification",{enumerable:!0,get:function(){return Zt.DidCreateFilesNotification}});Object.defineProperty(c,"WillCreateFilesRequest",{enumerable:!0,get:function(){return Zt.WillCreateFilesRequest}});Object.defineProperty(c,"DidRenameFilesNotification",{enumerable:!0,get:function(){return Zt.DidRenameFilesNotification}});Object.defineProperty(c,"WillRenameFilesRequest",{enumerable:!0,get:function(){return Zt.WillRenameFilesRequest}});Object.defineProperty(c,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return Zt.DidDeleteFilesNotification}});Object.defineProperty(c,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return Zt.WillDeleteFilesRequest}});var $o=Ia();Object.defineProperty(c,"UniquenessLevel",{enumerable:!0,get:function(){return $o.UniquenessLevel}});Object.defineProperty(c,"MonikerKind",{enumerable:!0,get:function(){return $o.MonikerKind}});Object.defineProperty(c,"MonikerRequest",{enumerable:!0,get:function(){return $o.MonikerRequest}});var Zo=ka();Object.defineProperty(c,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return Zo.TypeHierarchyPrepareRequest}});Object.defineProperty(c,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return Zo.TypeHierarchySubtypesRequest}});Object.defineProperty(c,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return Zo.TypeHierarchySupertypesRequest}});var Ba=Fa();Object.defineProperty(c,"InlineValueRequest",{enumerable:!0,get:function(){return Ba.InlineValueRequest}});Object.defineProperty(c,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return Ba.InlineValueRefreshRequest}});var Go=qa();Object.defineProperty(c,"InlayHintRequest",{enumerable:!0,get:function(){return Go.InlayHintRequest}});Object.defineProperty(c,"InlayHintResolveRequest",{enumerable:!0,get:function(){return Go.InlayHintResolveRequest}});Object.defineProperty(c,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return Go.InlayHintRefreshRequest}});var An=Oa();Object.defineProperty(c,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return An.DiagnosticServerCancellationData}});Object.defineProperty(c,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return An.DocumentDiagnosticReportKind}});Object.defineProperty(c,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return An.DocumentDiagnosticRequest}});Object.defineProperty(c,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return An.WorkspaceDiagnosticRequest}});Object.defineProperty(c,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return An.DiagnosticRefreshRequest}});var vt=ja();Object.defineProperty(c,"NotebookCellKind",{enumerable:!0,get:function(){return vt.NotebookCellKind}});Object.defineProperty(c,"ExecutionSummary",{enumerable:!0,get:function(){return vt.ExecutionSummary}});Object.defineProperty(c,"NotebookCell",{enumerable:!0,get:function(){return vt.NotebookCell}});Object.defineProperty(c,"NotebookDocument",{enumerable:!0,get:function(){return vt.NotebookDocument}});Object.defineProperty(c,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return vt.NotebookDocumentSyncRegistrationType}});Object.defineProperty(c,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return vt.DidOpenNotebookDocumentNotification}});Object.defineProperty(c,"NotebookCellArrayChange",{enumerable:!0,get:function(){return vt.NotebookCellArrayChange}});Object.defineProperty(c,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return vt.DidChangeNotebookDocumentNotification}});Object.defineProperty(c,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return vt.DidSaveNotebookDocumentNotification}});Object.defineProperty(c,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return vt.DidCloseNotebookDocumentNotification}});var Va;(function(t){function e(n){let r=n;return ke.string(r.language)||ke.string(r.scheme)||ke.string(r.pattern)}t.is=e})(Va=c.TextDocumentFilter||(c.TextDocumentFilter={}));var za;(function(t){function e(n){let r=n;return ke.objectLiteral(r)&&(ke.string(r.notebookType)||ke.string(r.scheme)||ke.string(r.pattern))}t.is=e})(za=c.NotebookDocumentFilter||(c.NotebookDocumentFilter={}));var $a;(function(t){function e(n){let r=n;return ke.objectLiteral(r)&&(ke.string(r.notebook)||za.is(r.notebook))&&(r.language===void 0||ke.string(r.language))}t.is=e})($a=c.NotebookCellTextDocumentFilter||(c.NotebookCellTextDocumentFilter={}));var Za;(function(t){function e(n){if(!Array.isArray(n))return!1;for(let r of n)if(!ke.string(r)&&!Va.is(r)&&!$a.is(r))return!1;return!0}t.is=e})(Za=c.DocumentSelector||(c.DocumentSelector={}));var yd;(function(t){t.method="client/registerCapability",t.messageDirection=O.MessageDirection.serverToClient,t.type=new O.ProtocolRequestType(t.method)})(yd=c.RegistrationRequest||(c.RegistrationRequest={}));var bd;(function(t){t.method="client/unregisterCapability",t.messageDirection=O.MessageDirection.serverToClient,t.type=new O.ProtocolRequestType(t.method)})(bd=c.UnregistrationRequest||(c.UnregistrationRequest={}));var vd;(function(t){t.Create="create",t.Rename="rename",t.Delete="delete"})(vd=c.ResourceOperationKind||(c.ResourceOperationKind={}));var wd;(function(t){t.Abort="abort",t.Transactional="transactional",t.TextOnlyTransactional="textOnlyTransactional",t.Undo="undo"})(wd=c.FailureHandlingKind||(c.FailureHandlingKind={}));var Td;(function(t){t.UTF8="utf-8",t.UTF16="utf-16",t.UTF32="utf-32"})(Td=c.PositionEncodingKind||(c.PositionEncodingKind={}));var Rd;(function(t){function e(n){let r=n;return r&&ke.string(r.id)&&r.id.length>0}t.hasId=e})(Rd=c.StaticRegistrationOptions||(c.StaticRegistrationOptions={}));var Ed;(function(t){function e(n){let r=n;return r&&(r.documentSelector===null||Za.is(r.documentSelector))}t.is=e})(Ed=c.TextDocumentRegistrationOptions||(c.TextDocumentRegistrationOptions={}));var Dd;(function(t){function e(r){let i=r;return ke.objectLiteral(i)&&(i.workDoneProgress===void 0||ke.boolean(i.workDoneProgress))}t.is=e;function n(r){let i=r;return i&&ke.boolean(i.workDoneProgress)}t.hasWorkDoneProgress=n})(Dd=c.WorkDoneProgressOptions||(c.WorkDoneProgressOptions={}));var Sd;(function(t){t.method="initialize",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(Sd=c.InitializeRequest||(c.InitializeRequest={}));var Pd;(function(t){t.unknownProtocolVersion=1})(Pd=c.InitializeErrorCodes||(c.InitializeErrorCodes={}));var Md;(function(t){t.method="initialized",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolNotificationType(t.method)})(Md=c.InitializedNotification||(c.InitializedNotification={}));var Cd;(function(t){t.method="shutdown",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType0(t.method)})(Cd=c.ShutdownRequest||(c.ShutdownRequest={}));var Nd;(function(t){t.method="exit",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolNotificationType0(t.method)})(Nd=c.ExitNotification||(c.ExitNotification={}));var Id;(function(t){t.method="workspace/didChangeConfiguration",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolNotificationType(t.method)})(Id=c.DidChangeConfigurationNotification||(c.DidChangeConfigurationNotification={}));var kd;(function(t){t.Error=1,t.Warning=2,t.Info=3,t.Log=4})(kd=c.MessageType||(c.MessageType={}));var Fd;(function(t){t.method="window/showMessage",t.messageDirection=O.MessageDirection.serverToClient,t.type=new O.ProtocolNotificationType(t.method)})(Fd=c.ShowMessageNotification||(c.ShowMessageNotification={}));var qd;(function(t){t.method="window/showMessageRequest",t.messageDirection=O.MessageDirection.serverToClient,t.type=new O.ProtocolRequestType(t.method)})(qd=c.ShowMessageRequest||(c.ShowMessageRequest={}));var xd;(function(t){t.method="window/logMessage",t.messageDirection=O.MessageDirection.serverToClient,t.type=new O.ProtocolNotificationType(t.method)})(xd=c.LogMessageNotification||(c.LogMessageNotification={}));var Od;(function(t){t.method="telemetry/event",t.messageDirection=O.MessageDirection.serverToClient,t.type=new O.ProtocolNotificationType(t.method)})(Od=c.TelemetryEventNotification||(c.TelemetryEventNotification={}));var Ad;(function(t){t.None=0,t.Full=1,t.Incremental=2})(Ad=c.TextDocumentSyncKind||(c.TextDocumentSyncKind={}));var Ld;(function(t){t.method="textDocument/didOpen",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolNotificationType(t.method)})(Ld=c.DidOpenTextDocumentNotification||(c.DidOpenTextDocumentNotification={}));var jd;(function(t){function e(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}t.isIncremental=e;function n(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}t.isFull=n})(jd=c.TextDocumentContentChangeEvent||(c.TextDocumentContentChangeEvent={}));var Ud;(function(t){t.method="textDocument/didChange",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolNotificationType(t.method)})(Ud=c.DidChangeTextDocumentNotification||(c.DidChangeTextDocumentNotification={}));var Wd;(function(t){t.method="textDocument/didClose",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolNotificationType(t.method)})(Wd=c.DidCloseTextDocumentNotification||(c.DidCloseTextDocumentNotification={}));var Hd;(function(t){t.method="textDocument/didSave",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolNotificationType(t.method)})(Hd=c.DidSaveTextDocumentNotification||(c.DidSaveTextDocumentNotification={}));var Bd;(function(t){t.Manual=1,t.AfterDelay=2,t.FocusOut=3})(Bd=c.TextDocumentSaveReason||(c.TextDocumentSaveReason={}));var Vd;(function(t){t.method="textDocument/willSave",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolNotificationType(t.method)})(Vd=c.WillSaveTextDocumentNotification||(c.WillSaveTextDocumentNotification={}));var zd;(function(t){t.method="textDocument/willSaveWaitUntil",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(zd=c.WillSaveTextDocumentWaitUntilRequest||(c.WillSaveTextDocumentWaitUntilRequest={}));var $d;(function(t){t.method="workspace/didChangeWatchedFiles",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolNotificationType(t.method)})($d=c.DidChangeWatchedFilesNotification||(c.DidChangeWatchedFilesNotification={}));var Zd;(function(t){t.Created=1,t.Changed=2,t.Deleted=3})(Zd=c.FileChangeType||(c.FileChangeType={}));var Gd;(function(t){function e(n){let r=n;return ke.objectLiteral(r)&&(Ua.URI.is(r.baseUri)||Ua.WorkspaceFolder.is(r.baseUri))&&ke.string(r.pattern)}t.is=e})(Gd=c.RelativePattern||(c.RelativePattern={}));var Kd;(function(t){t.Create=1,t.Change=2,t.Delete=4})(Kd=c.WatchKind||(c.WatchKind={}));var Jd;(function(t){t.method="textDocument/publishDiagnostics",t.messageDirection=O.MessageDirection.serverToClient,t.type=new O.ProtocolNotificationType(t.method)})(Jd=c.PublishDiagnosticsNotification||(c.PublishDiagnosticsNotification={}));var Yd;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.TriggerForIncompleteCompletions=3})(Yd=c.CompletionTriggerKind||(c.CompletionTriggerKind={}));var Qd;(function(t){t.method="textDocument/completion",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(Qd=c.CompletionRequest||(c.CompletionRequest={}));var Xd;(function(t){t.method="completionItem/resolve",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(Xd=c.CompletionResolveRequest||(c.CompletionResolveRequest={}));var e_;(function(t){t.method="textDocument/hover",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(e_=c.HoverRequest||(c.HoverRequest={}));var t_;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.ContentChange=3})(t_=c.SignatureHelpTriggerKind||(c.SignatureHelpTriggerKind={}));var n_;(function(t){t.method="textDocument/signatureHelp",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(n_=c.SignatureHelpRequest||(c.SignatureHelpRequest={}));var r_;(function(t){t.method="textDocument/definition",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(r_=c.DefinitionRequest||(c.DefinitionRequest={}));var i_;(function(t){t.method="textDocument/references",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(i_=c.ReferencesRequest||(c.ReferencesRequest={}));var o_;(function(t){t.method="textDocument/documentHighlight",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(o_=c.DocumentHighlightRequest||(c.DocumentHighlightRequest={}));var s_;(function(t){t.method="textDocument/documentSymbol",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(s_=c.DocumentSymbolRequest||(c.DocumentSymbolRequest={}));var a_;(function(t){t.method="textDocument/codeAction",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(a_=c.CodeActionRequest||(c.CodeActionRequest={}));var u_;(function(t){t.method="codeAction/resolve",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(u_=c.CodeActionResolveRequest||(c.CodeActionResolveRequest={}));var c_;(function(t){t.method="workspace/symbol",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(c_=c.WorkspaceSymbolRequest||(c.WorkspaceSymbolRequest={}));var l_;(function(t){t.method="workspaceSymbol/resolve",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(l_=c.WorkspaceSymbolResolveRequest||(c.WorkspaceSymbolResolveRequest={}));var d_;(function(t){t.method="textDocument/codeLens",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(d_=c.CodeLensRequest||(c.CodeLensRequest={}));var __;(function(t){t.method="codeLens/resolve",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(__=c.CodeLensResolveRequest||(c.CodeLensResolveRequest={}));var f_;(function(t){t.method="workspace/codeLens/refresh",t.messageDirection=O.MessageDirection.serverToClient,t.type=new O.ProtocolRequestType0(t.method)})(f_=c.CodeLensRefreshRequest||(c.CodeLensRefreshRequest={}));var m_;(function(t){t.method="textDocument/documentLink",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(m_=c.DocumentLinkRequest||(c.DocumentLinkRequest={}));var h_;(function(t){t.method="documentLink/resolve",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(h_=c.DocumentLinkResolveRequest||(c.DocumentLinkResolveRequest={}));var p_;(function(t){t.method="textDocument/formatting",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(p_=c.DocumentFormattingRequest||(c.DocumentFormattingRequest={}));var g_;(function(t){t.method="textDocument/rangeFormatting",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(g_=c.DocumentRangeFormattingRequest||(c.DocumentRangeFormattingRequest={}));var y_;(function(t){t.method="textDocument/onTypeFormatting",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(y_=c.DocumentOnTypeFormattingRequest||(c.DocumentOnTypeFormattingRequest={}));var b_;(function(t){t.Identifier=1})(b_=c.PrepareSupportDefaultBehavior||(c.PrepareSupportDefaultBehavior={}));var v_;(function(t){t.method="textDocument/rename",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(v_=c.RenameRequest||(c.RenameRequest={}));var w_;(function(t){t.method="textDocument/prepareRename",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(w_=c.PrepareRenameRequest||(c.PrepareRenameRequest={}));var T_;(function(t){t.method="workspace/executeCommand",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(T_=c.ExecuteCommandRequest||(c.ExecuteCommandRequest={}));var R_;(function(t){t.method="workspace/applyEdit",t.messageDirection=O.MessageDirection.serverToClient,t.type=new O.ProtocolRequestType("workspace/applyEdit")})(R_=c.ApplyWorkspaceEditRequest||(c.ApplyWorkspaceEditRequest={}))});var Ja=U(yr=>{"use strict";Object.defineProperty(yr,"__esModule",{value:!0});yr.createProtocolConnection=void 0;var Ka=$t();function E_(t,e,n,r){return Ka.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,Ka.createMessageConnection)(t,e,n,r)}yr.createProtocolConnection=E_});var Ya=U(We=>{"use strict";var D_=We&&We.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),br=We&&We.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&D_(e,t,n)};Object.defineProperty(We,"__esModule",{value:!0});We.LSPErrorCodes=We.createProtocolConnection=void 0;br($t(),We);br(dr(),We);br(he(),We);br(Ga(),We);var S_=Ja();Object.defineProperty(We,"createProtocolConnection",{enumerable:!0,get:function(){return S_.createProtocolConnection}});var P_;(function(t){t.lspReservedErrorRangeStart=-32899,t.RequestFailed=-32803,t.ServerCancelled=-32802,t.ContentModified=-32801,t.RequestCancelled=-32800,t.lspReservedErrorRangeEnd=-32800})(P_=We.LSPErrorCodes||(We.LSPErrorCodes={}))});var Me=U(wt=>{"use strict";var M_=wt&&wt.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Qa=wt&&wt.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&M_(e,t,n)};Object.defineProperty(wt,"__esModule",{value:!0});wt.createProtocolConnection=void 0;var C_=Ao();Qa(Ao(),wt);Qa(Ya(),wt);function N_(t,e,n,r){return(0,C_.createMessageConnection)(t,e,n,r)}wt.createProtocolConnection=N_});var Ko=U(et=>{"use strict";Object.defineProperty(et,"__esModule",{value:!0});et.generateUuid=et.parse=et.isUUID=et.v4=et.empty=void 0;var Ln=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},jn=class t extends Ln{constructor(){super([t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-","4",t._randomHex(),t._randomHex(),t._randomHex(),"-",t._oneOf(t._timeHighBits),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return t._oneOf(t._chars)}};jn._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];jn._timeHighBits=["8","9","a","b"];et.empty=new Ln("00000000-0000-0000-0000-000000000000");function Xa(){return new jn}et.v4=Xa;var I_=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function eu(t){return I_.test(t)}et.isUUID=eu;function k_(t){if(!eu(t))throw new Error("invalid uuid");return new Ln(t)}et.parse=k_;function F_(){return Xa().asHex()}et.generateUuid=F_});var tu=U(Ot=>{"use strict";Object.defineProperty(Ot,"__esModule",{value:!0});Ot.attachPartialResult=Ot.ProgressFeature=Ot.attachWorkDone=void 0;var xt=Me(),q_=Ko(),Gt=class t{constructor(e,n){this._connection=e,this._token=n,t.Instances.set(this._token,this)}begin(e,n,r,i){let o={kind:"begin",title:e,percentage:n,message:r,cancellable:i};this._connection.sendProgress(xt.WorkDoneProgress.type,this._token,o)}report(e,n){let r={kind:"report"};typeof e=="number"?(r.percentage=e,n!==void 0&&(r.message=n)):r.message=e,this._connection.sendProgress(xt.WorkDoneProgress.type,this._token,r)}done(){t.Instances.delete(this._token),this._connection.sendProgress(xt.WorkDoneProgress.type,this._token,{kind:"end"})}};Gt.Instances=new Map;var vr=class extends Gt{constructor(e,n){super(e,n),this._source=new xt.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}},Un=class{constructor(){}begin(){}report(){}done(){}},wr=class extends Un{constructor(){super(),this._source=new xt.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}};function x_(t,e){if(e===void 0||e.workDoneToken===void 0)return new Un;let n=e.workDoneToken;return delete e.workDoneToken,new Gt(t,n)}Ot.attachWorkDone=x_;var O_=t=>class extends t{constructor(){super(),this._progressSupported=!1}initialize(e){var n;super.initialize(e),((n=e==null?void 0:e.window)==null?void 0:n.workDoneProgress)===!0&&(this._progressSupported=!0,this.connection.onNotification(xt.WorkDoneProgressCancelNotification.type,r=>{let i=Gt.Instances.get(r.token);(i instanceof vr||i instanceof wr)&&i.cancel()}))}attachWorkDoneProgress(e){return e===void 0?new Un:new Gt(this.connection,e)}createWorkDoneProgress(){if(this._progressSupported){let e=(0,q_.generateUuid)();return this.connection.sendRequest(xt.WorkDoneProgressCreateRequest.type,{token:e}).then(()=>new vr(this.connection,e))}else return Promise.resolve(new wr)}};Ot.ProgressFeature=O_;var Jo;(function(t){t.type=new xt.ProgressType})(Jo||(Jo={}));var Yo=class{constructor(e,n){this._connection=e,this._token=n}report(e){this._connection.sendProgress(Jo.type,this._token,e)}};function A_(t,e){if(e===void 0||e.partialResultToken===void 0)return;let n=e.partialResultToken;return delete e.partialResultToken,new Yo(t,n)}Ot.attachPartialResult=A_});var nu=U(Tr=>{"use strict";Object.defineProperty(Tr,"__esModule",{value:!0});Tr.ConfigurationFeature=void 0;var L_=Me(),j_=Yn(),U_=t=>class extends t{getConfiguration(e){return e?j_.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let n={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest(L_.ConfigurationRequest.type,n).then(r=>Array.isArray(r)?Array.isArray(e)?r:r[0]:Array.isArray(e)?[]:null)}};Tr.ConfigurationFeature=U_});var ru=U(Er=>{"use strict";Object.defineProperty(Er,"__esModule",{value:!0});Er.WorkspaceFoldersFeature=void 0;var Rr=Me(),W_=t=>class extends t{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(e){super.initialize(e);let n=e.workspace;n&&n.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new Rr.Emitter,this.connection.onNotification(Rr.DidChangeWorkspaceFoldersNotification.type,r=>{this._onDidChangeWorkspaceFolders.fire(r.event)}))}fillServerCapabilities(e){var r,i;super.fillServerCapabilities(e);let n=(i=(r=e.workspace)==null?void 0:r.workspaceFolders)==null?void 0:i.changeNotifications;this._notificationIsAutoRegistered=n===!0||typeof n=="string"}getWorkspaceFolders(){return this.connection.sendRequest(Rr.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return!this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register(Rr.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}};Er.WorkspaceFoldersFeature=W_});var iu=U(Dr=>{"use strict";Object.defineProperty(Dr,"__esModule",{value:!0});Dr.CallHierarchyFeature=void 0;var Qo=Me(),H_=t=>class extends t{get callHierarchy(){return{onPrepare:e=>this.connection.onRequest(Qo.CallHierarchyPrepareRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),void 0)),onIncomingCalls:e=>{let n=Qo.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onOutgoingCalls:e=>{let n=Qo.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};Dr.CallHierarchyFeature=H_});var es=U(At=>{"use strict";Object.defineProperty(At,"__esModule",{value:!0});At.SemanticTokensBuilder=At.SemanticTokensDiff=At.SemanticTokensFeature=void 0;var Sr=Me(),B_=t=>class extends t{get semanticTokens(){return{refresh:()=>this.connection.sendRequest(Sr.SemanticTokensRefreshRequest.type),on:e=>{let n=Sr.SemanticTokensRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onDelta:e=>{let n=Sr.SemanticTokensDeltaRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onRange:e=>{let n=Sr.SemanticTokensRangeRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};At.SemanticTokensFeature=B_;var Pr=class{constructor(e,n){this.originalSequence=e,this.modifiedSequence=n}computeDiff(){let e=this.originalSequence.length,n=this.modifiedSequence.length,r=0;for(;r<n&&r<e&&this.originalSequence[r]===this.modifiedSequence[r];)r++;if(r<n&&r<e){let i=e-1,o=n-1;for(;i>=r&&o>=r&&this.originalSequence[i]===this.modifiedSequence[o];)i--,o--;(i<r||o<r)&&(i++,o++);let u=i-r+1,l=this.modifiedSequence.slice(r,o+1);return l.length===1&&l[0]===this.originalSequence[i]?[{start:r,deleteCount:u-1}]:[{start:r,deleteCount:u,data:l}]}else return r<n?[{start:r,deleteCount:0,data:this.modifiedSequence.slice(r)}]:r<e?[{start:r,deleteCount:e-r}]:[]}};At.SemanticTokensDiff=Pr;var Xo=class{constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(e,n,r,i,o){let u=e,l=n;this._dataLen>0&&(u-=this._prevLine,u===0&&(l-=this._prevChar)),this._data[this._dataLen++]=u,this._data[this._dataLen++]=l,this._data[this._dataLen++]=r,this._data[this._dataLen++]=i,this._data[this._dataLen++]=o,this._prevLine=e,this._prevChar=n}get id(){return this._id.toString()}previousResult(e){this.id===e&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){return this._prevData!==void 0?{resultId:this.id,edits:new Pr(this._prevData,this._data).computeDiff()}:this.build()}};At.SemanticTokensBuilder=Xo});var ou=U(Mr=>{"use strict";Object.defineProperty(Mr,"__esModule",{value:!0});Mr.ShowDocumentFeature=void 0;var V_=Me(),z_=t=>class extends t{showDocument(e){return this.connection.sendRequest(V_.ShowDocumentRequest.type,e)}};Mr.ShowDocumentFeature=z_});var su=U(Cr=>{"use strict";Object.defineProperty(Cr,"__esModule",{value:!0});Cr.FileOperationsFeature=void 0;var fn=Me(),$_=t=>class extends t{onDidCreateFiles(e){return this.connection.onNotification(fn.DidCreateFilesNotification.type,n=>{e(n)})}onDidRenameFiles(e){return this.connection.onNotification(fn.DidRenameFilesNotification.type,n=>{e(n)})}onDidDeleteFiles(e){return this.connection.onNotification(fn.DidDeleteFilesNotification.type,n=>{e(n)})}onWillCreateFiles(e){return this.connection.onRequest(fn.WillCreateFilesRequest.type,(n,r)=>e(n,r))}onWillRenameFiles(e){return this.connection.onRequest(fn.WillRenameFilesRequest.type,(n,r)=>e(n,r))}onWillDeleteFiles(e){return this.connection.onRequest(fn.WillDeleteFilesRequest.type,(n,r)=>e(n,r))}};Cr.FileOperationsFeature=$_});var au=U(Nr=>{"use strict";Object.defineProperty(Nr,"__esModule",{value:!0});Nr.LinkedEditingRangeFeature=void 0;var Z_=Me(),G_=t=>class extends t{onLinkedEditingRange(e){return this.connection.onRequest(Z_.LinkedEditingRangeRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),void 0))}};Nr.LinkedEditingRangeFeature=G_});var uu=U(Ir=>{"use strict";Object.defineProperty(Ir,"__esModule",{value:!0});Ir.TypeHierarchyFeature=void 0;var ts=Me(),K_=t=>class extends t{get typeHierarchy(){return{onPrepare:e=>this.connection.onRequest(ts.TypeHierarchyPrepareRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),void 0)),onSupertypes:e=>{let n=ts.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onSubtypes:e=>{let n=ts.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};Ir.TypeHierarchyFeature=K_});var lu=U(kr=>{"use strict";Object.defineProperty(kr,"__esModule",{value:!0});kr.InlineValueFeature=void 0;var cu=Me(),J_=t=>class extends t{get inlineValue(){return{refresh:()=>this.connection.sendRequest(cu.InlineValueRefreshRequest.type),on:e=>this.connection.onRequest(cu.InlineValueRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n)))}}};kr.InlineValueFeature=J_});var du=U(Fr=>{"use strict";Object.defineProperty(Fr,"__esModule",{value:!0});Fr.InlayHintFeature=void 0;var ns=Me(),Y_=t=>class extends t{get inlayHint(){return{refresh:()=>this.connection.sendRequest(ns.InlayHintRefreshRequest.type),on:e=>this.connection.onRequest(ns.InlayHintRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n))),resolve:e=>this.connection.onRequest(ns.InlayHintResolveRequest.type,(n,r)=>e(n,r))}}};Fr.InlayHintFeature=Y_});var _u=U(qr=>{"use strict";Object.defineProperty(qr,"__esModule",{value:!0});qr.DiagnosticFeature=void 0;var Wn=Me(),Q_=t=>class extends t{get diagnostics(){return{refresh:()=>this.connection.sendRequest(Wn.DiagnosticRefreshRequest.type),on:e=>this.connection.onRequest(Wn.DocumentDiagnosticRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(Wn.DocumentDiagnosticRequest.partialResult,n))),onWorkspace:e=>this.connection.onRequest(Wn.WorkspaceDiagnosticRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(Wn.WorkspaceDiagnosticRequest.partialResult,n)))}}};qr.DiagnosticFeature=Q_});var is=U(xr=>{"use strict";Object.defineProperty(xr,"__esModule",{value:!0});xr.TextDocuments=void 0;var Kt=Me(),rs=class{constructor(e){this._configuration=e,this._syncedDocuments=new Map,this._onDidChangeContent=new Kt.Emitter,this._onDidOpen=new Kt.Emitter,this._onDidClose=new Kt.Emitter,this._onDidSave=new Kt.Emitter,this._onWillSave=new Kt.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._syncedDocuments.get(e)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(e){e.__textDocumentSync=Kt.TextDocumentSyncKind.Incremental;let n=[];return n.push(e.onDidOpenTextDocument(r=>{let i=r.textDocument,o=this._configuration.create(i.uri,i.languageId,i.version,i.text);this._syncedDocuments.set(i.uri,o);let u=Object.freeze({document:o});this._onDidOpen.fire(u),this._onDidChangeContent.fire(u)})),n.push(e.onDidChangeTextDocument(r=>{let i=r.textDocument,o=r.contentChanges;if(o.length===0)return;let{version:u}=i;if(u==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let l=this._syncedDocuments.get(i.uri);l!==void 0&&(l=this._configuration.update(l,o,u),this._syncedDocuments.set(i.uri,l),this._onDidChangeContent.fire(Object.freeze({document:l})))})),n.push(e.onDidCloseTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&(this._syncedDocuments.delete(r.textDocument.uri),this._onDidClose.fire(Object.freeze({document:i})))})),n.push(e.onWillSaveTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&this._onWillSave.fire(Object.freeze({document:i,reason:r.reason}))})),n.push(e.onWillSaveTextDocumentWaitUntil((r,i)=>{let o=this._syncedDocuments.get(r.textDocument.uri);return o!==void 0&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:o,reason:r.reason}),i):[]})),n.push(e.onDidSaveTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&this._onDidSave.fire(Object.freeze({document:i}))})),Kt.Disposable.create(()=>{n.forEach(r=>r.dispose())})}};xr.TextDocuments=rs});var ss=U(mn=>{"use strict";Object.defineProperty(mn,"__esModule",{value:!0});mn.NotebookDocuments=mn.NotebookSyncFeature=void 0;var tt=Me(),fu=is(),X_=t=>class extends t{get synchronization(){return{onDidOpenNotebookDocument:e=>this.connection.onNotification(tt.DidOpenNotebookDocumentNotification.type,n=>{e(n)}),onDidChangeNotebookDocument:e=>this.connection.onNotification(tt.DidChangeNotebookDocumentNotification.type,n=>{e(n)}),onDidSaveNotebookDocument:e=>this.connection.onNotification(tt.DidSaveNotebookDocumentNotification.type,n=>{e(n)}),onDidCloseNotebookDocument:e=>this.connection.onNotification(tt.DidCloseNotebookDocumentNotification.type,n=>{e(n)})}}};mn.NotebookSyncFeature=X_;var Or=class t{onDidOpenTextDocument(e){return this.openHandler=e,tt.Disposable.create(()=>{this.openHandler=void 0})}openTextDocument(e){this.openHandler&&this.openHandler(e)}onDidChangeTextDocument(e){return this.changeHandler=e,tt.Disposable.create(()=>{this.changeHandler=e})}changeTextDocument(e){this.changeHandler&&this.changeHandler(e)}onDidCloseTextDocument(e){return this.closeHandler=e,tt.Disposable.create(()=>{this.closeHandler=void 0})}closeTextDocument(e){this.closeHandler&&this.closeHandler(e)}onWillSaveTextDocument(){return t.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return t.NULL_DISPOSE}onDidSaveTextDocument(){return t.NULL_DISPOSE}};Or.NULL_DISPOSE=Object.freeze({dispose:()=>{}});var os=class{constructor(e){e instanceof fu.TextDocuments?this._cellTextDocuments=e:this._cellTextDocuments=new fu.TextDocuments(e),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new tt.Emitter,this._onDidChange=new tt.Emitter,this._onDidSave=new tt.Emitter,this._onDidClose=new tt.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(e){return this._cellTextDocuments.get(e.document)}getNotebookDocument(e){return this.notebookDocuments.get(e)}getNotebookCell(e){let n=this.notebookCellMap.get(e);return n&&n[0]}findNotebookDocumentForCell(e){let n=typeof e=="string"?e:e.document,r=this.notebookCellMap.get(n);return r&&r[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(e){let n=new Or,r=[];return r.push(this.cellTextDocuments.listen(n)),r.push(e.notebooks.synchronization.onDidOpenNotebookDocument(i=>{this.notebookDocuments.set(i.notebookDocument.uri,i.notebookDocument);for(let o of i.cellTextDocuments)n.openTextDocument({textDocument:o});this.updateCellMap(i.notebookDocument),this._onDidOpen.fire(i.notebookDocument)})),r.push(e.notebooks.synchronization.onDidChangeNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);if(o===void 0)return;o.version=i.notebookDocument.version;let u=o.metadata,l=!1,d=i.change;d.metadata!==void 0&&(l=!0,o.metadata=d.metadata);let f=[],p=[],v=[],w=[];if(d.cells!==void 0){let k=d.cells;if(k.structure!==void 0){let m=k.structure.array;if(o.cells.splice(m.start,m.deleteCount,...m.cells!==void 0?m.cells:[]),k.structure.didOpen!==void 0)for(let b of k.structure.didOpen)n.openTextDocument({textDocument:b}),f.push(b.uri);if(k.structure.didClose)for(let b of k.structure.didClose)n.closeTextDocument({textDocument:b}),p.push(b.uri)}if(k.data!==void 0){let m=new Map(k.data.map(b=>[b.document,b]));for(let b=0;b<=o.cells.length;b++){let I=m.get(o.cells[b].document);if(I!==void 0){let V=o.cells.splice(b,1,I);if(v.push({old:V[0],new:I}),m.delete(I.document),m.size===0)break}}}if(k.textContent!==void 0)for(let m of k.textContent)n.changeTextDocument({textDocument:m.document,contentChanges:m.changes}),w.push(m.document.uri)}this.updateCellMap(o);let D={notebookDocument:o};l&&(D.metadata={old:u,new:o.metadata});let S=[];for(let k of f)S.push(this.getNotebookCell(k));let T=[];for(let k of p)T.push(this.getNotebookCell(k));let q=[];for(let k of w)q.push(this.getNotebookCell(k));(S.length>0||T.length>0||v.length>0||q.length>0)&&(D.cells={added:S,removed:T,changed:{data:v,textContent:q}}),(D.metadata!==void 0||D.cells!==void 0)&&this._onDidChange.fire(D)})),r.push(e.notebooks.synchronization.onDidSaveNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);o!==void 0&&this._onDidSave.fire(o)})),r.push(e.notebooks.synchronization.onDidCloseNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);if(o!==void 0){this._onDidClose.fire(o);for(let u of i.cellTextDocuments)n.closeTextDocument({textDocument:u});this.notebookDocuments.delete(i.notebookDocument.uri);for(let u of o.cells)this.notebookCellMap.delete(u.document)}})),tt.Disposable.create(()=>{r.forEach(i=>i.dispose())})}updateCellMap(e){for(let n of e.cells)this.notebookCellMap.set(n.document,[n,e])}};mn.NotebookDocuments=os});var mu=U(Ar=>{"use strict";Object.defineProperty(Ar,"__esModule",{value:!0});Ar.MonikerFeature=void 0;var ef=Me(),tf=t=>class extends t{get moniker(){return{on:e=>{let n=ef.MonikerRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};Ar.MonikerFeature=tf});var _s=U(ee=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0});ee.createConnection=ee.combineFeatures=ee.combineNotebooksFeatures=ee.combineLanguagesFeatures=ee.combineWorkspaceFeatures=ee.combineWindowFeatures=ee.combineClientFeatures=ee.combineTracerFeatures=ee.combineTelemetryFeatures=ee.combineConsoleFeatures=ee._NotebooksImpl=ee._LanguagesImpl=ee.BulkUnregistration=ee.BulkRegistration=ee.ErrorMessageTracker=void 0;var j=Me(),nt=Yn(),us=Ko(),G=tu(),nf=nu(),rf=ru(),of=iu(),sf=es(),af=ou(),uf=su(),cf=au(),lf=uu(),df=lu(),_f=du(),ff=_u(),mf=ss(),hf=mu();function as(t){if(t!==null)return t}var cs=class{constructor(){this._messages=Object.create(null)}add(e){let n=this._messages[e];n||(n=0),n++,this._messages[e]=n}sendErrors(e){Object.keys(this._messages).forEach(n=>{e.window.showErrorMessage(n)})}};ee.ErrorMessageTracker=cs;var Lr=class{constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send(j.MessageType.Error,e)}warn(e){this.send(j.MessageType.Warning,e)}info(e){this.send(j.MessageType.Info,e)}log(e){this.send(j.MessageType.Log,e)}send(e,n){this._rawConnection&&this._rawConnection.sendNotification(j.LogMessageNotification.type,{type:e,message:n}).catch(()=>{(0,j.RAL)().console.error("Sending log message failed")})}},ls=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...n){let r={type:j.MessageType.Error,message:e,actions:n};return this.connection.sendRequest(j.ShowMessageRequest.type,r).then(as)}showWarningMessage(e,...n){let r={type:j.MessageType.Warning,message:e,actions:n};return this.connection.sendRequest(j.ShowMessageRequest.type,r).then(as)}showInformationMessage(e,...n){let r={type:j.MessageType.Info,message:e,actions:n};return this.connection.sendRequest(j.ShowMessageRequest.type,r).then(as)}},hu=(0,af.ShowDocumentFeature)((0,G.ProgressFeature)(ls)),pf;(function(t){function e(){return new jr}t.create=e})(pf=ee.BulkRegistration||(ee.BulkRegistration={}));var jr=class{constructor(){this._registrations=[],this._registered=new Set}add(e,n){let r=nt.string(e)?e:e.method;if(this._registered.has(r))throw new Error(`${r} is already added to this registration`);let i=us.generateUuid();this._registrations.push({id:i,method:r,registerOptions:n||{}}),this._registered.add(r)}asRegistrationParams(){return{registrations:this._registrations}}},gf;(function(t){function e(){return new Hn(void 0,[])}t.create=e})(gf=ee.BulkUnregistration||(ee.BulkUnregistration={}));var Hn=class{constructor(e,n){this._connection=e,this._unregistrations=new Map,n.forEach(r=>{this._unregistrations.set(r.method,r)})}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){let e=[];for(let r of this._unregistrations.values())e.push(r);let n={unregisterations:e};this._connection.sendRequest(j.UnregistrationRequest.type,n).catch(()=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(e){let n=nt.string(e)?e:e.method,r=this._unregistrations.get(n);if(!r)return!1;let i={unregisterations:[r]};return this._connection.sendRequest(j.UnregistrationRequest.type,i).then(()=>{this._unregistrations.delete(n)},o=>{this._connection.console.info(`Un-registering request handler for ${r.id} failed.`)}),!0}},Ur=class{attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}register(e,n,r){return e instanceof jr?this.registerMany(e):e instanceof Hn?this.registerSingle1(e,n,r):this.registerSingle2(e,n)}registerSingle1(e,n,r){let i=nt.string(n)?n:n.method,o=us.generateUuid(),u={registrations:[{id:o,method:i,registerOptions:r||{}}]};return e.isAttached||e.attach(this.connection),this.connection.sendRequest(j.RegistrationRequest.type,u).then(l=>(e.add({id:o,method:i}),e),l=>(this.connection.console.info(`Registering request handler for ${i} failed.`),Promise.reject(l)))}registerSingle2(e,n){let r=nt.string(e)?e:e.method,i=us.generateUuid(),o={registrations:[{id:i,method:r,registerOptions:n||{}}]};return this.connection.sendRequest(j.RegistrationRequest.type,o).then(u=>j.Disposable.create(()=>{this.unregisterSingle(i,r).catch(()=>{this.connection.console.info(`Un-registering capability with id ${i} failed.`)})}),u=>(this.connection.console.info(`Registering request handler for ${r} failed.`),Promise.reject(u)))}unregisterSingle(e,n){let r={unregisterations:[{id:e,method:n}]};return this.connection.sendRequest(j.UnregistrationRequest.type,r).catch(()=>{this.connection.console.info(`Un-registering request handler for ${e} failed.`)})}registerMany(e){let n=e.asRegistrationParams();return this.connection.sendRequest(j.RegistrationRequest.type,n).then(()=>new Hn(this._connection,n.registrations.map(r=>({id:r.id,method:r.method}))),r=>(this.connection.console.info("Bulk registration failed."),Promise.reject(r)))}},ds=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}applyEdit(e){function n(i){return i&&!!i.edit}let r=n(e)?e:{edit:e};return this.connection.sendRequest(j.ApplyWorkspaceEditRequest.type,r)}},pu=(0,uf.FileOperationsFeature)((0,rf.WorkspaceFoldersFeature)((0,nf.ConfigurationFeature)(ds))),Wr=class{constructor(){this._trace=j.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,n){this._trace!==j.Trace.Off&&this.connection.sendNotification(j.LogTraceNotification.type,{message:e,verbose:this._trace===j.Trace.Verbose?n:void 0}).catch(()=>{})}},Hr=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}logEvent(e){this.connection.sendNotification(j.TelemetryEventNotification.type,e).catch(()=>{this.connection.console.log("Sending TelemetryEventNotification failed")})}},Br=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,G.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,n){return(0,G.attachPartialResult)(this.connection,n)}};ee._LanguagesImpl=Br;var gu=(0,hf.MonikerFeature)((0,ff.DiagnosticFeature)((0,_f.InlayHintFeature)((0,df.InlineValueFeature)((0,lf.TypeHierarchyFeature)((0,cf.LinkedEditingRangeFeature)((0,sf.SemanticTokensFeature)((0,of.CallHierarchyFeature)(Br)))))))),Vr=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,G.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,n){return(0,G.attachPartialResult)(this.connection,n)}};ee._NotebooksImpl=Vr;var yu=(0,mf.NotebookSyncFeature)(Vr);function bu(t,e){return function(n){return e(t(n))}}ee.combineConsoleFeatures=bu;function vu(t,e){return function(n){return e(t(n))}}ee.combineTelemetryFeatures=vu;function wu(t,e){return function(n){return e(t(n))}}ee.combineTracerFeatures=wu;function Tu(t,e){return function(n){return e(t(n))}}ee.combineClientFeatures=Tu;function Ru(t,e){return function(n){return e(t(n))}}ee.combineWindowFeatures=Ru;function Eu(t,e){return function(n){return e(t(n))}}ee.combineWorkspaceFeatures=Eu;function Du(t,e){return function(n){return e(t(n))}}ee.combineLanguagesFeatures=Du;function Su(t,e){return function(n){return e(t(n))}}ee.combineNotebooksFeatures=Su;function yf(t,e){function n(i,o,u){return i&&o?u(i,o):i||o}return{__brand:"features",console:n(t.console,e.console,bu),tracer:n(t.tracer,e.tracer,wu),telemetry:n(t.telemetry,e.telemetry,vu),client:n(t.client,e.client,Tu),window:n(t.window,e.window,Ru),workspace:n(t.workspace,e.workspace,Eu),languages:n(t.languages,e.languages,Du),notebooks:n(t.notebooks,e.notebooks,Su)}}ee.combineFeatures=yf;function bf(t,e,n){let r=n&&n.console?new(n.console(Lr)):new Lr,i=t(r);r.rawAttach(i);let o=n&&n.tracer?new(n.tracer(Wr)):new Wr,u=n&&n.telemetry?new(n.telemetry(Hr)):new Hr,l=n&&n.client?new(n.client(Ur)):new Ur,d=n&&n.window?new(n.window(hu)):new hu,f=n&&n.workspace?new(n.workspace(pu)):new pu,p=n&&n.languages?new(n.languages(gu)):new gu,v=n&&n.notebooks?new(n.notebooks(yu)):new yu,w=[r,o,u,l,d,f,p,v];function D(m){return m instanceof Promise?m:nt.thenable(m)?new Promise((b,I)=>{m.then(V=>b(V),V=>I(V))}):Promise.resolve(m)}let S,T,q,k={listen:()=>i.listen(),sendRequest:(m,...b)=>i.sendRequest(nt.string(m)?m:m.method,...b),onRequest:(m,b)=>i.onRequest(m,b),sendNotification:(m,b)=>{let I=nt.string(m)?m:m.method;return arguments.length===1?i.sendNotification(I):i.sendNotification(I,b)},onNotification:(m,b)=>i.onNotification(m,b),onProgress:i.onProgress,sendProgress:i.sendProgress,onInitialize:m=>(T=m,{dispose:()=>{T=void 0}}),onInitialized:m=>i.onNotification(j.InitializedNotification.type,m),onShutdown:m=>(S=m,{dispose:()=>{S=void 0}}),onExit:m=>(q=m,{dispose:()=>{q=void 0}}),get console(){return r},get telemetry(){return u},get tracer(){return o},get client(){return l},get window(){return d},get workspace(){return f},get languages(){return p},get notebooks(){return v},onDidChangeConfiguration:m=>i.onNotification(j.DidChangeConfigurationNotification.type,m),onDidChangeWatchedFiles:m=>i.onNotification(j.DidChangeWatchedFilesNotification.type,m),__textDocumentSync:void 0,onDidOpenTextDocument:m=>i.onNotification(j.DidOpenTextDocumentNotification.type,m),onDidChangeTextDocument:m=>i.onNotification(j.DidChangeTextDocumentNotification.type,m),onDidCloseTextDocument:m=>i.onNotification(j.DidCloseTextDocumentNotification.type,m),onWillSaveTextDocument:m=>i.onNotification(j.WillSaveTextDocumentNotification.type,m),onWillSaveTextDocumentWaitUntil:m=>i.onRequest(j.WillSaveTextDocumentWaitUntilRequest.type,m),onDidSaveTextDocument:m=>i.onNotification(j.DidSaveTextDocumentNotification.type,m),sendDiagnostics:m=>i.sendNotification(j.PublishDiagnosticsNotification.type,m),onHover:m=>i.onRequest(j.HoverRequest.type,(b,I)=>m(b,I,(0,G.attachWorkDone)(i,b),void 0)),onCompletion:m=>i.onRequest(j.CompletionRequest.type,(b,I)=>m(b,I,(0,G.attachWorkDone)(i,b),(0,G.attachPartialResult)(i,b))),onCompletionResolve:m=>i.onRequest(j.CompletionResolveRequest.type,m),onSignatureHelp:m=>i.onRequest(j.SignatureHelpRequest.type,(b,I)=>m(b,I,(0,G.attachWorkDone)(i,b),void 0)),onDeclaration:m=>i.onRequest(j.DeclarationRequest.type,(b,I)=>m(b,I,(0,G.attachWorkDone)(i,b),(0,G.attachPartialResult)(i,b))),onDefinition:m=>i.onRequest(j.DefinitionRequest.type,(b,I)=>m(b,I,(0,G.attachWorkDone)(i,b),(0,G.attachPartialResult)(i,b))),onTypeDefinition:m=>i.onRequest(j.TypeDefinitionRequest.type,(b,I)=>m(b,I,(0,G.attachWorkDone)(i,b),(0,G.attachPartialResult)(i,b))),onImplementation:m=>i.onRequest(j.ImplementationRequest.type,(b,I)=>m(b,I,(0,G.attachWorkDone)(i,b),(0,G.attachPartialResult)(i,b))),onReferences:m=>i.onRequest(j.ReferencesRequest.type,(b,I)=>m(b,I,(0,G.attachWorkDone)(i,b),(0,G.attachPartialResult)(i,b))),onDocumentHighlight:m=>i.onRequest(j.DocumentHighlightRequest.type,(b,I)=>m(b,I,(0,G.attachWorkDone)(i,b),(0,G.attachPartialResult)(i,b))),onDocumentSymbol:m=>i.onRequest(j.DocumentSymbolRequest.type,(b,I)=>m(b,I,(0,G.attachWorkDone)(i,b),(0,G.attachPartialResult)(i,b))),onWorkspaceSymbol:m=>i.onRequest(j.WorkspaceSymbolRequest.type,(b,I)=>m(b,I,(0,G.attachWorkDone)(i,b),(0,G.attachPartialResult)(i,b))),onWorkspaceSymbolResolve:m=>i.onRequest(j.WorkspaceSymbolResolveRequest.type,m),onCodeAction:m=>i.onRequest(j.CodeActionRequest.type,(b,I)=>m(b,I,(0,G.attachWorkDone)(i,b),(0,G.attachPartialResult)(i,b))),onCodeActionResolve:m=>i.onRequest(j.CodeActionResolveRequest.type,(b,I)=>m(b,I)),onCodeLens:m=>i.onRequest(j.CodeLensRequest.type,(b,I)=>m(b,I,(0,G.attachWorkDone)(i,b),(0,G.attachPartialResult)(i,b))),onCodeLensResolve:m=>i.onRequest(j.CodeLensResolveRequest.type,(b,I)=>m(b,I)),onDocumentFormatting:m=>i.onRequest(j.DocumentFormattingRequest.type,(b,I)=>m(b,I,(0,G.attachWorkDone)(i,b),void 0)),onDocumentRangeFormatting:m=>i.onRequest(j.DocumentRangeFormattingRequest.type,(b,I)=>m(b,I,(0,G.attachWorkDone)(i,b),void 0)),onDocumentOnTypeFormatting:m=>i.onRequest(j.DocumentOnTypeFormattingRequest.type,(b,I)=>m(b,I)),onRenameRequest:m=>i.onRequest(j.RenameRequest.type,(b,I)=>m(b,I,(0,G.attachWorkDone)(i,b),void 0)),onPrepareRename:m=>i.onRequest(j.PrepareRenameRequest.type,(b,I)=>m(b,I)),onDocumentLinks:m=>i.onRequest(j.DocumentLinkRequest.type,(b,I)=>m(b,I,(0,G.attachWorkDone)(i,b),(0,G.attachPartialResult)(i,b))),onDocumentLinkResolve:m=>i.onRequest(j.DocumentLinkResolveRequest.type,(b,I)=>m(b,I)),onDocumentColor:m=>i.onRequest(j.DocumentColorRequest.type,(b,I)=>m(b,I,(0,G.attachWorkDone)(i,b),(0,G.attachPartialResult)(i,b))),onColorPresentation:m=>i.onRequest(j.ColorPresentationRequest.type,(b,I)=>m(b,I,(0,G.attachWorkDone)(i,b),(0,G.attachPartialResult)(i,b))),onFoldingRanges:m=>i.onRequest(j.FoldingRangeRequest.type,(b,I)=>m(b,I,(0,G.attachWorkDone)(i,b),(0,G.attachPartialResult)(i,b))),onSelectionRanges:m=>i.onRequest(j.SelectionRangeRequest.type,(b,I)=>m(b,I,(0,G.attachWorkDone)(i,b),(0,G.attachPartialResult)(i,b))),onExecuteCommand:m=>i.onRequest(j.ExecuteCommandRequest.type,(b,I)=>m(b,I,(0,G.attachWorkDone)(i,b),void 0)),dispose:()=>i.dispose()};for(let m of w)m.attach(k);return i.onRequest(j.InitializeRequest.type,m=>{e.initialize(m),nt.string(m.trace)&&(o.trace=j.Trace.fromString(m.trace));for(let b of w)b.initialize(m.capabilities);if(T){let b=T(m,new j.CancellationTokenSource().token,(0,G.attachWorkDone)(i,m),void 0);return D(b).then(I=>{if(I instanceof j.ResponseError)return I;let V=I;V||(V={capabilities:{}});let re=V.capabilities;re||(re={},V.capabilities=re),re.textDocumentSync===void 0||re.textDocumentSync===null?re.textDocumentSync=nt.number(k.__textDocumentSync)?k.__textDocumentSync:j.TextDocumentSyncKind.None:!nt.number(re.textDocumentSync)&&!nt.number(re.textDocumentSync.change)&&(re.textDocumentSync.change=nt.number(k.__textDocumentSync)?k.__textDocumentSync:j.TextDocumentSyncKind.None);for(let oe of w)oe.fillServerCapabilities(re);return V})}else{let b={capabilities:{textDocumentSync:j.TextDocumentSyncKind.None}};for(let I of w)I.fillServerCapabilities(b.capabilities);return b}}),i.onRequest(j.ShutdownRequest.type,()=>{if(e.shutdownReceived=!0,S)return S(new j.CancellationTokenSource().token)}),i.onNotification(j.ExitNotification.type,()=>{try{q&&q()}finally{e.shutdownReceived?e.exit(0):e.exit(1)}}),i.onNotification(j.SetTraceNotification.type,m=>{o.trace=j.Trace.fromString(m.value)}),k}ee.createConnection=bf});var Mu=U(He=>{"use strict";Object.defineProperty(He,"__esModule",{value:!0});He.resolveModulePath=He.FileSystem=He.resolveGlobalYarnPath=He.resolveGlobalNodePath=He.resolve=He.uriToFilePath=void 0;var vf=require("url"),pt=require("path"),ms=require("fs"),gs=require("child_process");function wf(t){let e=vf.parse(t);if(e.protocol!=="file:"||!e.path)return;let n=e.path.split("/");for(var r=0,i=n.length;r<i;r++)n[r]=decodeURIComponent(n[r]);if(process.platform==="win32"&&n.length>1){let o=n[0],u=n[1];o.length===0&&u.length>1&&u[1]===":"&&n.shift()}return pt.normalize(n.join("/"))}He.uriToFilePath=wf;function hs(){return process.platform==="win32"}function zr(t,e,n,r){let i="NODE_PATH",o=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((u,l)=>{let d=process.env,f=Object.create(null);Object.keys(d).forEach(p=>f[p]=d[p]),e&&ms.existsSync(e)&&(f[i]?f[i]=e+pt.delimiter+f[i]:f[i]=e,r&&r(`NODE_PATH value is: ${f[i]}`)),f.ELECTRON_RUN_AS_NODE="1";try{let p=(0,gs.fork)("",[],{cwd:n,env:f,execArgv:["-e",o]});if(p.pid===void 0){l(new Error(`Starting process to resolve node module  ${t} failed`));return}p.on("error",w=>{l(w)}),p.on("message",w=>{w.c==="r"&&(p.send({c:"e"}),w.s?u(w.r):l(new Error(`Failed to resolve module: ${t}`)))});let v={c:"rs",a:t};p.send(v)}catch(p){l(p)}})}He.resolve=zr;function ps(t){let e="npm",n=Object.create(null);Object.keys(process.env).forEach(o=>n[o]=process.env[o]),n.NO_UPDATE_NOTIFIER="true";let r={encoding:"utf8",env:n};hs()&&(e="npm.cmd",r.shell=!0);let i=()=>{};try{process.on("SIGPIPE",i);let o=(0,gs.spawnSync)(e,["config","get","prefix"],r).stdout;if(!o){t&&t("'npm config get prefix' didn't return a value.");return}let u=o.trim();return t&&t(`'npm config get prefix' value is: ${u}`),u.length>0?hs()?pt.join(u,"node_modules"):pt.join(u,"lib","node_modules"):void 0}catch{return}finally{process.removeListener("SIGPIPE",i)}}He.resolveGlobalNodePath=ps;function Tf(t){let e="yarn",n={encoding:"utf8"};hs()&&(e="yarn.cmd",n.shell=!0);let r=()=>{};try{process.on("SIGPIPE",r);let i=(0,gs.spawnSync)(e,["global","dir","--json"],n),o=i.stdout;if(!o){t&&(t("'yarn global dir' didn't return a value."),i.stderr&&t(i.stderr));return}let u=o.trim().split(/\r?\n/);for(let l of u)try{let d=JSON.parse(l);if(d.type==="log")return pt.join(d.data,"node_modules")}catch{}return}catch{return}finally{process.removeListener("SIGPIPE",r)}}He.resolveGlobalYarnPath=Tf;var Pu;(function(t){let e;function n(){return e!==void 0||(process.platform==="win32"?e=!1:e=!ms.existsSync(__filename.toUpperCase())||!ms.existsSync(__filename.toLowerCase())),e}t.isCaseSensitive=n;function r(i,o){return n()?pt.normalize(o).indexOf(pt.normalize(i))===0:pt.normalize(o).toLowerCase().indexOf(pt.normalize(i).toLowerCase())===0}t.isParent=r})(Pu=He.FileSystem||(He.FileSystem={}));function Rf(t,e,n,r){return n?(pt.isAbsolute(n)||(n=pt.join(t,n)),zr(e,n,n,r).then(i=>Pu.isParent(n,i)?i:Promise.reject(new Error(`Failed to load ${e} from node path location.`))).then(void 0,i=>zr(e,ps(r),t,r))):zr(e,ps(r),t,r)}He.resolveModulePath=Rf});var ys=U((dh,Cu)=>{"use strict";Cu.exports=Me()});var Iu=U(Fe=>{"use strict";var Ef=Fe&&Fe.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Nu=Fe&&Fe.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Ef(e,t,n)};Object.defineProperty(Fe,"__esModule",{value:!0});Fe.ProposedFeatures=Fe.NotebookDocuments=Fe.TextDocuments=Fe.SemanticTokensBuilder=void 0;var Df=es();Object.defineProperty(Fe,"SemanticTokensBuilder",{enumerable:!0,get:function(){return Df.SemanticTokensBuilder}});Nu(Me(),Fe);var Sf=is();Object.defineProperty(Fe,"TextDocuments",{enumerable:!0,get:function(){return Sf.TextDocuments}});var Pf=ss();Object.defineProperty(Fe,"NotebookDocuments",{enumerable:!0,get:function(){return Pf.NotebookDocuments}});Nu(_s(),Fe);var Mf;(function(t){t.all={__brand:"features"}})(Mf=Fe.ProposedFeatures||(Fe.ProposedFeatures={}))});var Ge=U(Ze=>{"use strict";var Cf=Ze&&Ze.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Fu=Ze&&Ze.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Cf(e,t,n)};Object.defineProperty(Ze,"__esModule",{value:!0});Ze.createConnection=Ze.Files=void 0;var bs=Yn(),Nf=_s(),Bn=Mu(),Jt=ys();Fu(ys(),Ze);Fu(Iu(),Ze);var If;(function(t){t.uriToFilePath=Bn.uriToFilePath,t.resolveGlobalNodePath=Bn.resolveGlobalNodePath,t.resolveGlobalYarnPath=Bn.resolveGlobalYarnPath,t.resolve=Bn.resolve,t.resolveModulePath=Bn.resolveModulePath})(If=Ze.Files||(Ze.Files={}));var ku;function $r(){if(ku!==void 0)try{ku.end()}catch{}}var hn=!1,qu;function kf(){let t="--clientProcessId";function e(n){try{let r=parseInt(n);isNaN(r)||(qu=setInterval(()=>{try{process.kill(r,0)}catch{$r(),process.exit(hn?0:1)}},3e3))}catch{}}for(let n=2;n<process.argv.length;n++){let r=process.argv[n];if(r===t&&n+1<process.argv.length){e(process.argv[n+1]);return}else{let i=r.split("=");i[0]===t&&e(i[1])}}}kf();var Ff={initialize:t=>{let e=t.processId;bs.number(e)&&qu===void 0&&setInterval(()=>{try{process.kill(e,0)}catch{process.exit(hn?0:1)}},3e3)},get shutdownReceived(){return hn},set shutdownReceived(t){hn=t},exit:t=>{$r(),process.exit(t)}};function qf(t,e,n,r){let i,o,u,l;return t!==void 0&&t.__brand==="features"&&(i=t,t=e,e=n,n=r),Jt.ConnectionStrategy.is(t)||Jt.ConnectionOptions.is(t)?l=t:(o=t,u=e,l=n),xf(o,u,l,i)}Ze.createConnection=qf;function xf(t,e,n,r){if(!t&&!e&&process.argv.length>2){let l,d,f=process.argv.slice(2);for(let p=0;p<f.length;p++){let v=f[p];if(v==="--node-ipc"){t=new Jt.IPCMessageReader(process),e=new Jt.IPCMessageWriter(process);break}else if(v==="--stdio"){t=process.stdin,e=process.stdout;break}else if(v==="--socket"){l=parseInt(f[p+1]);break}else if(v==="--pipe"){d=f[p+1];break}else{var i=v.split("=");if(i[0]==="--socket"){l=parseInt(i[1]);break}else if(i[0]==="--pipe"){d=i[1];break}}}if(l){let p=(0,Jt.createServerSocketTransport)(l);t=p[0],e=p[1]}else if(d){let p=(0,Jt.createServerPipeTransport)(d);t=p[0],e=p[1]}}var o="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!t)throw new Error("Connection input stream is not set. "+o);if(!e)throw new Error("Connection output stream is not set. "+o);if(bs.func(t.read)&&bs.func(t.on)){let l=t;l.on("end",()=>{$r(),process.exit(hn?0:1)}),l.on("close",()=>{$r(),process.exit(hn?0:1)})}let u=l=>(0,Jt.createProtocolConnection)(t,e,l,n);return(0,Nf.createConnection)(u,Ff,r)}});var Zr=U((mh,xu)=>{"use strict";xu.exports=Ge()});var Ou=U((exports,module)=>{var Module=Module!==void 0?Module:{},TreeSitter=function(){var initPromise,document=typeof window=="object"?{currentScript:window.document.currentScript}:null;class Parser{constructor(){this.initialize()}initialize(){throw new Error("cannot construct a Parser before calling `init()`")}static init(moduleOptions){return initPromise||(Module=Object.assign({},Module,moduleOptions),initPromise=new Promise(resolveInitPromise=>{var moduleOverrides=Object.assign({},Module),arguments_=[],thisProgram="./this.program",quit_=(t,e)=>{throw e},ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",scriptDirectory="",read_,readAsync,readBinary,setWindowTitle;function locateFile(t){return Module.locateFile?Module.locateFile(t,scriptDirectory):scriptDirectory+t}function logExceptionOnExit(t){t instanceof ExitStatus||err("exiting due to exception: "+t)}if(ENVIRONMENT_IS_NODE){var fs=require("fs"),nodePath=require("path");scriptDirectory=ENVIRONMENT_IS_WORKER?nodePath.dirname(scriptDirectory)+"/":__dirname+"/",read_=(t,e)=>(t=isFileURI(t)?new URL(t):nodePath.normalize(t),fs.readFileSync(t,e?void 0:"utf8")),readBinary=t=>{var e=read_(t,!0);return e.buffer||(e=new Uint8Array(e)),e},readAsync=(t,e,n)=>{t=isFileURI(t)?new URL(t):nodePath.normalize(t),fs.readFile(t,function(r,i){r?n(r):e(i.buffer)})},process.argv.length>1&&(thisProgram=process.argv[1].replace(/\\/g,"/")),arguments_=process.argv.slice(2),typeof module<"u"&&(module.exports=Module),quit_=(t,e)=>{if(keepRuntimeAlive())throw process.exitCode=t,e;logExceptionOnExit(e),process.exit(t)},Module.inspect=function(){return"[Emscripten Module object]"}}else(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&(ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:document!==void 0&&document.currentScript&&(scriptDirectory=document.currentScript.src),scriptDirectory=scriptDirectory.indexOf("blob:")!==0?scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1):"",read_=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},ENVIRONMENT_IS_WORKER&&(readBinary=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),readAsync=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{r.status==200||r.status==0&&r.response?e(r.response):n()},r.onerror=n,r.send(null)},setWindowTitle=t=>document.title=t);var out=Module.print||console.log.bind(console),err=Module.printErr||console.warn.bind(console);Object.assign(Module,moduleOverrides),moduleOverrides=null,Module.arguments&&(arguments_=Module.arguments),Module.thisProgram&&(thisProgram=Module.thisProgram),Module.quit&&(quit_=Module.quit);var STACK_ALIGN=16,dynamicLibraries=Module.dynamicLibraries||[],wasmBinary;Module.wasmBinary&&(wasmBinary=Module.wasmBinary);var noExitRuntime=Module.noExitRuntime||!0,wasmMemory;typeof WebAssembly!="object"&&abort("no native wasm support detected");var ABORT=!1,EXITSTATUS,UTF8Decoder=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function UTF8ArrayToString(t,e,n){for(var r=e+n,i=e;t[i]&&!(i>=r);)++i;if(i-e>16&&t.buffer&&UTF8Decoder)return UTF8Decoder.decode(t.subarray(e,i));for(var o="";e<i;){var u=t[e++];if(128&u){var l=63&t[e++];if((224&u)!=192){var d=63&t[e++];if((u=(240&u)==224?(15&u)<<12|l<<6|d:(7&u)<<18|l<<12|d<<6|63&t[e++])<65536)o+=String.fromCharCode(u);else{var f=u-65536;o+=String.fromCharCode(55296|f>>10,56320|1023&f)}}else o+=String.fromCharCode((31&u)<<6|l)}else o+=String.fromCharCode(u)}return o}function UTF8ToString(t,e){return t?UTF8ArrayToString(HEAPU8,t,e):""}function stringToUTF8Array(t,e,n,r){if(!(r>0))return 0;for(var i=n,o=n+r-1,u=0;u<t.length;++u){var l=t.charCodeAt(u);if(l>=55296&&l<=57343&&(l=65536+((1023&l)<<10)|1023&t.charCodeAt(++u)),l<=127){if(n>=o)break;e[n++]=l}else if(l<=2047){if(n+1>=o)break;e[n++]=192|l>>6,e[n++]=128|63&l}else if(l<=65535){if(n+2>=o)break;e[n++]=224|l>>12,e[n++]=128|l>>6&63,e[n++]=128|63&l}else{if(n+3>=o)break;e[n++]=240|l>>18,e[n++]=128|l>>12&63,e[n++]=128|l>>6&63,e[n++]=128|63&l}}return e[n]=0,n-i}function stringToUTF8(t,e,n){return stringToUTF8Array(t,HEAPU8,e,n)}function lengthBytesUTF8(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);r<=127?e++:r<=2047?e+=2:r>=55296&&r<=57343?(e+=4,++n):e+=3}return e}function updateGlobalBufferAndViews(t){buffer=t,Module.HEAP8=HEAP8=new Int8Array(t),Module.HEAP16=HEAP16=new Int16Array(t),Module.HEAP32=HEAP32=new Int32Array(t),Module.HEAPU8=HEAPU8=new Uint8Array(t),Module.HEAPU16=HEAPU16=new Uint16Array(t),Module.HEAPU32=HEAPU32=new Uint32Array(t),Module.HEAPF32=HEAPF32=new Float32Array(t),Module.HEAPF64=HEAPF64=new Float64Array(t)}var INITIAL_MEMORY=Module.INITIAL_MEMORY||33554432;wasmMemory=Module.wasmMemory?Module.wasmMemory:new WebAssembly.Memory({initial:INITIAL_MEMORY/65536,maximum:32768}),wasmMemory&&(buffer=wasmMemory.buffer),INITIAL_MEMORY=buffer.byteLength,updateGlobalBufferAndViews(buffer);var wasmTable=new WebAssembly.Table({initial:20,element:"anyfunc"}),__ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATPOSTRUN__=[],__RELOC_FUNCS__=[],runtimeInitialized=!1;function keepRuntimeAlive(){return noExitRuntime}function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}function initRuntime(){runtimeInitialized=!0,callRuntimeCallbacks(__RELOC_FUNCS__),callRuntimeCallbacks(__ATINIT__)}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(t){__ATPRERUN__.unshift(t)}function addOnInit(t){__ATINIT__.unshift(t)}function addOnPostRun(t){__ATPOSTRUN__.unshift(t)}var runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function addRunDependency(t){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}function removeRunDependency(t){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&(runDependencyWatcher!==null&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var e=dependenciesFulfilled;dependenciesFulfilled=null,e()}}function abort(t){throw Module.onAbort&&Module.onAbort(t),err(t="Aborted("+t+")"),ABORT=!0,EXITSTATUS=1,t+=". Build with -sASSERTIONS for more info.",new WebAssembly.RuntimeError(t)}var dataURIPrefix="data:application/octet-stream;base64,",wasmBinaryFile,tempDouble,tempI64;function isDataURI(t){return t.startsWith(dataURIPrefix)}function isFileURI(t){return t.startsWith("file://")}function getBinary(t){try{if(t==wasmBinaryFile&&wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(t);throw"both async and sync fetching of the wasm failed"}catch(e){abort(e)}}function getBinaryPromise(){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch=="function"&&!isFileURI(wasmBinaryFile))return fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(t){if(!t.ok)throw"failed to load wasm binary file at '"+wasmBinaryFile+"'";return t.arrayBuffer()}).catch(function(){return getBinary(wasmBinaryFile)});if(readAsync)return new Promise(function(t,e){readAsync(wasmBinaryFile,function(n){t(new Uint8Array(n))},e)})}return Promise.resolve().then(function(){return getBinary(wasmBinaryFile)})}function createWasm(){var t={env:asmLibraryArg,wasi_snapshot_preview1:asmLibraryArg,"GOT.mem":new Proxy(asmLibraryArg,GOTHandler),"GOT.func":new Proxy(asmLibraryArg,GOTHandler)};function e(i,o){var u=i.exports;u=relocateExports(u,1024);var l=getDylinkMetadata(o);l.neededDynlibs&&(dynamicLibraries=l.neededDynlibs.concat(dynamicLibraries)),mergeLibSymbols(u,"main"),Module.asm=u,addOnInit(Module.asm.__wasm_call_ctors),__RELOC_FUNCS__.push(Module.asm.__wasm_apply_data_relocs),removeRunDependency("wasm-instantiate")}function n(i){e(i.instance,i.module)}function r(i){return getBinaryPromise().then(function(o){return WebAssembly.instantiate(o,t)}).then(function(o){return o}).then(i,function(o){err("failed to asynchronously prepare wasm: "+o),abort(o)})}if(addRunDependency("wasm-instantiate"),Module.instantiateWasm)try{return Module.instantiateWasm(t,e)}catch(i){return err("Module.instantiateWasm callback failed with error: "+i),!1}return wasmBinary||typeof WebAssembly.instantiateStreaming!="function"||isDataURI(wasmBinaryFile)||isFileURI(wasmBinaryFile)||ENVIRONMENT_IS_NODE||typeof fetch!="function"?r(n):fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(i){return WebAssembly.instantiateStreaming(i,t).then(n,function(o){return err("wasm streaming compile failed: "+o),err("falling back to ArrayBuffer instantiation"),r(n)})}),{}}wasmBinaryFile="tree-sitter.wasm",isDataURI(wasmBinaryFile)||(wasmBinaryFile=locateFile(wasmBinaryFile));var ASM_CONSTS={};function ExitStatus(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}var GOT={},CurrentModuleWeakSymbols=new Set([]),GOTHandler={get:function(t,e){var n=GOT[e];return n||(n=GOT[e]=new WebAssembly.Global({value:"i32",mutable:!0})),CurrentModuleWeakSymbols.has(e)||(n.required=!0),n}};function callRuntimeCallbacks(t){for(;t.length>0;)t.shift()(Module)}function getDylinkMetadata(t){var e=0,n=0;function r(){for(var k=0,m=1;;){var b=t[e++];if(k+=(127&b)*m,m*=128,!(128&b))break}return k}function i(){var k=r();return UTF8ArrayToString(t,(e+=k)-k,k)}function o(k,m){if(k)throw new Error(m)}var u="dylink.0";if(t instanceof WebAssembly.Module){var l=WebAssembly.Module.customSections(t,u);l.length===0&&(u="dylink",l=WebAssembly.Module.customSections(t,u)),o(l.length===0,"need dylink section"),n=(t=new Uint8Array(l[0])).length}else{o(new Uint32Array(new Uint8Array(t.subarray(0,24)).buffer)[0]!=1836278016,"need to see wasm magic number"),o(t[8]!==0,"need the dylink section to be first"),e=9;var d=r();n=e+d,u=i()}var f={neededDynlibs:[],tlsExports:new Set,weakImports:new Set};if(u=="dylink"){f.memorySize=r(),f.memoryAlign=r(),f.tableSize=r(),f.tableAlign=r();for(var p=r(),v=0;v<p;++v){var w=i();f.neededDynlibs.push(w)}}else for(o(u!=="dylink.0");e<n;){var D=t[e++],S=r();if(D===1)f.memorySize=r(),f.memoryAlign=r(),f.tableSize=r(),f.tableAlign=r();else if(D===2)for(p=r(),v=0;v<p;++v)w=i(),f.neededDynlibs.push(w);else if(D===3)for(var T=r();T--;){var q=i();256&r()&&f.tlsExports.add(q)}else if(D===4)for(T=r();T--;)i(),q=i(),(3&r())==1&&f.weakImports.add(q);else e+=S}return f}function getValue(t,e="i8"){switch(e.endsWith("*")&&(e="*"),e){case"i1":case"i8":return HEAP8[t>>0];case"i16":return HEAP16[t>>1];case"i32":case"i64":return HEAP32[t>>2];case"float":return HEAPF32[t>>2];case"double":return HEAPF64[t>>3];case"*":return HEAPU32[t>>2];default:abort("invalid type for getValue: "+e)}return null}function asmjsMangle(t){return t.indexOf("dynCall_")==0||["stackAlloc","stackSave","stackRestore","getTempRet0","setTempRet0"].includes(t)?t:"_"+t}function mergeLibSymbols(t,e){for(var n in t)if(t.hasOwnProperty(n)){asmLibraryArg.hasOwnProperty(n)||(asmLibraryArg[n]=t[n]);var r=asmjsMangle(n);Module.hasOwnProperty(r)||(Module[r]=t[n]),n=="__main_argc_argv"&&(Module._main=t[n])}}var LDSO={loadedLibsByName:{},loadedLibsByHandle:{}};function dynCallLegacy(t,e,n){var r=Module["dynCall_"+t];return n&&n.length?r.apply(null,[e].concat(n)):r.call(null,e)}var wasmTableMirror=[];function getWasmTableEntry(t){var e=wasmTableMirror[t];return e||(t>=wasmTableMirror.length&&(wasmTableMirror.length=t+1),wasmTableMirror[t]=e=wasmTable.get(t)),e}function dynCall(t,e,n){return t.includes("j")?dynCallLegacy(t,e,n):getWasmTableEntry(e).apply(null,n)}function createInvokeFunction(t){return function(){var e=stackSave();try{return dynCall(t,arguments[0],Array.prototype.slice.call(arguments,1))}catch(n){if(stackRestore(e),n!==n+0)throw n;_setThrew(1,0)}}}var ___heap_base=78144;function zeroMemory(t,e){return HEAPU8.fill(0,t,t+e),t}function getMemory(t){if(runtimeInitialized)return zeroMemory(_malloc(t),t);var e=___heap_base,n=e+t+15&-16;return ___heap_base=n,GOT.__heap_base.value=n,e}function isInternalSym(t){return["__cpp_exception","__c_longjmp","__wasm_apply_data_relocs","__dso_handle","__tls_size","__tls_align","__set_stack_limits","_emscripten_tls_init","__wasm_init_tls","__wasm_call_ctors","__start_em_asm","__stop_em_asm"].includes(t)}function uleb128Encode(t,e){t<128?e.push(t):e.push(t%128|128,t>>7)}function sigToWasmTypes(t){for(var e={i:"i32",j:"i32",f:"f32",d:"f64",p:"i32"},n={parameters:[],results:t[0]=="v"?[]:[e[t[0]]]},r=1;r<t.length;++r)n.parameters.push(e[t[r]]),t[r]==="j"&&n.parameters.push("i32");return n}function generateFuncType(t,e){var n=t.slice(0,1),r=t.slice(1),i={i:127,p:127,j:126,f:125,d:124};e.push(96),uleb128Encode(r.length,e);for(var o=0;o<r.length;++o)e.push(i[r[o]]);n=="v"?e.push(0):e.push(1,i[n])}function convertJsFunctionToWasm(t,e){if(typeof WebAssembly.Function=="function")return new WebAssembly.Function(sigToWasmTypes(e),t);var n=[1];generateFuncType(e,n);var r=[0,97,115,109,1,0,0,0,1];uleb128Encode(n.length,r),r.push.apply(r,n),r.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var i=new WebAssembly.Module(new Uint8Array(r));return new WebAssembly.Instance(i,{e:{f:t}}).exports.f}function updateTableMap(t,e){if(functionsInTableMap)for(var n=t;n<t+e;n++){var r=getWasmTableEntry(n);r&&functionsInTableMap.set(r,n)}}var functionsInTableMap=void 0,freeTableIndexes=[];function getEmptyTableSlot(){if(freeTableIndexes.length)return freeTableIndexes.pop();try{wasmTable.grow(1)}catch(t){throw t instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":t}return wasmTable.length-1}function setWasmTableEntry(t,e){wasmTable.set(t,e),wasmTableMirror[t]=wasmTable.get(t)}function addFunction(t,e){if(functionsInTableMap||(functionsInTableMap=new WeakMap,updateTableMap(0,wasmTable.length)),functionsInTableMap.has(t))return functionsInTableMap.get(t);var n=getEmptyTableSlot();try{setWasmTableEntry(n,t)}catch(r){if(!(r instanceof TypeError))throw r;setWasmTableEntry(n,convertJsFunctionToWasm(t,e))}return functionsInTableMap.set(t,n),n}function updateGOT(t,e){for(var n in t)if(!isInternalSym(n)){var r=t[n];n.startsWith("orig$")&&(n=n.split("$")[1],e=!0),GOT[n]||(GOT[n]=new WebAssembly.Global({value:"i32",mutable:!0})),(e||GOT[n].value==0)&&(typeof r=="function"?GOT[n].value=addFunction(r):typeof r=="number"?GOT[n].value=r:err("unhandled export type for `"+n+"`: "+typeof r))}}function relocateExports(t,e,n){var r={};for(var i in t){var o=t[i];typeof o=="object"&&(o=o.value),typeof o=="number"&&(o+=e),r[i]=o}return updateGOT(r,n),r}function resolveGlobalSymbol(t,e){var n;return e&&(n=asmLibraryArg["orig$"+t]),n||(n=asmLibraryArg[t])&&n.stub&&(n=void 0),n||(n=Module[asmjsMangle(t)]),!n&&t.startsWith("invoke_")&&(n=createInvokeFunction(t.split("_")[1])),n}function alignMemory(t,e){return Math.ceil(t/e)*e}function loadWebAssemblyModule(binary,flags,handle){var metadata=getDylinkMetadata(binary);function loadModule(){var firstLoad=!handle||!HEAP8[handle+12>>0];if(firstLoad){var memAlign=Math.pow(2,metadata.memoryAlign);memAlign=Math.max(memAlign,STACK_ALIGN);var memoryBase=metadata.memorySize?alignMemory(getMemory(metadata.memorySize+memAlign),memAlign):0,tableBase=metadata.tableSize?wasmTable.length:0;handle&&(HEAP8[handle+12>>0]=1,HEAPU32[handle+16>>2]=memoryBase,HEAP32[handle+20>>2]=metadata.memorySize,HEAPU32[handle+24>>2]=tableBase,HEAP32[handle+28>>2]=metadata.tableSize)}else memoryBase=HEAPU32[handle+16>>2],tableBase=HEAPU32[handle+24>>2];var tableGrowthNeeded=tableBase+metadata.tableSize-wasmTable.length,moduleExports;function resolveSymbol(t){var e=resolveGlobalSymbol(t,!1);return e||(e=moduleExports[t]),e}tableGrowthNeeded>0&&wasmTable.grow(tableGrowthNeeded);var proxyHandler={get:function(t,e){switch(e){case"__memory_base":return memoryBase;case"__table_base":return tableBase}if(e in asmLibraryArg)return asmLibraryArg[e];var n;return e in t||(t[e]=function(){return n||(n=resolveSymbol(e)),n.apply(null,arguments)}),t[e]}},proxy=new Proxy({},proxyHandler),info={"GOT.mem":new Proxy({},GOTHandler),"GOT.func":new Proxy({},GOTHandler),env:proxy,wasi_snapshot_preview1:proxy};function postInstantiation(instance){function addEmAsm(addr,body){for(var args=[],arity=0;arity<16&&body.indexOf("$"+arity)!=-1;arity++)args.push("$"+arity);args=args.join(",");var func="("+args+" ) => { "+body+"};";ASM_CONSTS[start]=eval(func)}if(updateTableMap(tableBase,metadata.tableSize),moduleExports=relocateExports(instance.exports,memoryBase),flags.allowUndefined||reportUndefinedSymbols(),"__start_em_asm"in moduleExports)for(var start=moduleExports.__start_em_asm,stop=moduleExports.__stop_em_asm;start<stop;){var jsString=UTF8ToString(start);addEmAsm(start,jsString),start=HEAPU8.indexOf(0,start)+1}var applyRelocs=moduleExports.__wasm_apply_data_relocs;applyRelocs&&(runtimeInitialized?applyRelocs():__RELOC_FUNCS__.push(applyRelocs));var init=moduleExports.__wasm_call_ctors;return init&&(runtimeInitialized?init():__ATINIT__.push(init)),moduleExports}if(flags.loadAsync){if(binary instanceof WebAssembly.Module){var instance=new WebAssembly.Instance(binary,info);return Promise.resolve(postInstantiation(instance))}return WebAssembly.instantiate(binary,info).then(function(t){return postInstantiation(t.instance)})}var module=binary instanceof WebAssembly.Module?binary:new WebAssembly.Module(binary),instance=new WebAssembly.Instance(module,info);return postInstantiation(instance)}return CurrentModuleWeakSymbols=metadata.weakImports,flags.loadAsync?metadata.neededDynlibs.reduce(function(t,e){return t.then(function(){return loadDynamicLibrary(e,flags)})},Promise.resolve()).then(function(){return loadModule()}):(metadata.neededDynlibs.forEach(function(t){loadDynamicLibrary(t,flags)}),loadModule())}function loadDynamicLibrary(t,e,n){e=e||{global:!0,nodelete:!0};var r=LDSO.loadedLibsByName[t];if(r)return e.global&&!r.global&&(r.global=!0,r.module!=="loading"&&mergeLibSymbols(r.module,t)),e.nodelete&&r.refcount!==1/0&&(r.refcount=1/0),r.refcount++,n&&(LDSO.loadedLibsByHandle[n]=r),!e.loadAsync||Promise.resolve(!0);function i(l){if(e.fs&&e.fs.findObject(l)){var d=e.fs.readFile(l,{encoding:"binary"});return d instanceof Uint8Array||(d=new Uint8Array(d)),e.loadAsync?Promise.resolve(d):d}if(l=locateFile(l),e.loadAsync)return new Promise(function(f,p){readAsync(l,v=>f(new Uint8Array(v)),p)});if(!readBinary)throw new Error(l+": file not found, and synchronous loading of external files is not available");return readBinary(l)}function o(){if(typeof preloadedWasm<"u"&&preloadedWasm[t]){var l=preloadedWasm[t];return e.loadAsync?Promise.resolve(l):l}return e.loadAsync?i(t).then(function(d){return loadWebAssemblyModule(d,e,n)}):loadWebAssemblyModule(i(t),e,n)}function u(l){r.global&&mergeLibSymbols(l,t),r.module=l}return r={refcount:e.nodelete?1/0:1,name:t,module:"loading",global:e.global},LDSO.loadedLibsByName[t]=r,n&&(LDSO.loadedLibsByHandle[n]=r),e.loadAsync?o().then(function(l){return u(l),!0}):(u(o()),!0)}function reportUndefinedSymbols(){for(var t in GOT)if(GOT[t].value==0){var e=resolveGlobalSymbol(t,!0);if(!e&&!GOT[t].required)continue;if(typeof e=="function")GOT[t].value=addFunction(e,e.sig);else{if(typeof e!="number")throw new Error("bad export type for `"+t+"`: "+typeof e);GOT[t].value=e}}}function preloadDylibs(){dynamicLibraries.length?(addRunDependency("preloadDylibs"),dynamicLibraries.reduce(function(t,e){return t.then(function(){return loadDynamicLibrary(e,{loadAsync:!0,global:!0,nodelete:!0,allowUndefined:!0})})},Promise.resolve()).then(function(){reportUndefinedSymbols(),removeRunDependency("preloadDylibs")})):reportUndefinedSymbols()}function setValue(t,e,n="i8"){switch(n.endsWith("*")&&(n="*"),n){case"i1":case"i8":HEAP8[t>>0]=e;break;case"i16":HEAP16[t>>1]=e;break;case"i32":HEAP32[t>>2]=e;break;case"i64":tempI64=[e>>>0,(tempDouble=e,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[t>>2]=tempI64[0],HEAP32[t+4>>2]=tempI64[1];break;case"float":HEAPF32[t>>2]=e;break;case"double":HEAPF64[t>>3]=e;break;case"*":HEAPU32[t>>2]=e;break;default:abort("invalid type for setValue: "+n)}}var ___memory_base=new WebAssembly.Global({value:"i32",mutable:!1},1024),___stack_pointer=new WebAssembly.Global({value:"i32",mutable:!0},78144),___table_base=new WebAssembly.Global({value:"i32",mutable:!1},1),nowIsMonotonic=!0,_emscripten_get_now;function __emscripten_get_now_is_monotonic(){return nowIsMonotonic}function _abort(){abort("")}function _emscripten_date_now(){return Date.now()}function _emscripten_memcpy_big(t,e,n){HEAPU8.copyWithin(t,e,e+n)}function getHeapMax(){return 2147483648}function emscripten_realloc_buffer(t){try{return wasmMemory.grow(t-buffer.byteLength+65535>>>16),updateGlobalBufferAndViews(wasmMemory.buffer),1}catch{}}function _emscripten_resize_heap(t){var e=HEAPU8.length;t>>>=0;var n=getHeapMax();if(t>n)return!1;for(var r=1;r<=4;r*=2){var i=e*(1+.2/r);if(i=Math.min(i,t+100663296),emscripten_realloc_buffer(Math.min(n,(o=Math.max(t,i))+((u=65536)-o%u)%u)))return!0}var o,u;return!1}__emscripten_get_now_is_monotonic.sig="i",Module._abort=_abort,_abort.sig="v",_emscripten_date_now.sig="d",_emscripten_get_now=ENVIRONMENT_IS_NODE?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),_emscripten_get_now.sig="d",_emscripten_memcpy_big.sig="vppp",_emscripten_resize_heap.sig="ip";var SYSCALLS={DEFAULT_POLLMASK:5,calculateAt:function(t,e,n){if(PATH.isAbs(e))return e;var r;if(t===-100?r=FS.cwd():r=SYSCALLS.getStreamFromFD(t).path,e.length==0){if(!n)throw new FS.ErrnoError(44);return r}return PATH.join2(r,e)},doStat:function(t,e,n){try{var r=t(e)}catch(l){if(l&&l.node&&PATH.normalize(e)!==PATH.normalize(FS.getPath(l.node)))return-54;throw l}HEAP32[n>>2]=r.dev,HEAP32[n+8>>2]=r.ino,HEAP32[n+12>>2]=r.mode,HEAPU32[n+16>>2]=r.nlink,HEAP32[n+20>>2]=r.uid,HEAP32[n+24>>2]=r.gid,HEAP32[n+28>>2]=r.rdev,tempI64=[r.size>>>0,(tempDouble=r.size,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+40>>2]=tempI64[0],HEAP32[n+44>>2]=tempI64[1],HEAP32[n+48>>2]=4096,HEAP32[n+52>>2]=r.blocks;var i=r.atime.getTime(),o=r.mtime.getTime(),u=r.ctime.getTime();return tempI64=[Math.floor(i/1e3)>>>0,(tempDouble=Math.floor(i/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+56>>2]=tempI64[0],HEAP32[n+60>>2]=tempI64[1],HEAPU32[n+64>>2]=i%1e3*1e3,tempI64=[Math.floor(o/1e3)>>>0,(tempDouble=Math.floor(o/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+72>>2]=tempI64[0],HEAP32[n+76>>2]=tempI64[1],HEAPU32[n+80>>2]=o%1e3*1e3,tempI64=[Math.floor(u/1e3)>>>0,(tempDouble=Math.floor(u/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+88>>2]=tempI64[0],HEAP32[n+92>>2]=tempI64[1],HEAPU32[n+96>>2]=u%1e3*1e3,tempI64=[r.ino>>>0,(tempDouble=r.ino,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+104>>2]=tempI64[0],HEAP32[n+108>>2]=tempI64[1],0},doMsync:function(t,e,n,r,i){if(!FS.isFile(e.node.mode))throw new FS.ErrnoError(43);if(2&r)return 0;var o=HEAPU8.slice(t,t+n);FS.msync(e,o,i,n,r)},varargs:void 0,get:function(){return SYSCALLS.varargs+=4,HEAP32[SYSCALLS.varargs-4>>2]},getStr:function(t){return UTF8ToString(t)},getStreamFromFD:function(t){var e=FS.getStream(t);if(!e)throw new FS.ErrnoError(8);return e}};function _proc_exit(t){EXITSTATUS=t,keepRuntimeAlive()||(Module.onExit&&Module.onExit(t),ABORT=!0),quit_(t,new ExitStatus(t))}function exitJS(t,e){EXITSTATUS=t,_proc_exit(t)}_proc_exit.sig="vi";var _exit=exitJS;function _fd_close(t){try{var e=SYSCALLS.getStreamFromFD(t);return FS.close(e),0}catch(n){if(typeof FS>"u"||!(n instanceof FS.ErrnoError))throw n;return n.errno}}function convertI32PairToI53Checked(t,e){return e+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*e:NaN}function _fd_seek(t,e,n,r,i){try{var o=convertI32PairToI53Checked(e,n);if(isNaN(o))return 61;var u=SYSCALLS.getStreamFromFD(t);return FS.llseek(u,o,r),tempI64=[u.position>>>0,(tempDouble=u.position,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[i>>2]=tempI64[0],HEAP32[i+4>>2]=tempI64[1],u.getdents&&o===0&&r===0&&(u.getdents=null),0}catch(l){if(typeof FS>"u"||!(l instanceof FS.ErrnoError))throw l;return l.errno}}function doWritev(t,e,n,r){for(var i=0,o=0;o<n;o++){var u=HEAPU32[e>>2],l=HEAPU32[e+4>>2];e+=8;var d=FS.write(t,HEAP8,u,l,r);if(d<0)return-1;i+=d,r!==void 0&&(r+=d)}return i}function _fd_write(t,e,n,r){try{var i=doWritev(SYSCALLS.getStreamFromFD(t),e,n);return HEAPU32[r>>2]=i,0}catch(o){if(typeof FS>"u"||!(o instanceof FS.ErrnoError))throw o;return o.errno}}function _tree_sitter_log_callback(t,e){if(currentLogCallback){let n=UTF8ToString(e);currentLogCallback(n,t!==0)}}function _tree_sitter_parse_callback(t,e,n,r,i){var o=currentParseCallback(e,{row:n,column:r});typeof o=="string"?(setValue(i,o.length,"i32"),stringToUTF16(o,t,10240)):setValue(i,0,"i32")}function handleException(t){if(t instanceof ExitStatus||t=="unwind")return EXITSTATUS;quit_(1,t)}function allocateUTF8OnStack(t){var e=lengthBytesUTF8(t)+1,n=stackAlloc(e);return stringToUTF8Array(t,HEAP8,n,e),n}function stringToUTF16(t,e,n){if(n===void 0&&(n=2147483647),n<2)return 0;for(var r=e,i=(n-=2)<2*t.length?n/2:t.length,o=0;o<i;++o){var u=t.charCodeAt(o);HEAP16[e>>1]=u,e+=2}return HEAP16[e>>1]=0,e-r}function AsciiToString(t){for(var e="";;){var n=HEAPU8[t++>>0];if(!n)return e;e+=String.fromCharCode(n)}}_exit.sig="vi",_fd_close.sig="ii",_fd_seek.sig="iijip",_fd_write.sig="iippp";var asmLibraryArg={__heap_base:___heap_base,__indirect_function_table:wasmTable,__memory_base:___memory_base,__stack_pointer:___stack_pointer,__table_base:___table_base,_emscripten_get_now_is_monotonic:__emscripten_get_now_is_monotonic,abort:_abort,emscripten_get_now:_emscripten_get_now,emscripten_memcpy_big:_emscripten_memcpy_big,emscripten_resize_heap:_emscripten_resize_heap,exit:_exit,fd_close:_fd_close,fd_seek:_fd_seek,fd_write:_fd_write,memory:wasmMemory,tree_sitter_log_callback:_tree_sitter_log_callback,tree_sitter_parse_callback:_tree_sitter_parse_callback},asm=createWasm(),___wasm_call_ctors=Module.___wasm_call_ctors=function(){return(___wasm_call_ctors=Module.___wasm_call_ctors=Module.asm.__wasm_call_ctors).apply(null,arguments)},___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=function(){return(___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=Module.asm.__wasm_apply_data_relocs).apply(null,arguments)},_malloc=Module._malloc=function(){return(_malloc=Module._malloc=Module.asm.malloc).apply(null,arguments)},_calloc=Module._calloc=function(){return(_calloc=Module._calloc=Module.asm.calloc).apply(null,arguments)},_realloc=Module._realloc=function(){return(_realloc=Module._realloc=Module.asm.realloc).apply(null,arguments)},_free=Module._free=function(){return(_free=Module._free=Module.asm.free).apply(null,arguments)},_ts_language_symbol_count=Module._ts_language_symbol_count=function(){return(_ts_language_symbol_count=Module._ts_language_symbol_count=Module.asm.ts_language_symbol_count).apply(null,arguments)},_ts_language_version=Module._ts_language_version=function(){return(_ts_language_version=Module._ts_language_version=Module.asm.ts_language_version).apply(null,arguments)},_ts_language_field_count=Module._ts_language_field_count=function(){return(_ts_language_field_count=Module._ts_language_field_count=Module.asm.ts_language_field_count).apply(null,arguments)},_ts_language_symbol_name=Module._ts_language_symbol_name=function(){return(_ts_language_symbol_name=Module._ts_language_symbol_name=Module.asm.ts_language_symbol_name).apply(null,arguments)},_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=function(){return(_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=Module.asm.ts_language_symbol_for_name).apply(null,arguments)},_ts_language_symbol_type=Module._ts_language_symbol_type=function(){return(_ts_language_symbol_type=Module._ts_language_symbol_type=Module.asm.ts_language_symbol_type).apply(null,arguments)},_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=function(){return(_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=Module.asm.ts_language_field_name_for_id).apply(null,arguments)},_memset=Module._memset=function(){return(_memset=Module._memset=Module.asm.memset).apply(null,arguments)},_memcpy=Module._memcpy=function(){return(_memcpy=Module._memcpy=Module.asm.memcpy).apply(null,arguments)},_ts_parser_delete=Module._ts_parser_delete=function(){return(_ts_parser_delete=Module._ts_parser_delete=Module.asm.ts_parser_delete).apply(null,arguments)},_ts_parser_reset=Module._ts_parser_reset=function(){return(_ts_parser_reset=Module._ts_parser_reset=Module.asm.ts_parser_reset).apply(null,arguments)},_ts_parser_set_language=Module._ts_parser_set_language=function(){return(_ts_parser_set_language=Module._ts_parser_set_language=Module.asm.ts_parser_set_language).apply(null,arguments)},_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=function(){return(_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=Module.asm.ts_parser_timeout_micros).apply(null,arguments)},_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=function(){return(_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=Module.asm.ts_parser_set_timeout_micros).apply(null,arguments)},_memmove=Module._memmove=function(){return(_memmove=Module._memmove=Module.asm.memmove).apply(null,arguments)},_memcmp=Module._memcmp=function(){return(_memcmp=Module._memcmp=Module.asm.memcmp).apply(null,arguments)},_ts_query_new=Module._ts_query_new=function(){return(_ts_query_new=Module._ts_query_new=Module.asm.ts_query_new).apply(null,arguments)},_ts_query_delete=Module._ts_query_delete=function(){return(_ts_query_delete=Module._ts_query_delete=Module.asm.ts_query_delete).apply(null,arguments)},_iswspace=Module._iswspace=function(){return(_iswspace=Module._iswspace=Module.asm.iswspace).apply(null,arguments)},_iswalnum=Module._iswalnum=function(){return(_iswalnum=Module._iswalnum=Module.asm.iswalnum).apply(null,arguments)},_ts_query_pattern_count=Module._ts_query_pattern_count=function(){return(_ts_query_pattern_count=Module._ts_query_pattern_count=Module.asm.ts_query_pattern_count).apply(null,arguments)},_ts_query_capture_count=Module._ts_query_capture_count=function(){return(_ts_query_capture_count=Module._ts_query_capture_count=Module.asm.ts_query_capture_count).apply(null,arguments)},_ts_query_string_count=Module._ts_query_string_count=function(){return(_ts_query_string_count=Module._ts_query_string_count=Module.asm.ts_query_string_count).apply(null,arguments)},_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=function(){return(_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=Module.asm.ts_query_capture_name_for_id).apply(null,arguments)},_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=function(){return(_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=Module.asm.ts_query_string_value_for_id).apply(null,arguments)},_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=function(){return(_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=Module.asm.ts_query_predicates_for_pattern).apply(null,arguments)},_ts_tree_copy=Module._ts_tree_copy=function(){return(_ts_tree_copy=Module._ts_tree_copy=Module.asm.ts_tree_copy).apply(null,arguments)},_ts_tree_delete=Module._ts_tree_delete=function(){return(_ts_tree_delete=Module._ts_tree_delete=Module.asm.ts_tree_delete).apply(null,arguments)},_ts_init=Module._ts_init=function(){return(_ts_init=Module._ts_init=Module.asm.ts_init).apply(null,arguments)},_ts_parser_new_wasm=Module._ts_parser_new_wasm=function(){return(_ts_parser_new_wasm=Module._ts_parser_new_wasm=Module.asm.ts_parser_new_wasm).apply(null,arguments)},_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=function(){return(_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=Module.asm.ts_parser_enable_logger_wasm).apply(null,arguments)},_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=function(){return(_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=Module.asm.ts_parser_parse_wasm).apply(null,arguments)},_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=function(){return(_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=Module.asm.ts_language_type_is_named_wasm).apply(null,arguments)},_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=function(){return(_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=Module.asm.ts_language_type_is_visible_wasm).apply(null,arguments)},_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=function(){return(_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=Module.asm.ts_tree_root_node_wasm).apply(null,arguments)},_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=function(){return(_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=Module.asm.ts_tree_edit_wasm).apply(null,arguments)},_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=function(){return(_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=Module.asm.ts_tree_get_changed_ranges_wasm).apply(null,arguments)},_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=function(){return(_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=Module.asm.ts_tree_cursor_new_wasm).apply(null,arguments)},_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=function(){return(_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=Module.asm.ts_tree_cursor_delete_wasm).apply(null,arguments)},_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=function(){return(_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=Module.asm.ts_tree_cursor_reset_wasm).apply(null,arguments)},_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=function(){return(_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=Module.asm.ts_tree_cursor_goto_first_child_wasm).apply(null,arguments)},_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=function(){return(_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=Module.asm.ts_tree_cursor_goto_next_sibling_wasm).apply(null,arguments)},_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=function(){return(_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=Module.asm.ts_tree_cursor_goto_parent_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=function(){return(_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=Module.asm.ts_tree_cursor_current_node_type_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=function(){return(_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=Module.asm.ts_tree_cursor_current_node_is_named_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=function(){return(_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=Module.asm.ts_tree_cursor_current_node_is_missing_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=function(){return(_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=Module.asm.ts_tree_cursor_current_node_id_wasm).apply(null,arguments)},_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=function(){return(_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=Module.asm.ts_tree_cursor_start_position_wasm).apply(null,arguments)},_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=function(){return(_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=Module.asm.ts_tree_cursor_end_position_wasm).apply(null,arguments)},_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=function(){return(_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=Module.asm.ts_tree_cursor_start_index_wasm).apply(null,arguments)},_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=function(){return(_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=Module.asm.ts_tree_cursor_end_index_wasm).apply(null,arguments)},_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=function(){return(_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=Module.asm.ts_tree_cursor_current_field_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=function(){return(_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=Module.asm.ts_tree_cursor_current_node_wasm).apply(null,arguments)},_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=function(){return(_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=Module.asm.ts_node_symbol_wasm).apply(null,arguments)},_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=function(){return(_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=Module.asm.ts_node_child_count_wasm).apply(null,arguments)},_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=function(){return(_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=Module.asm.ts_node_named_child_count_wasm).apply(null,arguments)},_ts_node_child_wasm=Module._ts_node_child_wasm=function(){return(_ts_node_child_wasm=Module._ts_node_child_wasm=Module.asm.ts_node_child_wasm).apply(null,arguments)},_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=function(){return(_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=Module.asm.ts_node_named_child_wasm).apply(null,arguments)},_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=function(){return(_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=Module.asm.ts_node_child_by_field_id_wasm).apply(null,arguments)},_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=function(){return(_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=Module.asm.ts_node_next_sibling_wasm).apply(null,arguments)},_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=function(){return(_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=Module.asm.ts_node_prev_sibling_wasm).apply(null,arguments)},_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=function(){return(_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=Module.asm.ts_node_next_named_sibling_wasm).apply(null,arguments)},_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=function(){return(_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=Module.asm.ts_node_prev_named_sibling_wasm).apply(null,arguments)},_ts_node_parent_wasm=Module._ts_node_parent_wasm=function(){return(_ts_node_parent_wasm=Module._ts_node_parent_wasm=Module.asm.ts_node_parent_wasm).apply(null,arguments)},_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=function(){return(_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=Module.asm.ts_node_descendant_for_index_wasm).apply(null,arguments)},_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=function(){return(_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=Module.asm.ts_node_named_descendant_for_index_wasm).apply(null,arguments)},_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=function(){return(_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=Module.asm.ts_node_descendant_for_position_wasm).apply(null,arguments)},_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=function(){return(_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=Module.asm.ts_node_named_descendant_for_position_wasm).apply(null,arguments)},_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=function(){return(_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=Module.asm.ts_node_start_point_wasm).apply(null,arguments)},_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=function(){return(_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=Module.asm.ts_node_end_point_wasm).apply(null,arguments)},_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=function(){return(_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=Module.asm.ts_node_start_index_wasm).apply(null,arguments)},_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=function(){return(_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=Module.asm.ts_node_end_index_wasm).apply(null,arguments)},_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=function(){return(_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=Module.asm.ts_node_to_string_wasm).apply(null,arguments)},_ts_node_children_wasm=Module._ts_node_children_wasm=function(){return(_ts_node_children_wasm=Module._ts_node_children_wasm=Module.asm.ts_node_children_wasm).apply(null,arguments)},_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=function(){return(_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=Module.asm.ts_node_named_children_wasm).apply(null,arguments)},_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=function(){return(_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=Module.asm.ts_node_descendants_of_type_wasm).apply(null,arguments)},_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=function(){return(_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=Module.asm.ts_node_is_named_wasm).apply(null,arguments)},_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=function(){return(_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=Module.asm.ts_node_has_changes_wasm).apply(null,arguments)},_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=function(){return(_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=Module.asm.ts_node_has_error_wasm).apply(null,arguments)},_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=function(){return(_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=Module.asm.ts_node_is_missing_wasm).apply(null,arguments)},_ts_query_matches_wasm=Module._ts_query_matches_wasm=function(){return(_ts_query_matches_wasm=Module._ts_query_matches_wasm=Module.asm.ts_query_matches_wasm).apply(null,arguments)},_ts_query_captures_wasm=Module._ts_query_captures_wasm=function(){return(_ts_query_captures_wasm=Module._ts_query_captures_wasm=Module.asm.ts_query_captures_wasm).apply(null,arguments)},___cxa_atexit=Module.___cxa_atexit=function(){return(___cxa_atexit=Module.___cxa_atexit=Module.asm.__cxa_atexit).apply(null,arguments)},_iswdigit=Module._iswdigit=function(){return(_iswdigit=Module._iswdigit=Module.asm.iswdigit).apply(null,arguments)},_iswalpha=Module._iswalpha=function(){return(_iswalpha=Module._iswalpha=Module.asm.iswalpha).apply(null,arguments)},_iswlower=Module._iswlower=function(){return(_iswlower=Module._iswlower=Module.asm.iswlower).apply(null,arguments)},_memchr=Module._memchr=function(){return(_memchr=Module._memchr=Module.asm.memchr).apply(null,arguments)},_strlen=Module._strlen=function(){return(_strlen=Module._strlen=Module.asm.strlen).apply(null,arguments)},_towupper=Module._towupper=function(){return(_towupper=Module._towupper=Module.asm.towupper).apply(null,arguments)},_setThrew=Module._setThrew=function(){return(_setThrew=Module._setThrew=Module.asm.setThrew).apply(null,arguments)},stackSave=Module.stackSave=function(){return(stackSave=Module.stackSave=Module.asm.stackSave).apply(null,arguments)},stackRestore=Module.stackRestore=function(){return(stackRestore=Module.stackRestore=Module.asm.stackRestore).apply(null,arguments)},stackAlloc=Module.stackAlloc=function(){return(stackAlloc=Module.stackAlloc=Module.asm.stackAlloc).apply(null,arguments)},__Znwm=Module.__Znwm=function(){return(__Znwm=Module.__Znwm=Module.asm._Znwm).apply(null,arguments)},__ZdlPv=Module.__ZdlPv=function(){return(__ZdlPv=Module.__ZdlPv=Module.asm._ZdlPv).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm).apply(null,arguments)},__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=function(){return(__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.asm._ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw).apply(null,arguments)},dynCall_jiji=Module.dynCall_jiji=function(){return(dynCall_jiji=Module.dynCall_jiji=Module.asm.dynCall_jiji).apply(null,arguments)},_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=function(){return(_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=Module.asm.orig$ts_parser_timeout_micros).apply(null,arguments)},_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=function(){return(_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=Module.asm.orig$ts_parser_set_timeout_micros).apply(null,arguments)},calledRun;function callMain(t){var e=Module._main;if(e){(t=t||[]).unshift(thisProgram);var n=t.length,r=stackAlloc(4*(n+1)),i=r>>2;t.forEach(u=>{HEAP32[i++]=allocateUTF8OnStack(u)}),HEAP32[i]=0;try{var o=e(n,r);return exitJS(o,!0),o}catch(u){return handleException(u)}}}Module.AsciiToString=AsciiToString,Module.stringToUTF16=stringToUTF16,dependenciesFulfilled=function t(){calledRun||run(),calledRun||(dependenciesFulfilled=t)};var dylibsLoaded=!1;function run(t){function e(){calledRun||(calledRun=!0,Module.calledRun=!0,ABORT||(initRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),shouldRunNow&&callMain(t),postRun()))}t=t||arguments_,runDependencies>0||!dylibsLoaded&&(preloadDylibs(),dylibsLoaded=!0,runDependencies>0)||(preRun(),runDependencies>0||(Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),e()},1)):e()))}if(Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),run();let C=Module,INTERNAL={},SIZE_OF_INT=4,SIZE_OF_NODE=5*SIZE_OF_INT,SIZE_OF_POINT=2*SIZE_OF_INT,SIZE_OF_RANGE=2*SIZE_OF_INT+2*SIZE_OF_POINT,ZERO_POINT={row:0,column:0},QUERY_WORD_REGEX=/[\w-.]*/g,PREDICATE_STEP_TYPE_CAPTURE=1,PREDICATE_STEP_TYPE_STRING=2,LANGUAGE_FUNCTION_REGEX=/^_?tree_sitter_\w+/;var VERSION,MIN_COMPATIBLE_VERSION,TRANSFER_BUFFER,currentParseCallback,currentLogCallback;class ParserImpl{static init(){TRANSFER_BUFFER=C._ts_init(),VERSION=getValue(TRANSFER_BUFFER,"i32"),MIN_COMPATIBLE_VERSION=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}initialize(){C._ts_parser_new_wasm(),this[0]=getValue(TRANSFER_BUFFER,"i32"),this[1]=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}delete(){C._ts_parser_delete(this[0]),C._free(this[1]),this[0]=0,this[1]=0}setLanguage(e){let n;if(e){if(e.constructor!==Language)throw new Error("Argument must be a Language");{n=e[0];let r=C._ts_language_version(n);if(r<MIN_COMPATIBLE_VERSION||VERSION<r)throw new Error(`Incompatible language version ${r}. Compatibility range ${MIN_COMPATIBLE_VERSION} through ${VERSION}.`)}}else n=0,e=null;return this.language=e,C._ts_parser_set_language(this[0],n),this}getLanguage(){return this.language}parse(e,n,r){if(typeof e=="string")currentParseCallback=(d,f,p)=>e.slice(d,p);else{if(typeof e!="function")throw new Error("Argument must be a string or a function");currentParseCallback=e}this.logCallback?(currentLogCallback=this.logCallback,C._ts_parser_enable_logger_wasm(this[0],1)):(currentLogCallback=null,C._ts_parser_enable_logger_wasm(this[0],0));let i=0,o=0;if(r&&r.includedRanges){i=r.includedRanges.length,o=C._calloc(i,SIZE_OF_RANGE);let d=o;for(let f=0;f<i;f++)marshalRange(d,r.includedRanges[f]),d+=SIZE_OF_RANGE}let u=C._ts_parser_parse_wasm(this[0],this[1],n?n[0]:0,o,i);if(!u)throw currentParseCallback=null,currentLogCallback=null,new Error("Parsing failed");let l=new Tree(INTERNAL,u,this.language,currentParseCallback);return currentParseCallback=null,currentLogCallback=null,l}reset(){C._ts_parser_reset(this[0])}setTimeoutMicros(e){C._ts_parser_set_timeout_micros(this[0],e)}getTimeoutMicros(){return C._ts_parser_timeout_micros(this[0])}setLogger(e){if(e){if(typeof e!="function")throw new Error("Logger callback must be a function")}else e=null;return this.logCallback=e,this}getLogger(){return this.logCallback}}class Tree{constructor(e,n,r,i){assertInternal(e),this[0]=n,this.language=r,this.textCallback=i}copy(){let e=C._ts_tree_copy(this[0]);return new Tree(INTERNAL,e,this.language,this.textCallback)}delete(){C._ts_tree_delete(this[0]),this[0]=0}edit(e){marshalEdit(e),C._ts_tree_edit_wasm(this[0])}get rootNode(){return C._ts_tree_root_node_wasm(this[0]),unmarshalNode(this)}getLanguage(){return this.language}walk(){return this.rootNode.walk()}getChangedRanges(e){if(e.constructor!==Tree)throw new TypeError("Argument must be a Tree");C._ts_tree_get_changed_ranges_wasm(this[0],e[0]);let n=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),i=new Array(n);if(n>0){let o=r;for(let u=0;u<n;u++)i[u]=unmarshalRange(o),o+=SIZE_OF_RANGE;C._free(r)}return i}}class Node{constructor(e,n){assertInternal(e),this.tree=n}get typeId(){return marshalNode(this),C._ts_node_symbol_wasm(this.tree[0])}get type(){return this.tree.language.types[this.typeId]||"ERROR"}get endPosition(){return marshalNode(this),C._ts_node_end_point_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endIndex(){return marshalNode(this),C._ts_node_end_index_wasm(this.tree[0])}get text(){return getText(this.tree,this.startIndex,this.endIndex)}isNamed(){return marshalNode(this),C._ts_node_is_named_wasm(this.tree[0])===1}hasError(){return marshalNode(this),C._ts_node_has_error_wasm(this.tree[0])===1}hasChanges(){return marshalNode(this),C._ts_node_has_changes_wasm(this.tree[0])===1}isMissing(){return marshalNode(this),C._ts_node_is_missing_wasm(this.tree[0])===1}equals(e){return this.id===e.id}child(e){return marshalNode(this),C._ts_node_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}namedChild(e){return marshalNode(this),C._ts_node_named_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldId(e){return marshalNode(this),C._ts_node_child_by_field_id_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldName(e){let n=this.tree.language.fields.indexOf(e);if(n!==-1)return this.childForFieldId(n)}get childCount(){return marshalNode(this),C._ts_node_child_count_wasm(this.tree[0])}get namedChildCount(){return marshalNode(this),C._ts_node_named_child_count_wasm(this.tree[0])}get firstChild(){return this.child(0)}get firstNamedChild(){return this.namedChild(0)}get lastChild(){return this.child(this.childCount-1)}get lastNamedChild(){return this.namedChild(this.namedChildCount-1)}get children(){if(!this._children){marshalNode(this),C._ts_node_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),n=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._children=new Array(e),e>0){let r=n;for(let i=0;i<e;i++)this._children[i]=unmarshalNode(this.tree,r),r+=SIZE_OF_NODE;C._free(n)}}return this._children}get namedChildren(){if(!this._namedChildren){marshalNode(this),C._ts_node_named_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),n=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._namedChildren=new Array(e),e>0){let r=n;for(let i=0;i<e;i++)this._namedChildren[i]=unmarshalNode(this.tree,r),r+=SIZE_OF_NODE;C._free(n)}}return this._namedChildren}descendantsOfType(e,n,r){Array.isArray(e)||(e=[e]),n||(n=ZERO_POINT),r||(r=ZERO_POINT);let i=[],o=this.tree.language.types;for(let p=0,v=o.length;p<v;p++)e.includes(o[p])&&i.push(p);let u=C._malloc(SIZE_OF_INT*i.length);for(let p=0,v=i.length;p<v;p++)setValue(u+p*SIZE_OF_INT,i[p],"i32");marshalNode(this),C._ts_node_descendants_of_type_wasm(this.tree[0],u,i.length,n.row,n.column,r.row,r.column);let l=getValue(TRANSFER_BUFFER,"i32"),d=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),f=new Array(l);if(l>0){let p=d;for(let v=0;v<l;v++)f[v]=unmarshalNode(this.tree,p),p+=SIZE_OF_NODE}return C._free(d),C._free(u),f}get nextSibling(){return marshalNode(this),C._ts_node_next_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousSibling(){return marshalNode(this),C._ts_node_prev_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get nextNamedSibling(){return marshalNode(this),C._ts_node_next_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousNamedSibling(){return marshalNode(this),C._ts_node_prev_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get parent(){return marshalNode(this),C._ts_node_parent_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForIndex(e,n=e){if(typeof e!="number"||typeof n!="number")throw new Error("Arguments must be numbers");marshalNode(this);let r=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(r,e,"i32"),setValue(r+SIZE_OF_INT,n,"i32"),C._ts_node_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForIndex(e,n=e){if(typeof e!="number"||typeof n!="number")throw new Error("Arguments must be numbers");marshalNode(this);let r=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(r,e,"i32"),setValue(r+SIZE_OF_INT,n,"i32"),C._ts_node_named_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForPosition(e,n=e){if(!isPoint(e)||!isPoint(n))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let r=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(r,e),marshalPoint(r+SIZE_OF_POINT,n),C._ts_node_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForPosition(e,n=e){if(!isPoint(e)||!isPoint(n))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let r=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(r,e),marshalPoint(r+SIZE_OF_POINT,n),C._ts_node_named_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}walk(){return marshalNode(this),C._ts_tree_cursor_new_wasm(this.tree[0]),new TreeCursor(INTERNAL,this.tree)}toString(){marshalNode(this);let e=C._ts_node_to_string_wasm(this.tree[0]),n=AsciiToString(e);return C._free(e),n}}class TreeCursor{constructor(e,n){assertInternal(e),this.tree=n,unmarshalTreeCursor(this)}delete(){marshalTreeCursor(this),C._ts_tree_cursor_delete_wasm(this.tree[0]),this[0]=this[1]=this[2]=0}reset(e){marshalNode(e),marshalTreeCursor(this,TRANSFER_BUFFER+SIZE_OF_NODE),C._ts_tree_cursor_reset_wasm(this.tree[0]),unmarshalTreeCursor(this)}get nodeType(){return this.tree.language.types[this.nodeTypeId]||"ERROR"}get nodeTypeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_type_id_wasm(this.tree[0])}get nodeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_id_wasm(this.tree[0])}get nodeIsNamed(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_named_wasm(this.tree[0])===1}get nodeIsMissing(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_missing_wasm(this.tree[0])===1}get nodeText(){marshalTreeCursor(this);let e=C._ts_tree_cursor_start_index_wasm(this.tree[0]),n=C._ts_tree_cursor_end_index_wasm(this.tree[0]);return getText(this.tree,e,n)}get startPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_start_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_end_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get startIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_start_index_wasm(this.tree[0])}get endIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_end_index_wasm(this.tree[0])}currentNode(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_wasm(this.tree[0]),unmarshalNode(this.tree)}currentFieldId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_field_id_wasm(this.tree[0])}currentFieldName(){return this.tree.language.fields[this.currentFieldId()]}gotoFirstChild(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_first_child_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoNextSibling(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_next_sibling_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoParent(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_parent_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}}class Language{constructor(e,n){assertInternal(e),this[0]=n,this.types=new Array(C._ts_language_symbol_count(this[0]));for(let r=0,i=this.types.length;r<i;r++)C._ts_language_symbol_type(this[0],r)<2&&(this.types[r]=UTF8ToString(C._ts_language_symbol_name(this[0],r)));this.fields=new Array(C._ts_language_field_count(this[0])+1);for(let r=0,i=this.fields.length;r<i;r++){let o=C._ts_language_field_name_for_id(this[0],r);this.fields[r]=o!==0?UTF8ToString(o):null}}get version(){return C._ts_language_version(this[0])}get fieldCount(){return this.fields.length-1}fieldIdForName(e){let n=this.fields.indexOf(e);return n!==-1?n:null}fieldNameForId(e){return this.fields[e]||null}idForNodeType(e,n){let r=lengthBytesUTF8(e),i=C._malloc(r+1);stringToUTF8(e,i,r+1);let o=C._ts_language_symbol_for_name(this[0],i,r,n);return C._free(i),o||null}get nodeTypeCount(){return C._ts_language_symbol_count(this[0])}nodeTypeForId(e){let n=C._ts_language_symbol_name(this[0],e);return n?UTF8ToString(n):null}nodeTypeIsNamed(e){return!!C._ts_language_type_is_named_wasm(this[0],e)}nodeTypeIsVisible(e){return!!C._ts_language_type_is_visible_wasm(this[0],e)}query(e){let n=lengthBytesUTF8(e),r=C._malloc(n+1);stringToUTF8(e,r,n+1);let i=C._ts_query_new(this[0],r,n,TRANSFER_BUFFER,TRANSFER_BUFFER+SIZE_OF_INT);if(!i){let T=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),q=UTF8ToString(r,getValue(TRANSFER_BUFFER,"i32")).length,k=e.substr(q,100).split(`
`)[0],m,b=k.match(QUERY_WORD_REGEX)[0];switch(T){case 2:m=new RangeError(`Bad node name '${b}'`);break;case 3:m=new RangeError(`Bad field name '${b}'`);break;case 4:m=new RangeError(`Bad capture name @${b}`);break;case 5:m=new TypeError(`Bad pattern structure at offset ${q}: '${k}'...`),b="";break;default:m=new SyntaxError(`Bad syntax at offset ${q}: '${k}'...`),b=""}throw m.index=q,m.length=b.length,C._free(r),m}let o=C._ts_query_string_count(i),u=C._ts_query_capture_count(i),l=C._ts_query_pattern_count(i),d=new Array(u),f=new Array(o);for(let T=0;T<u;T++){let q=C._ts_query_capture_name_for_id(i,T,TRANSFER_BUFFER),k=getValue(TRANSFER_BUFFER,"i32");d[T]=UTF8ToString(q,k)}for(let T=0;T<o;T++){let q=C._ts_query_string_value_for_id(i,T,TRANSFER_BUFFER),k=getValue(TRANSFER_BUFFER,"i32");f[T]=UTF8ToString(q,k)}let p=new Array(l),v=new Array(l),w=new Array(l),D=new Array(l),S=new Array(l);for(let T=0;T<l;T++){let q=C._ts_query_predicates_for_pattern(i,T,TRANSFER_BUFFER),k=getValue(TRANSFER_BUFFER,"i32");D[T]=[],S[T]=[];let m=[],b=q;for(let I=0;I<k;I++){let V=getValue(b,"i32");b+=SIZE_OF_INT;let re=getValue(b,"i32");if(b+=SIZE_OF_INT,V===PREDICATE_STEP_TYPE_CAPTURE)m.push({type:"capture",name:d[re]});else if(V===PREDICATE_STEP_TYPE_STRING)m.push({type:"string",value:f[re]});else if(m.length>0){if(m[0].type!=="string")throw new Error("Predicates must begin with a literal value");let oe=m[0].value,ve=!0;switch(oe){case"not-eq?":ve=!1;case"eq?":if(m.length!==3)throw new Error("Wrong number of arguments to `#eq?` predicate. Expected 2, got "+(m.length-1));if(m[1].type!=="capture")throw new Error(`First argument of \`#eq?\` predicate must be a capture. Got "${m[1].value}"`);if(m[2].type==="capture"){let me=m[1].name,x=m[2].name;S[T].push(function(F){let A,W;for(let J of F)J.name===me&&(A=J.node),J.name===x&&(W=J.node);return A===void 0||W===void 0||A.text===W.text===ve})}else{let me=m[1].name,x=m[2].value;S[T].push(function(F){for(let A of F)if(A.name===me)return A.node.text===x===ve;return!0})}break;case"not-match?":ve=!1;case"match?":if(m.length!==3)throw new Error(`Wrong number of arguments to \`#match?\` predicate. Expected 2, got ${m.length-1}.`);if(m[1].type!=="capture")throw new Error(`First argument of \`#match?\` predicate must be a capture. Got "${m[1].value}".`);if(m[2].type!=="string")throw new Error(`Second argument of \`#match?\` predicate must be a string. Got @${m[2].value}.`);let Je=m[1].name,Ye=new RegExp(m[2].value);S[T].push(function(me){for(let x of me)if(x.name===Je)return Ye.test(x.node.text)===ve;return!0});break;case"set!":if(m.length<2||m.length>3)throw new Error(`Wrong number of arguments to \`#set!\` predicate. Expected 1 or 2. Got ${m.length-1}.`);if(m.some(me=>me.type!=="string"))throw new Error('Arguments to `#set!` predicate must be a strings.".');p[T]||(p[T]={}),p[T][m[1].value]=m[2]?m[2].value:null;break;case"is?":case"is-not?":if(m.length<2||m.length>3)throw new Error(`Wrong number of arguments to \`#${oe}\` predicate. Expected 1 or 2. Got ${m.length-1}.`);if(m.some(me=>me.type!=="string"))throw new Error(`Arguments to \`#${oe}\` predicate must be a strings.".`);let Be=oe==="is?"?v:w;Be[T]||(Be[T]={}),Be[T][m[1].value]=m[2]?m[2].value:null;break;default:D[T].push({operator:oe,operands:m.slice(1)})}m.length=0}}Object.freeze(p[T]),Object.freeze(v[T]),Object.freeze(w[T])}return C._free(r),new Query(INTERNAL,i,d,S,D,Object.freeze(p),Object.freeze(v),Object.freeze(w))}static load(e){let n;if(e instanceof Uint8Array)n=Promise.resolve(e);else{let i=e;if(typeof process<"u"&&process.versions&&process.versions.node){let o=require("fs");n=Promise.resolve(o.readFileSync(i))}else n=fetch(i).then(o=>o.arrayBuffer().then(u=>{if(o.ok)return new Uint8Array(u);{let l=new TextDecoder("utf-8").decode(u);throw new Error(`Language.load failed with status ${o.status}.

${l}`)}}))}let r=typeof loadSideModule=="function"?loadSideModule:loadWebAssemblyModule;return n.then(i=>r(i,{loadAsync:!0})).then(i=>{let o=Object.keys(i),u=o.find(d=>LANGUAGE_FUNCTION_REGEX.test(d)&&!d.includes("external_scanner_"));u||console.log(`Couldn't find language function in WASM file. Symbols:
${JSON.stringify(o,null,2)}`);let l=i[u]();return new Language(INTERNAL,l)})}}class Query{constructor(e,n,r,i,o,u,l,d){assertInternal(e),this[0]=n,this.captureNames=r,this.textPredicates=i,this.predicates=o,this.setProperties=u,this.assertedProperties=l,this.refutedProperties=d,this.exceededMatchLimit=!1}delete(){C._ts_query_delete(this[0]),this[0]=0}matches(e,n,r,i){n||(n=ZERO_POINT),r||(r=ZERO_POINT),i||(i={});let o=i.matchLimit;if(o===void 0)o=0;else if(typeof o!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_matches_wasm(this[0],e.tree[0],n.row,n.column,r.row,r.column,o);let u=getValue(TRANSFER_BUFFER,"i32"),l=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),d=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),f=new Array(u);this.exceededMatchLimit=!!d;let p=0,v=l;for(let w=0;w<u;w++){let D=getValue(v,"i32");v+=SIZE_OF_INT;let S=getValue(v,"i32");v+=SIZE_OF_INT;let T=new Array(S);if(v=unmarshalCaptures(this,e.tree,v,T),this.textPredicates[D].every(q=>q(T))){f[p++]={pattern:D,captures:T};let q=this.setProperties[D];q&&(f[w].setProperties=q);let k=this.assertedProperties[D];k&&(f[w].assertedProperties=k);let m=this.refutedProperties[D];m&&(f[w].refutedProperties=m)}}return f.length=p,C._free(l),f}captures(e,n,r,i){n||(n=ZERO_POINT),r||(r=ZERO_POINT),i||(i={});let o=i.matchLimit;if(o===void 0)o=0;else if(typeof o!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_captures_wasm(this[0],e.tree[0],n.row,n.column,r.row,r.column,o);let u=getValue(TRANSFER_BUFFER,"i32"),l=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),d=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),f=[];this.exceededMatchLimit=!!d;let p=[],v=l;for(let w=0;w<u;w++){let D=getValue(v,"i32");v+=SIZE_OF_INT;let S=getValue(v,"i32");v+=SIZE_OF_INT;let T=getValue(v,"i32");if(v+=SIZE_OF_INT,p.length=S,v=unmarshalCaptures(this,e.tree,v,p),this.textPredicates[D].every(q=>q(p))){let q=p[T],k=this.setProperties[D];k&&(q.setProperties=k);let m=this.assertedProperties[D];m&&(q.assertedProperties=m);let b=this.refutedProperties[D];b&&(q.refutedProperties=b),f.push(q)}}return C._free(l),f}predicatesForPattern(e){return this.predicates[e]}didExceedMatchLimit(){return this.exceededMatchLimit}}function getText(t,e,n){let r=n-e,i=t.textCallback(e,null,n);for(e+=i.length;e<n;){let o=t.textCallback(e,null,n);if(!(o&&o.length>0))break;e+=o.length,i+=o}return e>n&&(i=i.slice(0,r)),i}function unmarshalCaptures(t,e,n,r){for(let i=0,o=r.length;i<o;i++){let u=getValue(n,"i32"),l=unmarshalNode(e,n+=SIZE_OF_INT);n+=SIZE_OF_NODE,r[i]={name:t.captureNames[u],node:l}}return n}function assertInternal(t){if(t!==INTERNAL)throw new Error("Illegal constructor")}function isPoint(t){return t&&typeof t.row=="number"&&typeof t.column=="number"}function marshalNode(t){let e=TRANSFER_BUFFER;setValue(e,t.id,"i32"),e+=SIZE_OF_INT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.row,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.column,"i32"),e+=SIZE_OF_INT,setValue(e,t[0],"i32")}function unmarshalNode(t,e=TRANSFER_BUFFER){let n=getValue(e,"i32");if(n===0)return null;let r=getValue(e+=SIZE_OF_INT,"i32"),i=getValue(e+=SIZE_OF_INT,"i32"),o=getValue(e+=SIZE_OF_INT,"i32"),u=getValue(e+=SIZE_OF_INT,"i32"),l=new Node(INTERNAL,t);return l.id=n,l.startIndex=r,l.startPosition={row:i,column:o},l[0]=u,l}function marshalTreeCursor(t,e=TRANSFER_BUFFER){setValue(e+0*SIZE_OF_INT,t[0],"i32"),setValue(e+1*SIZE_OF_INT,t[1],"i32"),setValue(e+2*SIZE_OF_INT,t[2],"i32")}function unmarshalTreeCursor(t){t[0]=getValue(TRANSFER_BUFFER+0*SIZE_OF_INT,"i32"),t[1]=getValue(TRANSFER_BUFFER+1*SIZE_OF_INT,"i32"),t[2]=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32")}function marshalPoint(t,e){setValue(t,e.row,"i32"),setValue(t+SIZE_OF_INT,e.column,"i32")}function unmarshalPoint(t){return{row:getValue(t,"i32"),column:getValue(t+SIZE_OF_INT,"i32")}}function marshalRange(t,e){marshalPoint(t,e.startPosition),marshalPoint(t+=SIZE_OF_POINT,e.endPosition),setValue(t+=SIZE_OF_POINT,e.startIndex,"i32"),setValue(t+=SIZE_OF_INT,e.endIndex,"i32"),t+=SIZE_OF_INT}function unmarshalRange(t){let e={};return e.startPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.endPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.startIndex=getValue(t,"i32"),t+=SIZE_OF_INT,e.endIndex=getValue(t,"i32"),e}function marshalEdit(t){let e=TRANSFER_BUFFER;marshalPoint(e,t.startPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.oldEndPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.newEndPosition),e+=SIZE_OF_POINT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.oldEndIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.newEndIndex,"i32"),e+=SIZE_OF_INT}for(let t of Object.getOwnPropertyNames(ParserImpl.prototype))Object.defineProperty(Parser.prototype,t,{value:ParserImpl.prototype[t],enumerable:!1,writable:!1});Parser.Language=Language,Module.onRuntimeInitialized=()=>{ParserImpl.init(),resolveInitPromise()}}))}}return Parser}();typeof exports=="object"&&(module.exports=TreeSitter)});var Yr=U((zn,vs)=>{(function(t,e){if(typeof zn=="object"&&typeof vs=="object")vs.exports=e();else if(typeof define=="function"&&define.amd)define([],e);else{var n=e();for(var r in n)(typeof zn=="object"?zn:t)[r]=n[r]}})(zn,()=>(()=>{"use strict";var t={470:i=>{function o(d){if(typeof d!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(d))}function u(d,f){for(var p,v="",w=0,D=-1,S=0,T=0;T<=d.length;++T){if(T<d.length)p=d.charCodeAt(T);else{if(p===47)break;p=47}if(p===47){if(!(D===T-1||S===1))if(D!==T-1&&S===2){if(v.length<2||w!==2||v.charCodeAt(v.length-1)!==46||v.charCodeAt(v.length-2)!==46){if(v.length>2){var q=v.lastIndexOf("/");if(q!==v.length-1){q===-1?(v="",w=0):w=(v=v.slice(0,q)).length-1-v.lastIndexOf("/"),D=T,S=0;continue}}else if(v.length===2||v.length===1){v="",w=0,D=T,S=0;continue}}f&&(v.length>0?v+="/..":v="..",w=2)}else v.length>0?v+="/"+d.slice(D+1,T):v=d.slice(D+1,T),w=T-D-1;D=T,S=0}else p===46&&S!==-1?++S:S=-1}return v}var l={resolve:function(){for(var d,f="",p=!1,v=arguments.length-1;v>=-1&&!p;v--){var w;v>=0?w=arguments[v]:(d===void 0&&(d=process.cwd()),w=d),o(w),w.length!==0&&(f=w+"/"+f,p=w.charCodeAt(0)===47)}return f=u(f,!p),p?f.length>0?"/"+f:"/":f.length>0?f:"."},normalize:function(d){if(o(d),d.length===0)return".";var f=d.charCodeAt(0)===47,p=d.charCodeAt(d.length-1)===47;return(d=u(d,!f)).length!==0||f||(d="."),d.length>0&&p&&(d+="/"),f?"/"+d:d},isAbsolute:function(d){return o(d),d.length>0&&d.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var d,f=0;f<arguments.length;++f){var p=arguments[f];o(p),p.length>0&&(d===void 0?d=p:d+="/"+p)}return d===void 0?".":l.normalize(d)},relative:function(d,f){if(o(d),o(f),d===f||(d=l.resolve(d))===(f=l.resolve(f)))return"";for(var p=1;p<d.length&&d.charCodeAt(p)===47;++p);for(var v=d.length,w=v-p,D=1;D<f.length&&f.charCodeAt(D)===47;++D);for(var S=f.length-D,T=w<S?w:S,q=-1,k=0;k<=T;++k){if(k===T){if(S>T){if(f.charCodeAt(D+k)===47)return f.slice(D+k+1);if(k===0)return f.slice(D+k)}else w>T&&(d.charCodeAt(p+k)===47?q=k:k===0&&(q=0));break}var m=d.charCodeAt(p+k);if(m!==f.charCodeAt(D+k))break;m===47&&(q=k)}var b="";for(k=p+q+1;k<=v;++k)k!==v&&d.charCodeAt(k)!==47||(b.length===0?b+="..":b+="/..");return b.length>0?b+f.slice(D+q):(D+=q,f.charCodeAt(D)===47&&++D,f.slice(D))},_makeLong:function(d){return d},dirname:function(d){if(o(d),d.length===0)return".";for(var f=d.charCodeAt(0),p=f===47,v=-1,w=!0,D=d.length-1;D>=1;--D)if((f=d.charCodeAt(D))===47){if(!w){v=D;break}}else w=!1;return v===-1?p?"/":".":p&&v===1?"//":d.slice(0,v)},basename:function(d,f){if(f!==void 0&&typeof f!="string")throw new TypeError('"ext" argument must be a string');o(d);var p,v=0,w=-1,D=!0;if(f!==void 0&&f.length>0&&f.length<=d.length){if(f.length===d.length&&f===d)return"";var S=f.length-1,T=-1;for(p=d.length-1;p>=0;--p){var q=d.charCodeAt(p);if(q===47){if(!D){v=p+1;break}}else T===-1&&(D=!1,T=p+1),S>=0&&(q===f.charCodeAt(S)?--S==-1&&(w=p):(S=-1,w=T))}return v===w?w=T:w===-1&&(w=d.length),d.slice(v,w)}for(p=d.length-1;p>=0;--p)if(d.charCodeAt(p)===47){if(!D){v=p+1;break}}else w===-1&&(D=!1,w=p+1);return w===-1?"":d.slice(v,w)},extname:function(d){o(d);for(var f=-1,p=0,v=-1,w=!0,D=0,S=d.length-1;S>=0;--S){var T=d.charCodeAt(S);if(T!==47)v===-1&&(w=!1,v=S+1),T===46?f===-1?f=S:D!==1&&(D=1):f!==-1&&(D=-1);else if(!w){p=S+1;break}}return f===-1||v===-1||D===0||D===1&&f===v-1&&f===p+1?"":d.slice(f,v)},format:function(d){if(d===null||typeof d!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof d);return function(f,p){var v=p.dir||p.root,w=p.base||(p.name||"")+(p.ext||"");return v?v===p.root?v+w:v+"/"+w:w}(0,d)},parse:function(d){o(d);var f={root:"",dir:"",base:"",ext:"",name:""};if(d.length===0)return f;var p,v=d.charCodeAt(0),w=v===47;w?(f.root="/",p=1):p=0;for(var D=-1,S=0,T=-1,q=!0,k=d.length-1,m=0;k>=p;--k)if((v=d.charCodeAt(k))!==47)T===-1&&(q=!1,T=k+1),v===46?D===-1?D=k:m!==1&&(m=1):D!==-1&&(m=-1);else if(!q){S=k+1;break}return D===-1||T===-1||m===0||m===1&&D===T-1&&D===S+1?T!==-1&&(f.base=f.name=S===0&&w?d.slice(1,T):d.slice(S,T)):(S===0&&w?(f.name=d.slice(1,D),f.base=d.slice(1,T)):(f.name=d.slice(S,D),f.base=d.slice(S,T)),f.ext=d.slice(D,T)),S>0?f.dir=d.slice(0,S-1):w&&(f.dir="/"),f},sep:"/",delimiter:":",win32:null,posix:null};l.posix=l,i.exports=l},674:(i,o)=>{if(Object.defineProperty(o,"__esModule",{value:!0}),o.isWindows=void 0,typeof process=="object")o.isWindows=process.platform==="win32";else if(typeof navigator=="object"){var u=navigator.userAgent;o.isWindows=u.indexOf("Windows")>=0}},796:function(i,o,u){var l,d,f=this&&this.__extends||(l=function(x,F){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,W){A.__proto__=W}||function(A,W){for(var J in W)Object.prototype.hasOwnProperty.call(W,J)&&(A[J]=W[J])},l(x,F)},function(x,F){if(typeof F!="function"&&F!==null)throw new TypeError("Class extends value "+String(F)+" is not a constructor or null");function A(){this.constructor=x}l(x,F),x.prototype=F===null?Object.create(F):(A.prototype=F.prototype,new A)});Object.defineProperty(o,"__esModule",{value:!0}),o.uriToFsPath=o.URI=void 0;var p=u(674),v=/^\w[\w\d+.-]*$/,w=/^\//,D=/^\/\//;function S(x,F){if(!x.scheme&&F)throw new Error('[UriError]: Scheme is missing: {scheme: "", authority: "'.concat(x.authority,'", path: "').concat(x.path,'", query: "').concat(x.query,'", fragment: "').concat(x.fragment,'"}'));if(x.scheme&&!v.test(x.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(x.path){if(x.authority){if(!w.test(x.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(D.test(x.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}var T="",q="/",k=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,m=function(){function x(F,A,W,J,X,Z){Z===void 0&&(Z=!1),typeof F=="object"?(this.scheme=F.scheme||T,this.authority=F.authority||T,this.path=F.path||T,this.query=F.query||T,this.fragment=F.fragment||T):(this.scheme=function(De,Ce){return De||Ce?De:"file"}(F,Z),this.authority=A||T,this.path=function(De,Ce){switch(De){case"https":case"http":case"file":Ce?Ce[0]!==q&&(Ce=q+Ce):Ce=q}return Ce}(this.scheme,W||T),this.query=J||T,this.fragment=X||T,S(this,Z))}return x.isUri=function(F){return F instanceof x||!!F&&typeof F.authority=="string"&&typeof F.fragment=="string"&&typeof F.path=="string"&&typeof F.query=="string"&&typeof F.scheme=="string"&&typeof F.fsPath=="string"&&typeof F.with=="function"&&typeof F.toString=="function"},Object.defineProperty(x.prototype,"fsPath",{get:function(){return ve(this,!1)},enumerable:!1,configurable:!0}),x.prototype.with=function(F){if(!F)return this;var A=F.scheme,W=F.authority,J=F.path,X=F.query,Z=F.fragment;return A===void 0?A=this.scheme:A===null&&(A=T),W===void 0?W=this.authority:W===null&&(W=T),J===void 0?J=this.path:J===null&&(J=T),X===void 0?X=this.query:X===null&&(X=T),Z===void 0?Z=this.fragment:Z===null&&(Z=T),A===this.scheme&&W===this.authority&&J===this.path&&X===this.query&&Z===this.fragment?this:new I(A,W,J,X,Z)},x.parse=function(F,A){A===void 0&&(A=!1);var W=k.exec(F);return W?new I(W[2]||T,me(W[4]||T),me(W[5]||T),me(W[7]||T),me(W[9]||T),A):new I(T,T,T,T,T)},x.file=function(F){var A=T;if(p.isWindows&&(F=F.replace(/\\/g,q)),F[0]===q&&F[1]===q){var W=F.indexOf(q,2);W===-1?(A=F.substring(2),F=q):(A=F.substring(2,W),F=F.substring(W)||q)}return new I("file",A,F,T,T)},x.from=function(F){var A=new I(F.scheme,F.authority,F.path,F.query,F.fragment);return S(A,!0),A},x.prototype.toString=function(F){return F===void 0&&(F=!1),Je(this,F)},x.prototype.toJSON=function(){return this},x.revive=function(F){if(F){if(F instanceof x)return F;var A=new I(F);return A._formatted=F.external,A._fsPath=F._sep===b?F.fsPath:null,A}return F},x}();o.URI=m;var b=p.isWindows?1:void 0,I=function(x){function F(){var A=x!==null&&x.apply(this,arguments)||this;return A._formatted=null,A._fsPath=null,A}return f(F,x),Object.defineProperty(F.prototype,"fsPath",{get:function(){return this._fsPath||(this._fsPath=ve(this,!1)),this._fsPath},enumerable:!1,configurable:!0}),F.prototype.toString=function(A){return A===void 0&&(A=!1),A?Je(this,!0):(this._formatted||(this._formatted=Je(this,!1)),this._formatted)},F.prototype.toJSON=function(){var A={$mid:1};return this._fsPath&&(A.fsPath=this._fsPath,A._sep=b),this._formatted&&(A.external=this._formatted),this.path&&(A.path=this.path),this.scheme&&(A.scheme=this.scheme),this.authority&&(A.authority=this.authority),this.query&&(A.query=this.query),this.fragment&&(A.fragment=this.fragment),A},F}(m),V=((d={})[58]="%3A",d[47]="%2F",d[63]="%3F",d[35]="%23",d[91]="%5B",d[93]="%5D",d[64]="%40",d[33]="%21",d[36]="%24",d[38]="%26",d[39]="%27",d[40]="%28",d[41]="%29",d[42]="%2A",d[43]="%2B",d[44]="%2C",d[59]="%3B",d[61]="%3D",d[32]="%20",d);function re(x,F,A){for(var W=void 0,J=-1,X=0;X<x.length;X++){var Z=x.charCodeAt(X);if(Z>=97&&Z<=122||Z>=65&&Z<=90||Z>=48&&Z<=57||Z===45||Z===46||Z===95||Z===126||F&&Z===47||A&&Z===91||A&&Z===93||A&&Z===58)J!==-1&&(W+=encodeURIComponent(x.substring(J,X)),J=-1),W!==void 0&&(W+=x.charAt(X));else{W===void 0&&(W=x.substr(0,X));var De=V[Z];De!==void 0?(J!==-1&&(W+=encodeURIComponent(x.substring(J,X)),J=-1),W+=De):J===-1&&(J=X)}}return J!==-1&&(W+=encodeURIComponent(x.substring(J))),W!==void 0?W:x}function oe(x){for(var F=void 0,A=0;A<x.length;A++){var W=x.charCodeAt(A);W===35||W===63?(F===void 0&&(F=x.substr(0,A)),F+=V[W]):F!==void 0&&(F+=x[A])}return F!==void 0?F:x}function ve(x,F){var A;return A=x.authority&&x.path.length>1&&x.scheme==="file"?"//".concat(x.authority).concat(x.path):x.path.charCodeAt(0)===47&&(x.path.charCodeAt(1)>=65&&x.path.charCodeAt(1)<=90||x.path.charCodeAt(1)>=97&&x.path.charCodeAt(1)<=122)&&x.path.charCodeAt(2)===58?F?x.path.substr(1):x.path[1].toLowerCase()+x.path.substr(2):x.path,p.isWindows&&(A=A.replace(/\//g,"\\")),A}function Je(x,F){var A=F?oe:re,W="",J=x.scheme,X=x.authority,Z=x.path,De=x.query,Ce=x.fragment;if(J&&(W+=J,W+=":"),(X||J==="file")&&(W+=q,W+=q),X){var qe=X.indexOf("@");if(qe!==-1){var Ct=X.substr(0,qe);X=X.substr(qe+1),(qe=Ct.lastIndexOf(":"))===-1?W+=A(Ct,!1,!1):(W+=A(Ct.substr(0,qe),!1,!1),W+=":",W+=A(Ct.substr(qe+1),!1,!0)),W+="@"}(qe=(X=X.toLowerCase()).lastIndexOf(":"))===-1?W+=A(X,!1,!0):(W+=A(X.substr(0,qe),!1,!0),W+=X.substr(qe))}if(Z){if(Z.length>=3&&Z.charCodeAt(0)===47&&Z.charCodeAt(2)===58)(ot=Z.charCodeAt(1))>=65&&ot<=90&&(Z="/".concat(String.fromCharCode(ot+32),":").concat(Z.substr(3)));else if(Z.length>=2&&Z.charCodeAt(1)===58){var ot;(ot=Z.charCodeAt(0))>=65&&ot<=90&&(Z="".concat(String.fromCharCode(ot+32),":").concat(Z.substr(2)))}W+=A(Z,!0,!1)}return De&&(W+="?",W+=A(De,!1,!1)),Ce&&(W+="#",W+=F?Ce:re(Ce,!1,!1)),W}function Ye(x){try{return decodeURIComponent(x)}catch{return x.length>3?x.substr(0,3)+Ye(x.substr(3)):x}}o.uriToFsPath=ve;var Be=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function me(x){return x.match(Be)?x.replace(Be,function(F){return Ye(F)}):x}},679:function(i,o,u){var l=this&&this.__spreadArray||function(w,D,S){if(S||arguments.length===2)for(var T,q=0,k=D.length;q<k;q++)!T&&q in D||(T||(T=Array.prototype.slice.call(D,0,q)),T[q]=D[q]);return w.concat(T||Array.prototype.slice.call(D))};Object.defineProperty(o,"__esModule",{value:!0}),o.Utils=void 0;var d,f=u(470),p=f.posix||f,v="/";(d=o.Utils||(o.Utils={})).joinPath=function(w){for(var D=[],S=1;S<arguments.length;S++)D[S-1]=arguments[S];return w.with({path:p.join.apply(p,l([w.path],D,!1))})},d.resolvePath=function(w){for(var D=[],S=1;S<arguments.length;S++)D[S-1]=arguments[S];var T=w.path,q=!1;T[0]!==v&&(T=v+T,q=!0);var k=p.resolve.apply(p,l([T],D,!1));return q&&k[0]===v&&!w.authority&&(k=k.substring(1)),w.with({path:k})},d.dirname=function(w){if(w.path.length===0||w.path===v)return w;var D=p.dirname(w.path);return D.length===1&&D.charCodeAt(0)===46&&(D=""),w.with({path:D})},d.basename=function(w){return p.basename(w.path)},d.extname=function(w){return p.extname(w.path)}}},e={};function n(i){var o=e[i];if(o!==void 0)return o.exports;var u=e[i]={exports:{}};return t[i].call(u.exports,u,u.exports,n),u.exports}var r={};return(()=>{var i=r;Object.defineProperty(i,"__esModule",{value:!0}),i.Utils=i.URI=void 0;var o=n(796);Object.defineProperty(i,"URI",{enumerable:!0,get:function(){return o.URI}});var u=n(679);Object.defineProperty(i,"Utils",{enumerable:!0,get:function(){return u.Utils}})})(),r})())});var Wu=U((Uu,ei)=>{(function(t){if(typeof ei=="object"&&typeof ei.exports=="object"){var e=t(require,Uu);e!==void 0&&(ei.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=void 0;class n{constructor(f,p,v,w){this._uri=f,this._languageId=p,this._version=v,this._content=w,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(f){if(f){let p=this.offsetAt(f.start),v=this.offsetAt(f.end);return this._content.substring(p,v)}return this._content}update(f,p){for(let v of f)if(n.isIncremental(v)){let w=u(v.range),D=this.offsetAt(w.start),S=this.offsetAt(w.end);this._content=this._content.substring(0,D)+v.text+this._content.substring(S,this._content.length);let T=Math.max(w.start.line,0),q=Math.max(w.end.line,0),k=this._lineOffsets,m=o(v.text,!1,D);if(q-T===m.length)for(let I=0,V=m.length;I<V;I++)k[I+T+1]=m[I];else m.length<1e4?k.splice(T+1,q-T,...m):this._lineOffsets=k=k.slice(0,T+1).concat(m,k.slice(q+1));let b=v.text.length-(S-D);if(b!==0)for(let I=T+1+m.length,V=k.length;I<V;I++)k[I]=k[I]+b}else if(n.isFull(v))this._content=v.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received");this._version=p}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=o(this._content,!0)),this._lineOffsets}positionAt(f){f=Math.max(Math.min(f,this._content.length),0);let p=this.getLineOffsets(),v=0,w=p.length;if(w===0)return{line:0,character:f};for(;v<w;){let S=Math.floor((v+w)/2);p[S]>f?w=S:v=S+1}let D=v-1;return{line:D,character:f-p[D]}}offsetAt(f){let p=this.getLineOffsets();if(f.line>=p.length)return this._content.length;if(f.line<0)return 0;let v=p[f.line],w=f.line+1<p.length?p[f.line+1]:this._content.length;return Math.max(Math.min(v+f.character,w),v)}get lineCount(){return this.getLineOffsets().length}static isIncremental(f){let p=f;return p!=null&&typeof p.text=="string"&&p.range!==void 0&&(p.rangeLength===void 0||typeof p.rangeLength=="number")}static isFull(f){let p=f;return p!=null&&typeof p.text=="string"&&p.range===void 0&&p.rangeLength===void 0}}var r;(function(d){function f(w,D,S,T){return new n(w,D,S,T)}d.create=f;function p(w,D,S){if(w instanceof n)return w.update(D,S),w;throw new Error("TextDocument.update: document must be created by TextDocument.create")}d.update=p;function v(w,D){let S=w.getText(),T=i(D.map(l),(m,b)=>{let I=m.range.start.line-b.range.start.line;return I===0?m.range.start.character-b.range.start.character:I}),q=0,k=[];for(let m of T){let b=w.offsetAt(m.range.start);if(b<q)throw new Error("Overlapping edit");b>q&&k.push(S.substring(q,b)),m.newText.length&&k.push(m.newText),q=w.offsetAt(m.range.end)}return k.push(S.substr(q)),k.join("")}d.applyEdits=v})(r=e.TextDocument||(e.TextDocument={}));function i(d,f){if(d.length<=1)return d;let p=d.length/2|0,v=d.slice(0,p),w=d.slice(p);i(v,f),i(w,f);let D=0,S=0,T=0;for(;D<v.length&&S<w.length;)f(v[D],w[S])<=0?d[T++]=v[D++]:d[T++]=w[S++];for(;D<v.length;)d[T++]=v[D++];for(;S<w.length;)d[T++]=w[S++];return d}function o(d,f,p=0){let v=f?[p]:[];for(let w=0;w<d.length;w++){let D=d.charCodeAt(w);(D===13||D===10)&&(D===13&&w+1<d.length&&d.charCodeAt(w+1)===10&&w++,v.push(p+w+1))}return v}function u(d){let f=d.start,p=d.end;return f.line>p.line||f.line===p.line&&f.character>p.character?{start:p,end:f}:d}function l(d){let f=u(d.range);return f!==d.range?{newText:d.newText,range:f}:d}})});var rc=Se(Zr());var Gr=Se(Zr()),ye=(0,Gr.createConnection)(Gr.ProposedFeatures.all);var Kr=Se(Ou()),Vn,Au=async(t,e)=>{if(Vn)return;let n={locateFile(){return t}};await Kr.default.init(n),Vn=await Kr.default.Language.load(e)},Lu=()=>{let t=new Kr.default;return t.setLanguage(Vn),t.setTimeoutMicros(1e3*1e3),t};function Jr(t){return()=>Vn.query(t.toString())}var Of=Jr`
(include_directive) @include
(pragma_directive) @pragma
`;function ju(t){let e=Of().captures(t),n=e.filter(i=>i.name==="include"),r=e.filter(i=>i.name==="pragma");return{includes:n.map(i=>({path:i.node.childForFieldName("path").text,node:i.node})),pramgas:r.map(i=>{var o;return{key:i.node.childForFieldName("key").text,value:(o=i.node.childForFieldName("value"))==null?void 0:o.text,node:i.node}})}}var Xr=Se(Yr());function Af(t,e){let n=t.split("/").slice(0,-1).join("/").substring(7);return Xr.Utils.joinPath(Xr.URI.parse(n),"/",e).toString()}var Qr=class{constructor(e,n){this._trees=e;this._documents=n;this._cache=new Map}async update(e,n){let r=ju(n.rootNode),i=[],o=[];for(let u of r.includes){let l=Af(e.uri,u.path.slice(1).slice(0,-1));(await this._documents.retrieve(l)).exists?o.push(l):i.push({node:u.node,path:l})}this._cache.set(e.uri,{includes:o,notFound:i})}getIncludedDocuments(e){let n=new Set,r=[e];for(;r.length>0;){let i=r.pop();if(n.has(i))continue;n.add(i);let o=this._cache.get(i);o&&r.push(...o.includes)}return[...n]}getNotFound(e){let n=this._cache.get(e);return(n==null?void 0:n.notFound)||[]}dispose(){}};var Hu=require("util"),ni=Se(Ge()),Bu=Se(Ge()),ws=Se(Wu());var pn=class extends Map{constructor(n){super();this._options=n}set(n,r){return super.set(n,r),this._checkSize(),this}get(n){if(!this.has(n))return;let r=super.get(n);return this.delete(n),this.set(n,r),r}_checkSize(){setTimeout(()=>{let n=Math.ceil(this._options.size*.3);if(this.size<this._options.size+n)return;let r=Array.from(this.entries()).slice(0,n);for(let[i]of r)this.delete(i);this._options.dispose(r)},0)}};var Vu=Se(Yr()),ti=class extends Bu.TextDocuments{constructor(n){super({create:ws.TextDocument.create,update:(r,i,o)=>{let u,l=!0,d={document:r,changes:[]};for(let f of i){if(!ni.TextDocumentContentChangeEvent.isIncremental(f)){l=!1;break}let p=r.offsetAt(f.range.start);d.changes.push({text:f.text,range:f.range,rangeOffset:p,rangeLength:f.rangeLength??r.offsetAt(f.range.end)-p})}return u=ws.TextDocument.update(r,i,o),l&&this._onDidChangeContent2.fire(d),u}});this._connection=n;this._onDidChangeContent2=new ni.Emitter;this.onDidChangeContent2=this._onDidChangeContent2.event;this._decoder=new Hu.TextDecoder;this._fileDocuments=new pn({size:200,dispose:r=>{}}),super.listen(n),n.onNotification("file-cache/remove",r=>this._fileDocuments.delete(r))}async retrieve(n){let r=this.get(n);if(r)return{exists:!0,document:r};let i=this._fileDocuments.get(n);return i||(i=this._requestDocument(n),this._fileDocuments.set(n,i)),i}async _requestDocument(n){let r=Vu.URI.parse(n);if(r.scheme==="vscode-notebook-cell")return{exists:!1,document:void 0};let i;try{let o=await this._fileDocuments.get(r.fsPath);return o===void 0?{exists:!1,document:void 0}:o}catch{return{exists:!1,document:void 0}}}};var Ne=Se(Ge());var rt={symbolDiscovery:process.env.FUNC_SYMBOL_DISCOVERY,autocompleteAddParentheses:process.env.FUNC_AUTOCOMPLETE_ADD_PARENTHESES==="true",experimentalDiagnostics:process.env.FUNC_EXPRERIMENTAL_DIAGNOSTICS==="true"};function Ts(t){rt.symbolDiscovery=t.symbolDiscovery,rt.autocompleteAddParentheses=t.autocompleteAddParentheses,rt.experimentalDiagnostics=t.experimentalDiagnostics}function $n(t){return t.type==="primitive_type"?{kind:"primitive",name:t.text}:t.type==="tensor_type"||t.type==="tuple_type"?{kind:t.type==="tensor_type"?"tensor":"tuple",shape:t.children.map(e=>$n(e))}:t.type==="var_type"?{kind:"var"}:t.type==="hole_type"?{kind:"var"}:t.type==="unit_type"?{kind:"unit"}:{kind:"var"}}function gn(t){if(t.type==="variable_declaration"){let e=t.childForFieldName("type").child(0);return $n(e)}else if(t.type==="parameter_declaration"||t.type==="global_var_declaration"||t.type==="constant_declaration"){let e=t.childForFieldName("type");return $n(e)}return{kind:"var"}}function zu(t){if(t.type==="function_definition"){let e=t.childForFieldName("return_type");return{kind:"function",arguments:t.descendantsOfType("parameter_declaration").map(r=>({name:r.childForFieldName("name").text,type:$n(r)})),returns:$n(e)}}return{kind:"hole"}}function Yt(t){return t.kind==="primitive"?t.name:t.kind==="function"?`(${t.arguments.map(n=>{let r=Yt(n.type);return n.name?`${r} ${n.name}`:r}).join(", ")}) -> ${Yt(t.returns)}`:t.kind==="var"?"var":t.kind==="unit"?"()":t.kind==="hole"?"_":t.kind==="generic"?t.name:t.kind==="tensor"?`(${t.shape.map(e=>Yt(e)).join(", ")})`:t.kind==="tuple"?`(${t.shape.map(e=>Yt(e)).join(", ")})`:"_"}function yn(t,e){var i;let n=t.descendantForPosition(e),r=[];for(;n;){for(;n&&n.type!=="block_statement";)n=n.parent;if(n){for(let o of n.children)if(o.type==="statement"&&o.children[0].type==="expression_statement"){o=o.children[0];let u=o.descendantsOfType("variable_declaration",void 0,e);for(let l of u){let d=l.descendantsOfType("identifier",void 0,e);r.push(...d.map(f=>({node:f,declaration:l,kind:"variable",text:f.text,type:gn(l)})))}}if(n=n.parent,n&&n.type==="function_definition"){let o=((i=n.childForFieldName("arguments"))==null?void 0:i.descendantsOfType("parameter_declaration"))||[];for(let u of o){let l=u.childForFieldName("name");l&&r.push({node:l,declaration:u,kind:"variable",text:l.text,type:gn(u)})}}}}return r}var $u=Se(Zr());function Le(t){return $u.Range.create(t.startPosition.row,t.startPosition.column,t.endPosition.row,t.endPosition.column)}function bn(t){return{column:t.character,row:t.line}}var ri=class{constructor(e,n,r,i){this._documents=e;this._trees=n;this._symbols=r;this._deps=i}register(e){e.onRequest(Ne.CompletionRequest.type,this.provideCompletionItems.bind(this))}async provideIncludeCompletionItems(e,n){let r=await ye.sendRequest("completion/matching-files",{pathPrefix:n.text.slice(1).slice(0,-1),uri:e.textDocument.uri}),i=[];for(let o of r){let u=Ne.CompletionItem.create(o);u.kind=Ne.CompletionItemKind.File,i.push(u)}return i}async provideCompletionItems(e){var p,v;let n=await this._documents.retrieve(e.textDocument.uri),r=this._trees.getParseTree(n.document);if(!r)return[];let i=bn(e.position),o=r.rootNode.descendantForPosition(i);if(o.type==="string_literal"&&o.parent&&o.parent.type==="include_directive")return this.provideIncludeCompletionItems(e,o);let u=!1;(((p=e.context)==null?void 0:p.triggerCharacter)==="."||((v=e.context)==null?void 0:v.triggerCharacter)==="~")&&(u=!0);let l=[];u||l.push(...yn(r.rootNode,i).map(w=>{let D=Ne.CompletionItem.create(w.text);return D.kind=Ne.CompletionItemKind.Variable,D.detail=Yt(w.type),D}));let d=this._deps.getIncludedDocuments(e.textDocument.uri);await this._symbols.update();let f=new Set;for(let[w,D]of this._symbols.index)for(let[S,T]of D.entries())if(T.definitions.size!==0&&!(rt.symbolDiscovery==="only #include"&&S!==e.textDocument.uri&&!d.includes(S)))for(let[q,k]of T.definitions.entries()){if(f.has(`${w}_${q}`))continue;f.add(`${w}_${q}`);let m=Ne.CompletionItem.create(w);if(q===Ne.SymbolKind.Function){if(m.kind=Ne.CompletionItemKind.Function,rt.autocompleteAddParentheses&&k.kind==="function"){let b=[...k.arguments];if(u&&!b.shift())continue;m.insertText=`${w}(${b.map((I,V)=>`\${${V+1}:${I.name}}`)})`,m.insertTextFormat=Ne.InsertTextFormat.Snippet}}else if(q===Ne.SymbolKind.Variable&&!u)m.kind=Ne.CompletionItemKind.Variable;else if(q===Ne.SymbolKind.Constant&&!u)m.kind=Ne.CompletionItemKind.Constant;else continue;m.detail=Yt(k),l.push(m)}return l}};var Zu=Se(Ge());var ii=class{constructor(e,n,r,i){this._documents=e;this._trees=n;this._symbols=r;this._directives=i}register(e){e.onRequest(Zu.DefinitionRequest.type,this.provideDefinitions.bind(this))}async provideDefinitions(e){let n=await this._documents.retrieve(e.textDocument.uri),r=this._trees.getParseTree(n.document);if(!r)return[];let i=r.rootNode.descendantForPosition(bn(e.position));if(i.type!=="identifier"&&i.type!=="function_name")return[];let o;return rt.symbolDiscovery==="only #include"&&(o=this._directives.getIncludedDocuments(e.textDocument.uri)),(await this._symbols.getDefinitions(i.text,o)).map(l=>l.location)}};var oi=class{constructor(e,n){this._deps=e;this._symbols=n}register(e){}async retrieveAvailableGlobalSymbols(e){await this._symbols.update();let n=this._deps.getIncludedDocuments(e),r=[];for(let[i,o]of this._symbols.index)for(let[u,l]of o.entries())if(l.definitions.size!==0&&!(rt.symbolDiscovery==="only #include"&&u!==e&&!n.includes(u)))for(let[d,f]of l.definitions.entries())r.push({kind:d,type:f,name:i});return r}async provideDiagnostics(e,n){let r=[],i=await this.retrieveAvailableGlobalSymbols(e.uri),o=l=>{if(l.isMissing()?r.push({message:"Missing "+l.type,range:Le(l)}):l.hasError()&&l.children.every(d=>!d.hasError())&&r.push({message:"Syntax error",range:Le(l)}),rt.experimentalDiagnostics&&l.type==="block_statement"&&rt.symbolDiscovery==="only #include"){let d=l.descendantsOfType("identifier");for(let f of d){let p=yn(n.rootNode,f.endPosition);i.find(w=>w.name.startsWith("~")?w.name.slice(1)===f.text:w.name===f.text)||p.find(w=>w.text===f.text)||r.push({message:`\u0421annot find symbol with name '${f.text}'`,range:Le(f)})}}for(let d of l.children)o(d)};o(n.rootNode);let u=this._deps.getNotFound(e.uri);for(let l of u)r.push({message:"Dependency not found: "+l.path,range:Le(l.node)});ye.sendDiagnostics({diagnostics:r,uri:e.uri,version:e.version})}};var it=Se(Ge());var Lf=Jr`
(function_definition name: (function_name) @function)
(global_var_declaration name: (identifier) @globalVar)
(constant_declaration name: (identifier) @const)
`;function Gu(t){return Lf().captures(t).map(e=>({text:e.node.text,type:e.name,range:Le(e.node),node:e.node}))}var si=class{constructor(e,n){this._documents=e;this._trees=n}register(e){e.onRequest(it.DocumentSymbolRequest.type,this.provideDocumentSymbols.bind(this))}async provideDocumentSymbols(e){let n=await this._documents.retrieve(e.textDocument.uri);return ai(n.document,this._trees).map(i=>i.symbol)}};function ai(t,e){let n=e.getParseTree(t);if(!n)return[];let r=Gu(n.rootNode),i=[];for(let o of r){let u=[];if(o.type=="function"){let l=o.node.parent.childForFieldName("body");if(l){let d=l.descendantsOfType("variable_declaration");for(let f of d){let p=f.descendantsOfType("identifier");u.push(...p.map(v=>{let w=Le(v);return it.DocumentSymbol.create(v.text,"",it.SymbolKind.Variable,w,w)}))}}i.push({node:o.node.parent,symbol:it.DocumentSymbol.create(o.text,"",it.SymbolKind.Function,Le(o.node.parent),o.range,u),funcType:zu(o.node.parent)})}else o.type=="globalVar"?i.push({node:o.node.parent,symbol:it.DocumentSymbol.create(o.text,"",it.SymbolKind.Variable,o.range,o.range,u),funcType:gn(o.node.parent)}):o.type=="const"&&i.push({node:o.node,symbol:it.DocumentSymbol.create(o.text,"",it.SymbolKind.Constant,o.range,o.range),funcType:gn(o.node)})}return i}var Ju=Se(Ge());var Ke=Se(Ge());var ui={};function ze(t,e){ui[t]=ui[t]||[],ui[t].push(e)}var $e=(t,e,n,r)=>{let i=[],o=r.insertSpaces?r.tabSize*n:n;if(t.startPosition.column===o)return[];let u=e.getText({start:{line:t.startPosition.row,character:0},end:Le(t).start});if(u.trim().length>0)return[];let l=r.insertSpaces?" ":"	";return r.insertSpaces&&u.includes("	")||!r.insertSpaces&&u.includes(" ")?(i.push(Ke.TextEdit.replace(Ke.Range.create(Ke.Position.create(t.startPosition.row,0),Ke.Position.create(t.startPosition.row,t.startPosition.column)),l.repeat(o))),i):(t.startPosition.column>o?i.push(Ke.TextEdit.del(Ke.Range.create(Ke.Position.create(t.startPosition.row,o),Ke.Position.create(t.startPosition.row,t.startPosition.column)))):i.push(Ke.TextEdit.insert(Ke.Position.create(t.startPosition.row,0),l.repeat(o-t.startPosition.column))),i)},jf=(t,e)=>(n,r,i,o)=>t.includes(n.parent.type)?[]:e(n,r,i,o);ze("function_definition",$e);ze("compiler_directive",$e);ze("global_var_declarations",$e);ze("comment",$e);ze("statement",$e);ze("expression",jf(["expression_statement"],$e));ze(")",$e);ze("(",$e);ze("{",$e);ze("}",$e);ze("[",$e);ze("]",$e);ze("&",$e);ze("parameter_declaration",$e);function Ku(t,e,n,r){let i=ui[t.type];if(!i)return[];let o=[];for(let u of i)o.push(...u(t,e,n,r));return o}var ci=class{constructor(e,n){this._documents=e;this._trees=n}register(e){e.onRequest(Ju.DocumentFormattingRequest.type,this.provideDocumentFormattingEdits.bind(this))}async provideDocumentFormattingEdits(e){let n=await this._trees.getParseTree(e.textDocument.uri),r=await this._documents.retrieve(e.textDocument.uri),i=[],o=0,u=n.rootNode.walk(),l=u.gotoFirstChild();for(;l;){let d=u.currentNode();if((d.type==="}"||d.type===")"||d.type==="]")&&o--,i.push(...Ku(d,r.document,o,e.options)),(d.type==="{"||d.type==="("||d.type==="[")&&o++,!u.gotoFirstChild())for(;!u.gotoNextSibling()&&(l=u.gotoParent(),!!l););}return i}};var Zn=require("perf_hooks"),fi=Se(Ge());async function Yu(t,e){let n=[],r=0;for(;;){let i=t.slice(r,r+e);if(i.length===0)break;let o=await Promise.all(i.map(u=>u()));r+=e,n.push(...o)}return n}var Rs=class{constructor(e,n){this.key=e;this.value=n}},li=class t{constructor(e,n){this.ch=e;this.element=n;this._size=0;this._depth=0;this._children=new Map}static create(){return new t("",void 0)}get size(){return this._size}get depth(){return this._depth}set(e,n){let r=Array.from(e),i=this;for(let o=0;o<r.length;o++){i._depth=Math.max(r.length-o,i._depth);let u=r[o],l=i._children.get(u);l||(l=new t(u,void 0),i._children.set(u,l)),i=l}i.element?i.element.value=n:(this._size+=1,i.element=new Rs(e,n))}get(e){var i;let n=Array.from(e),r=this;for(let o=0;o<n.length;o++){let u=n[o],l=r._children.get(u);if(!l)return;r=l}return(i=r.element)==null?void 0:i.value}delete(e){let n=Array.from(e),r=this,i=[];for(let o=0;o<n.length;o++){let u=n[o],l=r._children.get(u);if(!l)return!1;i.push([u,r]),r=l}if(!r.element)return!1;for(r.element=void 0,this._size-=1;i.length>0;){let[o,u]=i.pop();if(r._children.size===0&&!r.element&&u._children.delete(o),r=u,r._children.size===0)r._depth=0;else{let l=0;for(let d of r._children.values())l=Math.max(l,d.depth);r._depth=1+l}}return!0}*query(e){let n=new Set,r=new Map,i=(o,u,l,d,f)=>{if(n.has(o)||d>12)return;let p=r.get(o);if(!(p!=null&&p.get(l))){if(p?p.set(l,!0):r.set(o,new Map([[l,!0]])),l>=u.length){n.add(o);return}if(!(u.length-l>o._depth))for(let[v,w]of o._children)v.toLowerCase()===u[l].toLowerCase()&&i(w,u,l+1,d,v),i(w,u,l,d+1,v)}};i(this,e,0,0,this.ch);for(let o of n)yield*o}*[Symbol.iterator](){let e=[this];for(;e.length>0;){let n=e.shift();n.element&&(yield[n.element.key,n.element.value]);for(let r of n._children.values())e.push(r)}}};function Es(t,e){return[]}var di=class{constructor(){this._queue=new Set}enqueue(e){this._queue.has(e)||this._queue.add(e)}dequeue(e){this._queue.delete(e)}consume(e){if(e===void 0){let i=Array.from(this._queue.values());return this._queue.clear(),i}let n=[],r=this._queue.values();for(;e>0;e--){let i=r.next();if(i.done)break;let o=i.value;n.push(o),this._queue.delete(o)}return n}},Ds=class{constructor(){this._index=li.create();this._cleanup=new Map}get(e){return this._index.get(e)}query(e){return this._index.query(Array.from(e))}[Symbol.iterator](){return this._index[Symbol.iterator]()}update(e,n){var r;(r=this._cleanup.get(e))==null||r();for(let[i,o]of n){let u=this._index.get(i);u?u.set(e,o):this._index.set(i,new Map([[e,o]]))}this._cleanup.set(e,()=>{for(let i of n.keys()){let o=this._index.get(i);o&&o.delete(e)&&o.size===0&&this._index.delete(i)}})}delete(e){let n=this._cleanup.get(e);return n?(n(),this._cleanup.delete(e),!0):!1}},_i=class{constructor(e,n){this._trees=e;this._documents=n;this.index=new Ds;this._syncQueue=new di;this._asyncQueue=new di}addFile(e){this._syncQueue.enqueue(e),this._asyncQueue.dequeue(e)}removeFile(e){this._syncQueue.dequeue(e),this._asyncQueue.dequeue(e),this.index.delete(e)}async update(){return await this._currentUpdate,this._currentUpdate=this._doUpdate(this._syncQueue.consume()).catch(e=>console.error(e)),this._currentUpdate}async _doUpdate(e,n){if(e.length!==0){let r=Date.now(),i=e.map(this._createIndexTask,this),o=await Yu(i,50),u=0,l=0;for(let d of o)u+=d.durationRetrieve,l+=d.durationIndex;n||console.log(`[index] added ${e.length} files ${Date.now()-r}ms
	retrieval: ${Math.round(u)}ms
	indexing: ${Math.round(l)}ms`)}}_createIndexTask(e){return async()=>{let n=Zn.performance.now(),r=await this._documents.retrieve(e),i=Zn.performance.now()-n;this.index.delete(e);let o=Zn.performance.now();try{this._doIndex(r.document)}catch(l){console.log(`FAILED to index ${e}`,l)}let u=Zn.performance.now()-o;return{durationRetrieve:i,durationIndex:u}}}_doIndex(e,n,r){let i=new Map;n||(n=ai(e,this._trees));for(let{symbol:o,funcType:u}of n){let l=i.get(o.name);l?l.definitions.set(o.kind,u):i.set(o.name,{definitions:new Map([[o.kind,u]]),usages:new Set})}r||(r=Es(e,this._trees));for(let o of r){let u=i.get(o.name);u?u.usages.add(o.kind):i.set(o.name,{definitions:new Map,usages:new Set([o.kind])})}this.index.update(e.uri,i)}async initFiles(e){new Set(e).forEach(this.addFile,this),await this.update()}async getDefinitions(e,n){await this.update();let r=[],i=this.index.get(e)??[],o=[];for(let[u,l]of i)l.definitions.size!==0&&(n!==void 0&&!n.includes(u)||o.push(this._documents.retrieve(u).then(d=>{let f=ai(d.document,this._trees);for(let{symbol:p}of f)if(p.name===e){let v=fi.SymbolInformation.create(p.name,p.kind,p.selectionRange,u);r.unshift(v)}setTimeout(()=>{this._asyncQueue.dequeue(d.document.uri),this._doIndex(d.document,f)})}).catch(d=>{console.log(d)})));return await Promise.allSettled(o),r}async getUsages(e){await this.update();let n=[],r=this.index.get(e)??[],i=[];for(let[o,u]of r)u.usages.size!==0&&i.push(this._documents.retrieve(o).then(l=>{let d=Es(l.document,this._trees);for(let f of d)if(f.name===e){let p=fi.Location.create(o,f.range);n.unshift(p)}setTimeout(()=>{this._asyncQueue.dequeue(l.document.uri),this._doIndex(l.document,void 0,d)})}).catch(l=>{console.log(l)}));return await Promise.allSettled(i),n}};var Qu=Se(Ge());var Ss=class{constructor(e,n,r){this.version=e;this.tree=n;this.edits=r}},mi=class t{constructor(e){this._documents=e;this._cache=new pn({size:200,dispose(e){for(let[,n]of e)n.tree.delete()}});this._listener=[];this._parser=Lu();this._onParseDone=new Qu.Emitter;this.onParseDone=this._onParseDone.event;this._listener.push(e.onDidChangeContent2(n=>{let r=this._cache.get(n.document.uri);r&&r.edits.push(t._asEdits(n))}))}dispose(){for(let e of this._cache.values())e.tree.delete();for(let e of this._listener)e.dispose()}getParseTree(e){return typeof e=="string"?this._documents.retrieve(e).then(n=>{if(n.exists)return this._parse(n.document)}):this._parse(e)}_parse(e){let n=this._cache.get(e.uri);if((n==null?void 0:n.version)===e.version)return n.tree;try{let r=e.version,i=e.getText();if(n){let o=n.tree;n.edits.flat().forEach(l=>o.edit(l)),n.edits.length=0,n.tree=this._parser.parse(i,o),n.version=r,o.delete()}else{let o=this._parser.parse(i);n=new Ss(r,o,[]),this._cache.set(e.uri,n)}return this._onParseDone.fire({document:e,tree:n.tree}),n.tree}catch{this._cache.delete(e.uri);return}}static _asEdits(e){return e.changes.map(n=>({startPosition:this._asTsPoint(n.range.start),oldEndPosition:this._asTsPoint(n.range.end),newEndPosition:this._asTsPoint(e.document.positionAt(n.rangeOffset+n.text.length)),startIndex:n.rangeOffset,oldEndIndex:n.rangeOffset+n.rangeLength,newEndIndex:n.rangeOffset+n.text.length}))}static _asTsPoint(e){let{line:n,character:r}=e;return{row:n,column:r}}};var ec=Se(Ge());function Uf(t){let e=t.parent;for(;e&&e.type!=="block_statement";)e=e.parent;return e}function Xu(t,e){return t.row<e.row?-1:t.row>e.row?1:t.column<e.column?-1:t.column>e.column?1:0}function Wf(t,e,n,r){let i=[],o=u=>{u.type===e&&(!n||Xu(n,u.startPosition)<=0)&&(!r||Xu(r,u.endPosition)>=0)&&i.push(u);for(let l of u.children)o(l)};return o(t),i}var hi=class{constructor(e,n,r){this._documents=e;this._trees=n;this._symbols=r}register(e){e.onRequest(ec.RenameRequest.type,this.performRename.bind(this))}async performRename(e){let n=await this._trees.getParseTree(e.textDocument.uri),r=n.rootNode.descendantForPosition(bn(e.position)),o=yn(n.rootNode,r.endPosition).find(u=>u.text===r.text);if(o){let u=Uf(o.node),d=Wf(u,"identifier",o.node.startPosition,u.endPosition).filter(f=>f.text===r.text);return{changes:{[e.textDocument.uri]:d.map(f=>({range:Le(f),newText:e.newName}))}}}else return null}};var nc=Se(Ge());var Ps=require("crypto");var pi;function tc(t,e=4294967295){let n=Buffer.from(t);pi===void 0&&Hf();for(let r=0;r<n.length;++r)e=pi[(e^n[r])&255]^e>>>8;return(e^-1)>>>0}function Hf(){pi=new Int32Array(256);for(let t=0;t<256;t++){let e=t;for(let n=8;n>0;--n)e=e&1?e>>>1^-306674912:e>>>1;pi[t]=e}}var gi=class{constructor(e,n){this._documents=e;this._trees=n}register(e){e.onRequest(nc.CodeLensRequest.type,this.provideCodeLens.bind(this))}async provideCodeLens(e){let n=await this._documents.retrieve(e.textDocument.uri),r=this._trees.getParseTree(n.document);return r?r.rootNode.descendantsOfType("number_string_literal").map(o=>{let u=o.text[o.text.length-1],l=o.text.slice(1,o.text.length-2),d;return u==="H"?d=(0,Ps.createHash)("sha256").update(l).digest("hex"):u==="h"?d=(0,Ps.createHash)("sha256").update(l).digest().slice(0,8).toString("hex"):u==="u"?d=Buffer.from(l).toString("hex"):u==="c"?d=tc(l).toString(16):d=l,{range:Le(o),command:{title:`Copy ${d} to clipboard`,command:"func.copyToClipboard",arguments:[d]}}}):[]}};var Ms=Se(Yr());ye.onInitialize(async t=>{var w,D;await Au(((w=t.initializationOptions)==null?void 0:w.treeSitterWasmUri)??Ms.URI.file(__dirname+"/../lib/tree-sitter.wasm").fsPath,((D=t.initializationOptions)==null?void 0:D.langUri)??Ms.URI.file(__dirname+"/../lib/tree-sitter-func.wasm").fsPath);let e=new ti(ye),n=new mi(e),r=new _i(n,e),i=new Qr(n,e),o=new oi(i,r);return o.register(ye),new si(e,n).register(ye),new ri(e,n,r,i).register(ye),new ii(e,n,r,i).register(ye),new ci(e,n).register(ye),new hi(e,n,r).register(ye),new gi(e,n).register(ye),ye.onNotification("configuration/change",S=>{Ts(S)}),ye.onDidChangeConfiguration(S=>{Ts(S.settings)}),e.all().forEach(S=>r.addFile(S.uri)),e.onDidOpen(S=>r.addFile(S.document.uri)),e.onDidChangeContent(S=>r.addFile(S.document.uri)),ye.onNotification("queue/remove",S=>r.removeFile(S)),ye.onNotification("queue/add",S=>r.addFile(S)),ye.onRequest("queue/init",S=>r.initFiles(S)),ye.onDidChangeWatchedFiles(S=>{for(let T of S.changes)switch(T.type){case FileChangeType.Created:r.addFile(T.uri);break;case FileChangeType.Changed:r.addFile(T.uri);break;case FileChangeType.Deleted:r.removeFile(T.uri);break}}),n.onParseDone(async S=>{await i.update(S.document,S.tree),o.provideDiagnostics(S.document,S.tree)}),{capabilities:{textDocumentSync:rc.TextDocumentSyncKind.Incremental,documentSymbolProvider:!0,completionProvider:{resolveProvider:!0,documentSelector:[{language:"func"}],triggerCharacters:[".","~"]},definitionProvider:!0,documentFormattingProvider:!0,renameProvider:!0,codeLensProvider:{resolveProvider:!0}}}});ye.onInitialized(t=>{});ye.listen();
